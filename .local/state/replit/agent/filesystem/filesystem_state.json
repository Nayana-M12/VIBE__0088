{"file_contents":{"client/src/hooks/use-mobile.tsx":{"content":"import * as React from \"react\"\n\nconst MOBILE_BREAKPOINT = 768\n\nexport function useIsMobile() {\n  const [isMobile, setIsMobile] = React.useState<boolean | undefined>(undefined)\n\n  React.useEffect(() => {\n    const mql = window.matchMedia(`(max-width: ${MOBILE_BREAKPOINT - 1}px)`)\n    const onChange = () => {\n      setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    }\n    mql.addEventListener(\"change\", onChange)\n    setIsMobile(window.innerWidth < MOBILE_BREAKPOINT)\n    return () => mql.removeEventListener(\"change\", onChange)\n  }, [])\n\n  return !!isMobile\n}\n","size_bytes":565},"server/vite.ts":{"content":"import express, { type Express } from \"express\";\nimport fs from \"fs\";\nimport path from \"path\";\nimport { createServer as createViteServer, createLogger } from \"vite\";\nimport { type Server } from \"http\";\nimport viteConfig from \"../vite.config\";\nimport { nanoid } from \"nanoid\";\n\nconst viteLogger = createLogger();\n\nexport function log(message: string, source = \"express\") {\n  const formattedTime = new Date().toLocaleTimeString(\"en-US\", {\n    hour: \"numeric\",\n    minute: \"2-digit\",\n    second: \"2-digit\",\n    hour12: true,\n  });\n\n  console.log(`${formattedTime} [${source}] ${message}`);\n}\n\nexport async function setupVite(app: Express, server: Server) {\n  const serverOptions = {\n    middlewareMode: true,\n    hmr: { server },\n    allowedHosts: true as const,\n  };\n\n  const vite = await createViteServer({\n    ...viteConfig,\n    configFile: false,\n    customLogger: {\n      ...viteLogger,\n      error: (msg, options) => {\n        viteLogger.error(msg, options);\n        process.exit(1);\n      },\n    },\n    server: serverOptions,\n    appType: \"custom\",\n  });\n\n  app.use(vite.middlewares);\n  app.use(\"*\", async (req, res, next) => {\n    const url = req.originalUrl;\n\n    try {\n      const clientTemplate = path.resolve(\n        import.meta.dirname,\n        \"..\",\n        \"client\",\n        \"index.html\",\n      );\n\n      // always reload the index.html file from disk incase it changes\n      let template = await fs.promises.readFile(clientTemplate, \"utf-8\");\n      template = template.replace(\n        `src=\"/src/main.tsx\"`,\n        `src=\"/src/main.tsx?v=${nanoid()}\"`,\n      );\n      const page = await vite.transformIndexHtml(url, template);\n      res.status(200).set({ \"Content-Type\": \"text/html\" }).end(page);\n    } catch (e) {\n      vite.ssrFixStacktrace(e as Error);\n      next(e);\n    }\n  });\n}\n\nexport function serveStatic(app: Express) {\n  const distPath = path.resolve(import.meta.dirname, \"public\");\n\n  if (!fs.existsSync(distPath)) {\n    throw new Error(\n      `Could not find the build directory: ${distPath}, make sure to build the client first`,\n    );\n  }\n\n  app.use(express.static(distPath));\n\n  // fall through to index.html if the file doesn't exist\n  app.use(\"*\", (_req, res) => {\n    res.sendFile(path.resolve(distPath, \"index.html\"));\n  });\n}\n","size_bytes":2263},"client/src/components/ui/sheet.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SheetPrimitive from \"@radix-ui/react-dialog\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Sheet = SheetPrimitive.Root\n\nconst SheetTrigger = SheetPrimitive.Trigger\n\nconst SheetClose = SheetPrimitive.Close\n\nconst SheetPortal = SheetPrimitive.Portal\n\nconst SheetOverlay = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nSheetOverlay.displayName = SheetPrimitive.Overlay.displayName\n\nconst sheetVariants = cva(\n  \"fixed z-50 gap-4 bg-background p-6 shadow-lg transition ease-in-out data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:duration-300 data-[state=open]:duration-500\",\n  {\n    variants: {\n      side: {\n        top: \"inset-x-0 top-0 border-b data-[state=closed]:slide-out-to-top data-[state=open]:slide-in-from-top\",\n        bottom:\n          \"inset-x-0 bottom-0 border-t data-[state=closed]:slide-out-to-bottom data-[state=open]:slide-in-from-bottom\",\n        left: \"inset-y-0 left-0 h-full w-3/4 border-r data-[state=closed]:slide-out-to-left data-[state=open]:slide-in-from-left sm:max-w-sm\",\n        right:\n          \"inset-y-0 right-0 h-full w-3/4  border-l data-[state=closed]:slide-out-to-right data-[state=open]:slide-in-from-right sm:max-w-sm\",\n      },\n    },\n    defaultVariants: {\n      side: \"right\",\n    },\n  }\n)\n\ninterface SheetContentProps\n  extends React.ComponentPropsWithoutRef<typeof SheetPrimitive.Content>,\n    VariantProps<typeof sheetVariants> {}\n\nconst SheetContent = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Content>,\n  SheetContentProps\n>(({ side = \"right\", className, children, ...props }, ref) => (\n  <SheetPortal>\n    <SheetOverlay />\n    <SheetPrimitive.Content\n      ref={ref}\n      className={cn(sheetVariants({ side }), className)}\n      {...props}\n    >\n      {children}\n      <SheetPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-secondary\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </SheetPrimitive.Close>\n    </SheetPrimitive.Content>\n  </SheetPortal>\n))\nSheetContent.displayName = SheetPrimitive.Content.displayName\n\nconst SheetHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetHeader.displayName = \"SheetHeader\"\n\nconst SheetFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nSheetFooter.displayName = \"SheetFooter\"\n\nconst SheetTitle = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold text-foreground\", className)}\n    {...props}\n  />\n))\nSheetTitle.displayName = SheetPrimitive.Title.displayName\n\nconst SheetDescription = React.forwardRef<\n  React.ElementRef<typeof SheetPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof SheetPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <SheetPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nSheetDescription.displayName = SheetPrimitive.Description.displayName\n\nexport {\n  Sheet,\n  SheetPortal,\n  SheetOverlay,\n  SheetTrigger,\n  SheetClose,\n  SheetContent,\n  SheetHeader,\n  SheetFooter,\n  SheetTitle,\n  SheetDescription,\n}\n","size_bytes":4281},"client/src/components/ui/table.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Table = React.forwardRef<\n  HTMLTableElement,\n  React.HTMLAttributes<HTMLTableElement>\n>(({ className, ...props }, ref) => (\n  <div className=\"relative w-full overflow-auto\">\n    <table\n      ref={ref}\n      className={cn(\"w-full caption-bottom text-sm\", className)}\n      {...props}\n    />\n  </div>\n))\nTable.displayName = \"Table\"\n\nconst TableHeader = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <thead ref={ref} className={cn(\"[&_tr]:border-b\", className)} {...props} />\n))\nTableHeader.displayName = \"TableHeader\"\n\nconst TableBody = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tbody\n    ref={ref}\n    className={cn(\"[&_tr:last-child]:border-0\", className)}\n    {...props}\n  />\n))\nTableBody.displayName = \"TableBody\"\n\nconst TableFooter = React.forwardRef<\n  HTMLTableSectionElement,\n  React.HTMLAttributes<HTMLTableSectionElement>\n>(({ className, ...props }, ref) => (\n  <tfoot\n    ref={ref}\n    className={cn(\n      \"border-t bg-muted/50 font-medium [&>tr]:last:border-b-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableFooter.displayName = \"TableFooter\"\n\nconst TableRow = React.forwardRef<\n  HTMLTableRowElement,\n  React.HTMLAttributes<HTMLTableRowElement>\n>(({ className, ...props }, ref) => (\n  <tr\n    ref={ref}\n    className={cn(\n      \"border-b transition-colors hover:bg-muted/50 data-[state=selected]:bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nTableRow.displayName = \"TableRow\"\n\nconst TableHead = React.forwardRef<\n  HTMLTableCellElement,\n  React.ThHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <th\n    ref={ref}\n    className={cn(\n      \"h-12 px-4 text-left align-middle font-medium text-muted-foreground [&:has([role=checkbox])]:pr-0\",\n      className\n    )}\n    {...props}\n  />\n))\nTableHead.displayName = \"TableHead\"\n\nconst TableCell = React.forwardRef<\n  HTMLTableCellElement,\n  React.TdHTMLAttributes<HTMLTableCellElement>\n>(({ className, ...props }, ref) => (\n  <td\n    ref={ref}\n    className={cn(\"p-4 align-middle [&:has([role=checkbox])]:pr-0\", className)}\n    {...props}\n  />\n))\nTableCell.displayName = \"TableCell\"\n\nconst TableCaption = React.forwardRef<\n  HTMLTableCaptionElement,\n  React.HTMLAttributes<HTMLTableCaptionElement>\n>(({ className, ...props }, ref) => (\n  <caption\n    ref={ref}\n    className={cn(\"mt-4 text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nTableCaption.displayName = \"TableCaption\"\n\nexport {\n  Table,\n  TableHeader,\n  TableBody,\n  TableFooter,\n  TableHead,\n  TableRow,\n  TableCell,\n  TableCaption,\n}\n","size_bytes":2765},"client/src/pages/Water.tsx":{"content":"import { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Droplet, Award, AlertCircle } from \"lucide-react\";\nimport type { WaterRecord } from \"@shared/schema\";\nimport { insertWaterRecordSchema } from \"@shared/schema\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { isUnauthorizedError } from \"@/lib/authUtils\";\nimport { BarChart, Bar, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, Legend } from \"recharts\";\n\nconst formSchema = z.object({\n  month: z.string().regex(/^\\d{4}-\\d{2}$/, \"Invalid month format\"),\n  billAmount: z.coerce.number().positive(\"Bill amount must be positive\"),\n  consumption: z.coerce.number().positive(\"Consumption must be positive\"),\n});\n\nexport default function Water() {\n  const { toast } = useToast();\n  \n  const form = useForm<z.infer<typeof formSchema>>({\n    resolver: zodResolver(formSchema),\n    defaultValues: {\n      month: new Date().toISOString().slice(0, 7),\n      billAmount: \"\" as any,\n      consumption: \"\" as any,\n    },\n  });\n\n  const { data: records, isLoading } = useQuery<WaterRecord[]>({\n    queryKey: [\"/api/water\"],\n  });\n\n  const analyzeMutation = useMutation({\n    mutationFn: async (values: z.infer<typeof formSchema>) => {\n      return await apiRequest(\"POST\", \"/api/water/analyze\", values);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/water\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/auth/user\"] });\n      form.reset({\n        month: new Date().toISOString().slice(0, 7),\n        billAmount: \"\" as any,\n        consumption: \"\" as any,\n      });\n      toast({\n        title: \"Analysis Complete!\",\n        description: \"Your water data has been analyzed and points have been awarded.\",\n      });\n    },\n    onError: (error: Error) => {\n      if (isUnauthorizedError(error)) {\n        toast({\n          title: \"Unauthorized\",\n          description: \"You are logged out. Logging in again...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: \"Error\",\n        description: \"Failed to analyze water data. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const chartData = records?.slice(-6).map(r => ({\n    month: r.month,\n    consumption: r.consumption,\n  })) || [];\n\n  const latestRecord = records?.[0];\n\n  const getEfficiencyLevel = (score: number) => {\n    if (score >= 80) return { label: \"Excellent\", color: \"primary\" };\n    if (score >= 60) return { label: \"Good\", color: \"primary\" };\n    if (score >= 40) return { label: \"Average\", color: \"secondary\" };\n    return { label: \"Needs Improvement\", color: \"destructive\" };\n  };\n\n  return (\n    <div className=\"max-w-7xl mx-auto p-4 sm:p-6 lg:p-8 space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-display font-bold mb-2\">Water Tracker</h1>\n        <p className=\"text-muted-foreground\">Monitor your water usage and get efficiency insights</p>\n      </div>\n\n      {/* Input Form */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Droplet className=\"w-5 h-5\" />\n            Submit Water Data\n          </CardTitle>\n          <CardDescription>Enter your monthly water bill details for analysis</CardDescription>\n        </CardHeader>\n        <CardContent>\n          <Form {...form}>\n            <form onSubmit={form.handleSubmit((values) => analyzeMutation.mutate(values))} className=\"space-y-4\">\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                <FormField\n                  control={form.control}\n                  name=\"month\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Month</FormLabel>\n                      <FormControl>\n                        <Input type=\"month\" {...field} data-testid=\"input-water-month\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                <FormField\n                  control={form.control}\n                  name=\"billAmount\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Bill Amount ($)</FormLabel>\n                      <FormControl>\n                        <Input\n                          type=\"number\"\n                          step=\"0.01\"\n                          placeholder=\"45.00\"\n                          {...field}\n                          value={field.value || ''}\n                          onChange={(e) => field.onChange(e.target.value)}\n                          data-testid=\"input-water-bill\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                <FormField\n                  control={form.control}\n                  name=\"consumption\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Consumption (Liters)</FormLabel>\n                      <FormControl>\n                        <Input\n                          type=\"number\"\n                          step=\"1\"\n                          placeholder=\"15000\"\n                          {...field}\n                          value={field.value || ''}\n                          onChange={(e) => field.onChange(e.target.value)}\n                          data-testid=\"input-water-consumption\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n              <Button\n                type=\"submit\"\n                disabled={analyzeMutation.isPending}\n                className=\"w-full md:w-auto\"\n                data-testid=\"button-analyze-water\"\n              >\n                {analyzeMutation.isPending ? \"Analyzing...\" : \"Analyze Usage\"}\n              </Button>\n            </form>\n          </Form>\n        </CardContent>\n      </Card>\n\n      {/* Efficiency Score */}\n      {latestRecord && (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"text-lg flex items-center gap-2\">\n                <Award className=\"w-5 h-5\" />\n                Efficiency Score\n              </CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"flex items-center justify-center\">\n                <div className=\"relative\">\n                  <div className=\"w-32 h-32 rounded-full border-8 border-primary/20 flex items-center justify-center\">\n                    <div className=\"text-center\">\n                      <div className=\"text-4xl font-bold\">{latestRecord.efficiencyScore || 0}</div>\n                      <div className=\"text-xs text-muted-foreground\">out of 100</div>\n                    </div>\n                  </div>\n                </div>\n              </div>\n              <div className=\"text-center space-y-2\">\n                <Badge variant={getEfficiencyLevel(latestRecord.efficiencyScore || 0).color as any}>\n                  {getEfficiencyLevel(latestRecord.efficiencyScore || 0).label}\n                </Badge>\n                <p className=\"text-sm text-muted-foreground\">Points Earned: +{latestRecord.pointsEarned}</p>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"text-lg\">AI Recommendations</CardTitle>\n            </CardHeader>\n            <CardContent>\n              {latestRecord.aiInsights ? (\n                <div className=\"prose prose-sm max-w-none\">\n                  <p className=\"text-sm\">{latestRecord.aiInsights}</p>\n                </div>\n              ) : (\n                <p className=\"text-sm text-muted-foreground\">Analyzing your water usage patterns...</p>\n              )}\n            </CardContent>\n          </Card>\n        </div>\n      )}\n\n      {/* Usage Chart */}\n      {isLoading ? (\n        <Card>\n          <CardContent className=\"p-6\">\n            <Skeleton className=\"h-[300px] w-full\" />\n          </CardContent>\n        </Card>\n      ) : records && records.length > 0 ? (\n        <Card>\n          <CardHeader>\n            <CardTitle>Water Usage Trends</CardTitle>\n            <CardDescription>Your consumption over the last 6 months</CardDescription>\n          </CardHeader>\n          <CardContent>\n            <ResponsiveContainer width=\"100%\" height={300}>\n              <BarChart data={chartData}>\n                <CartesianGrid strokeDasharray=\"3 3\" className=\"stroke-border\" />\n                <XAxis dataKey=\"month\" className=\"text-xs\" />\n                <YAxis className=\"text-xs\" />\n                <Tooltip />\n                <Legend />\n                <Bar dataKey=\"consumption\" fill=\"hsl(var(--chart-2))\" name=\"Consumption (L)\" />\n              </BarChart>\n            </ResponsiveContainer>\n          </CardContent>\n        </Card>\n      ) : (\n        <Card>\n          <CardContent className=\"py-12 text-center\">\n            <AlertCircle className=\"w-12 h-12 text-muted-foreground mx-auto mb-4\" />\n            <p className=\"text-muted-foreground\">No water data yet. Submit your first bill to get started!</p>\n          </CardContent>\n        </Card>\n      )}\n    </div>\n  );\n}\n","size_bytes":10091},"client/src/components/ui/sidebar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, VariantProps } from \"class-variance-authority\"\nimport { PanelLeftIcon } from \"lucide-react\"\n\nimport { useIsMobile } from \"@/hooks/use-mobile\"\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\nimport { Input } from \"@/components/ui/input\"\nimport { Separator } from \"@/components/ui/separator\"\nimport {\n  Sheet,\n  SheetContent,\n  SheetDescription,\n  SheetHeader,\n  SheetTitle,\n} from \"@/components/ui/sheet\"\nimport { Skeleton } from \"@/components/ui/skeleton\"\nimport {\n  Tooltip,\n  TooltipContent,\n  TooltipProvider,\n  TooltipTrigger,\n} from \"@/components/ui/tooltip\"\n\nconst SIDEBAR_COOKIE_NAME = \"sidebar_state\"\nconst SIDEBAR_COOKIE_MAX_AGE = 60 * 60 * 24 * 7\nconst SIDEBAR_WIDTH = \"16rem\"\nconst SIDEBAR_WIDTH_MOBILE = \"18rem\"\nconst SIDEBAR_WIDTH_ICON = \"3rem\"\nconst SIDEBAR_KEYBOARD_SHORTCUT = \"b\"\n\ntype SidebarContextProps = {\n  state: \"expanded\" | \"collapsed\"\n  open: boolean\n  setOpen: (open: boolean) => void\n  openMobile: boolean\n  setOpenMobile: (open: boolean) => void\n  isMobile: boolean\n  toggleSidebar: () => void\n}\n\nconst SidebarContext = React.createContext<SidebarContextProps | null>(null)\n\nfunction useSidebar() {\n  const context = React.useContext(SidebarContext)\n  if (!context) {\n    throw new Error(\"useSidebar must be used within a SidebarProvider.\")\n  }\n\n  return context\n}\n\nfunction SidebarProvider({\n  defaultOpen = true,\n  open: openProp,\n  onOpenChange: setOpenProp,\n  className,\n  style,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  defaultOpen?: boolean\n  open?: boolean\n  onOpenChange?: (open: boolean) => void\n}) {\n  const isMobile = useIsMobile()\n  const [openMobile, setOpenMobile] = React.useState(false)\n\n  // This is the internal state of the sidebar.\n  // We use openProp and setOpenProp for control from outside the component.\n  const [_open, _setOpen] = React.useState(defaultOpen)\n  const open = openProp ?? _open\n  const setOpen = React.useCallback(\n    (value: boolean | ((value: boolean) => boolean)) => {\n      const openState = typeof value === \"function\" ? value(open) : value\n      if (setOpenProp) {\n        setOpenProp(openState)\n      } else {\n        _setOpen(openState)\n      }\n\n      // This sets the cookie to keep the sidebar state.\n      document.cookie = `${SIDEBAR_COOKIE_NAME}=${openState}; path=/; max-age=${SIDEBAR_COOKIE_MAX_AGE}`\n    },\n    [setOpenProp, open]\n  )\n\n  // Helper to toggle the sidebar.\n  const toggleSidebar = React.useCallback(() => {\n    return isMobile ? setOpenMobile((open) => !open) : setOpen((open) => !open)\n  }, [isMobile, setOpen, setOpenMobile])\n\n  // Adds a keyboard shortcut to toggle the sidebar.\n  React.useEffect(() => {\n    const handleKeyDown = (event: KeyboardEvent) => {\n      if (\n        event.key === SIDEBAR_KEYBOARD_SHORTCUT &&\n        (event.metaKey || event.ctrlKey)\n      ) {\n        event.preventDefault()\n        toggleSidebar()\n      }\n    }\n\n    window.addEventListener(\"keydown\", handleKeyDown)\n    return () => window.removeEventListener(\"keydown\", handleKeyDown)\n  }, [toggleSidebar])\n\n  // We add a state so that we can do data-state=\"expanded\" or \"collapsed\".\n  // This makes it easier to style the sidebar with Tailwind classes.\n  const state = open ? \"expanded\" : \"collapsed\"\n\n  const contextValue = React.useMemo<SidebarContextProps>(\n    () => ({\n      state,\n      open,\n      setOpen,\n      isMobile,\n      openMobile,\n      setOpenMobile,\n      toggleSidebar,\n    }),\n    [state, open, setOpen, isMobile, openMobile, setOpenMobile, toggleSidebar]\n  )\n\n  return (\n    <SidebarContext.Provider value={contextValue}>\n      <TooltipProvider delayDuration={0}>\n        <div\n          data-slot=\"sidebar-wrapper\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH,\n              \"--sidebar-width-icon\": SIDEBAR_WIDTH_ICON,\n              ...style,\n            } as React.CSSProperties\n          }\n          className={cn(\n            \"group/sidebar-wrapper has-data-[variant=inset]:bg-sidebar flex min-h-svh w-full\",\n            className\n          )}\n          {...props}\n        >\n          {children}\n        </div>\n      </TooltipProvider>\n    </SidebarContext.Provider>\n  )\n}\n\nfunction Sidebar({\n  side = \"left\",\n  variant = \"sidebar\",\n  collapsible = \"offcanvas\",\n  className,\n  children,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  side?: \"left\" | \"right\"\n  variant?: \"sidebar\" | \"floating\" | \"inset\"\n  collapsible?: \"offcanvas\" | \"icon\" | \"none\"\n}) {\n  const { isMobile, state, openMobile, setOpenMobile } = useSidebar()\n\n  if (collapsible === \"none\") {\n    return (\n      <div\n        data-slot=\"sidebar\"\n        className={cn(\n          \"bg-sidebar text-sidebar-foreground flex h-full w-[var(--sidebar-width)] flex-col\",\n          className\n        )}\n        {...props}\n      >\n        {children}\n      </div>\n    )\n  }\n\n  if (isMobile) {\n    return (\n      <Sheet open={openMobile} onOpenChange={setOpenMobile} {...props}>\n        <SheetContent\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar\"\n          data-mobile=\"true\"\n          className=\"bg-sidebar text-sidebar-foreground w-[var(--sidebar-width)] p-0 [&>button]:hidden\"\n          style={\n            {\n              \"--sidebar-width\": SIDEBAR_WIDTH_MOBILE,\n            } as React.CSSProperties\n          }\n          side={side}\n        >\n          <SheetHeader className=\"sr-only\">\n            <SheetTitle>Sidebar</SheetTitle>\n            <SheetDescription>Displays the mobile sidebar.</SheetDescription>\n          </SheetHeader>\n          <div className=\"flex h-full w-full flex-col\">{children}</div>\n        </SheetContent>\n      </Sheet>\n    )\n  }\n\n  return (\n    <div\n      className=\"group peer text-sidebar-foreground hidden md:block\"\n      data-state={state}\n      data-collapsible={state === \"collapsed\" ? collapsible : \"\"}\n      data-variant={variant}\n      data-side={side}\n      data-slot=\"sidebar\"\n    >\n      {/* This is what handles the sidebar gap on desktop */}\n      <div\n        data-slot=\"sidebar-gap\"\n        className={cn(\n          \"relative w-[var(--sidebar-width)] bg-transparent transition-[width] duration-200 ease-linear\",\n          \"group-data-[collapsible=offcanvas]:w-0\",\n          \"group-data-[side=right]:rotate-180\",\n          variant === \"floating\" || variant === \"inset\"\n            ? \"group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4))]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)]\"\n        )}\n      />\n      <div\n        data-slot=\"sidebar-container\"\n        className={cn(\n          \"fixed inset-y-0 z-10 hidden h-svh w-[var(--sidebar-width)] transition-[left,right,width] duration-200 ease-linear md:flex\",\n          side === \"left\"\n            ? \"left-0 group-data-[collapsible=offcanvas]:left-[calc(var(--sidebar-width)*-1)]\"\n            : \"right-0 group-data-[collapsible=offcanvas]:right-[calc(var(--sidebar-width)*-1)]\",\n          // Adjust the padding for floating and inset variants.\n          variant === \"floating\" || variant === \"inset\"\n            ? \"p-2 group-data-[collapsible=icon]:w-[calc(var(--sidebar-width-icon)+var(--spacing-4)+2px)]\"\n            : \"group-data-[collapsible=icon]:w-[var(--sidebar-width-icon)] group-data-[side=left]:border-r group-data-[side=right]:border-l\",\n          className\n        )}\n        {...props}\n      >\n        <div\n          data-sidebar=\"sidebar\"\n          data-slot=\"sidebar-inner\"\n          className=\"bg-sidebar group-data-[variant=floating]:border-sidebar-border flex h-full w-full flex-col group-data-[variant=floating]:rounded-lg group-data-[variant=floating]:border group-data-[variant=floating]:shadow-sm\"\n        >\n          {children}\n        </div>\n      </div>\n    </div>\n  )\n}\n\nfunction SidebarTrigger({\n  className,\n  onClick,\n  ...props\n}: React.ComponentProps<typeof Button>) {\n  const { toggleSidebar } = useSidebar()\n\n  return (\n    <Button\n      data-sidebar=\"trigger\"\n      data-slot=\"sidebar-trigger\"\n      variant=\"ghost\"\n      size=\"icon\"\n      className={cn(\"h-7 w-7\", className)}\n      onClick={(event) => {\n        onClick?.(event)\n        toggleSidebar()\n      }}\n      {...props}\n    >\n      <PanelLeftIcon />\n      <span className=\"sr-only\">Toggle Sidebar</span>\n    </Button>\n  )\n}\n\nfunction SidebarRail({ className, ...props }: React.ComponentProps<\"button\">) {\n  const { toggleSidebar } = useSidebar()\n\n  // Note: Tailwind v3.4 doesn't support \"in-\" selectors. So the rail won't work perfectly.\n  return (\n    <button\n      data-sidebar=\"rail\"\n      data-slot=\"sidebar-rail\"\n      aria-label=\"Toggle Sidebar\"\n      tabIndex={-1}\n      onClick={toggleSidebar}\n      title=\"Toggle Sidebar\"\n      className={cn(\n        \"hover:after:bg-sidebar-border absolute inset-y-0 z-20 hidden w-4 -translate-x-1/2 transition-all ease-linear group-data-[side=left]:-right-4 group-data-[side=right]:left-0 after:absolute after:inset-y-0 after:left-1/2 after:w-[2px] sm:flex\",\n        \"in-data-[side=left]:cursor-w-resize in-data-[side=right]:cursor-e-resize\",\n        \"[[data-side=left][data-state=collapsed]_&]:cursor-e-resize [[data-side=right][data-state=collapsed]_&]:cursor-w-resize\",\n        \"hover:group-data-[collapsible=offcanvas]:bg-sidebar group-data-[collapsible=offcanvas]:translate-x-0 group-data-[collapsible=offcanvas]:after:left-full\",\n        \"[[data-side=left][data-collapsible=offcanvas]_&]:-right-2\",\n        \"[[data-side=right][data-collapsible=offcanvas]_&]:-left-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInset({ className, ...props }: React.ComponentProps<\"main\">) {\n  return (\n    <main\n      data-slot=\"sidebar-inset\"\n      className={cn(\n        \"bg-background relative flex w-full flex-1 flex-col\",\n        \"md:peer-data-[variant=inset]:m-2 md:peer-data-[variant=inset]:ml-0 md:peer-data-[variant=inset]:rounded-xl md:peer-data-[variant=inset]:shadow-sm md:peer-data-[variant=inset]:peer-data-[state=collapsed]:ml-2\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarInput({\n  className,\n  ...props\n}: React.ComponentProps<typeof Input>) {\n  return (\n    <Input\n      data-slot=\"sidebar-input\"\n      data-sidebar=\"input\"\n      className={cn(\"bg-background h-8 w-full shadow-none\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarHeader({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-header\"\n      data-sidebar=\"header\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarFooter({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-footer\"\n      data-sidebar=\"footer\"\n      className={cn(\"flex flex-col gap-2 p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarSeparator({\n  className,\n  ...props\n}: React.ComponentProps<typeof Separator>) {\n  return (\n    <Separator\n      data-slot=\"sidebar-separator\"\n      data-sidebar=\"separator\"\n      className={cn(\"bg-sidebar-border mx-2 w-auto\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarContent({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-content\"\n      data-sidebar=\"content\"\n      className={cn(\n        \"flex min-h-0 flex-1 flex-col gap-2 overflow-auto group-data-[collapsible=icon]:overflow-hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroup({ className, ...props }: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group\"\n      data-sidebar=\"group\"\n      className={cn(\"relative flex w-full min-w-0 flex-col p-2\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupLabel({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"div\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"div\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-label\"\n      data-sidebar=\"group-label\"\n      className={cn(\n        \"text-sidebar-foreground/70 ring-sidebar-ring flex h-8 shrink-0 items-center rounded-md px-2 text-xs font-medium outline-hidden transition-[margin,opacity] duration-200 ease-linear focus-visible:ring-2 [&>svg]:h-4 [&>svg]:w-4 [&>svg]:shrink-0\",\n        \"group-data-[collapsible=icon]:-mt-8 group-data-[collapsible=icon]:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupAction({\n  className,\n  asChild = false,\n  ...props\n}: React.ComponentProps<\"button\"> & { asChild?: boolean }) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-group-action\"\n      data-sidebar=\"group-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground absolute top-3.5 right-3 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarGroupContent({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-group-content\"\n      data-sidebar=\"group-content\"\n      className={cn(\"w-full text-sm\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenu({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu\"\n      data-sidebar=\"menu\"\n      className={cn(\"flex w-full min-w-0 flex-col gap-1\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuItem({ className, ...props }: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-item\"\n      data-sidebar=\"menu-item\"\n      className={cn(\"group/menu-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nconst sidebarMenuButtonVariants = cva(\n  \"peer/menu-button flex w-full items-center gap-2 overflow-hidden rounded-md p-2 text-left text-sm outline-hidden ring-sidebar-ring transition-[width,height,padding] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground focus-visible:ring-2 active:bg-sidebar-accent active:text-sidebar-accent-foreground disabled:pointer-events-none disabled:opacity-50 group-has-data-[sidebar=menu-action]/menu-item:pr-8 aria-disabled:pointer-events-none aria-disabled:opacity-50 data-[active=true]:bg-sidebar-accent data-[active=true]:font-medium data-[active=true]:text-sidebar-accent-foreground data-[state=open]:hover:bg-sidebar-accent data-[state=open]:hover:text-sidebar-accent-foreground group-data-[collapsible=icon]:w-8! group-data-[collapsible=icon]:h-8! group-data-[collapsible=icon]:p-2! [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n  {\n    variants: {\n      variant: {\n        default: \"hover:bg-sidebar-accent hover:text-sidebar-accent-foreground\",\n        outline:\n          \"bg-background shadow-[0_0_0_1px_hsl(var(--sidebar-border))] hover:bg-sidebar-accent hover:text-sidebar-accent-foreground hover:shadow-[0_0_0_1px_hsl(var(--sidebar-accent))]\",\n      },\n      size: {\n        default: \"h-8 text-sm\",\n        sm: \"h-7 text-xs\",\n        lg: \"h-12 text-sm group-data-[collapsible=icon]:p-0!\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nfunction SidebarMenuButton({\n  asChild = false,\n  isActive = false,\n  variant = \"default\",\n  size = \"default\",\n  tooltip,\n  className,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  isActive?: boolean\n  tooltip?: string | React.ComponentProps<typeof TooltipContent>\n} & VariantProps<typeof sidebarMenuButtonVariants>) {\n  const Comp = asChild ? Slot : \"button\"\n  const { isMobile, state } = useSidebar()\n\n  const button = (\n    <Comp\n      data-slot=\"sidebar-menu-button\"\n      data-sidebar=\"menu-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(sidebarMenuButtonVariants({ variant, size }), className)}\n      {...props}\n    />\n  )\n\n  if (!tooltip) {\n    return button\n  }\n\n  if (typeof tooltip === \"string\") {\n    tooltip = {\n      children: tooltip,\n    }\n  }\n\n  return (\n    <Tooltip>\n      <TooltipTrigger asChild>{button}</TooltipTrigger>\n      <TooltipContent\n        side=\"right\"\n        align=\"center\"\n        hidden={state !== \"collapsed\" || isMobile}\n        {...tooltip}\n      />\n    </Tooltip>\n  )\n}\n\nfunction SidebarMenuAction({\n  className,\n  asChild = false,\n  showOnHover = false,\n  ...props\n}: React.ComponentProps<\"button\"> & {\n  asChild?: boolean\n  showOnHover?: boolean\n}) {\n  const Comp = asChild ? Slot : \"button\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-action\"\n      data-sidebar=\"menu-action\"\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground peer-hover/menu-button:text-sidebar-accent-foreground absolute top-1.5 right-1 flex aspect-square w-5 items-center justify-center rounded-md p-0 outline-hidden transition-transform focus-visible:ring-2 [&>svg]:size-4 [&>svg]:shrink-0\",\n        // Increases the hit area of the button on mobile.\n        \"after:absolute after:-inset-2 md:after:hidden\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        showOnHover &&\n          \"peer-data-[active=true]/menu-button:text-sidebar-accent-foreground group-focus-within/menu-item:opacity-100 group-hover/menu-item:opacity-100 data-[state=open]:opacity-100 md:opacity-0\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuBadge({\n  className,\n  ...props\n}: React.ComponentProps<\"div\">) {\n  return (\n    <div\n      data-slot=\"sidebar-menu-badge\"\n      data-sidebar=\"menu-badge\"\n      className={cn(\n        \"text-sidebar-foreground pointer-events-none absolute right-1 flex h-5 min-w-5 items-center justify-center rounded-md px-1 text-xs font-medium tabular-nums select-none\",\n        \"peer-hover/menu-button:text-sidebar-accent-foreground peer-data-[active=true]/menu-button:text-sidebar-accent-foreground\",\n        \"peer-data-[size=sm]/menu-button:top-1\",\n        \"peer-data-[size=default]/menu-button:top-1.5\",\n        \"peer-data-[size=lg]/menu-button:top-2.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSkeleton({\n  className,\n  showIcon = false,\n  ...props\n}: React.ComponentProps<\"div\"> & {\n  showIcon?: boolean\n}) {\n  // Random width between 50 to 90%.\n  const width = React.useMemo(() => {\n    return `${Math.floor(Math.random() * 40) + 50}%`\n  }, [])\n\n  return (\n    <div\n      data-slot=\"sidebar-menu-skeleton\"\n      data-sidebar=\"menu-skeleton\"\n      className={cn(\"flex h-8 items-center gap-2 rounded-md px-2\", className)}\n      {...props}\n    >\n      {showIcon && (\n        <Skeleton\n          className=\"size-4 rounded-md\"\n          data-sidebar=\"menu-skeleton-icon\"\n        />\n      )}\n      <Skeleton\n        className=\"h-4 max-w-[var(--skeleton-width)] flex-1\"\n        data-sidebar=\"menu-skeleton-text\"\n        style={\n          {\n            \"--skeleton-width\": width,\n          } as React.CSSProperties\n        }\n      />\n    </div>\n  )\n}\n\nfunction SidebarMenuSub({ className, ...props }: React.ComponentProps<\"ul\">) {\n  return (\n    <ul\n      data-slot=\"sidebar-menu-sub\"\n      data-sidebar=\"menu-sub\"\n      className={cn(\n        \"border-sidebar-border mx-3.5 flex min-w-0 translate-x-px flex-col gap-1 border-l px-2.5 py-0.5\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubItem({\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) {\n  return (\n    <li\n      data-slot=\"sidebar-menu-sub-item\"\n      data-sidebar=\"menu-sub-item\"\n      className={cn(\"group/menu-sub-item relative\", className)}\n      {...props}\n    />\n  )\n}\n\nfunction SidebarMenuSubButton({\n  asChild = false,\n  size = \"md\",\n  isActive = false,\n  className,\n  ...props\n}: React.ComponentProps<\"a\"> & {\n  asChild?: boolean\n  size?: \"sm\" | \"md\"\n  isActive?: boolean\n}) {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      data-slot=\"sidebar-menu-sub-button\"\n      data-sidebar=\"menu-sub-button\"\n      data-size={size}\n      data-active={isActive}\n      className={cn(\n        \"text-sidebar-foreground ring-sidebar-ring hover:bg-sidebar-accent hover:text-sidebar-accent-foreground active:bg-sidebar-accent active:text-sidebar-accent-foreground [&>svg]:text-sidebar-accent-foreground flex h-7 min-w-0 -translate-x-px items-center gap-2 overflow-hidden rounded-md px-2 outline outline-2 outline-transparent outline-offset-2 focus-visible:ring-2 disabled:pointer-events-none disabled:opacity-50 aria-disabled:pointer-events-none aria-disabled:opacity-50 [&>span:last-child]:truncate [&>svg]:size-4 [&>svg]:shrink-0\",\n        \"data-[active=true]:bg-sidebar-accent data-[active=true]:text-sidebar-accent-foreground\",\n        size === \"sm\" && \"text-xs\",\n        size === \"md\" && \"text-sm\",\n        \"group-data-[collapsible=icon]:hidden\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\n\nexport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupAction,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarHeader,\n  SidebarInput,\n  SidebarInset,\n  SidebarMenu,\n  SidebarMenuAction,\n  SidebarMenuBadge,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarMenuSkeleton,\n  SidebarMenuSub,\n  SidebarMenuSubButton,\n  SidebarMenuSubItem,\n  SidebarProvider,\n  SidebarRail,\n  SidebarSeparator,\n  SidebarTrigger,\n  useSidebar,\n}\n","size_bytes":21846},"client/src/main.tsx":{"content":"import { createRoot } from \"react-dom/client\";\nimport App from \"./App\";\nimport \"./index.css\";\n\ncreateRoot(document.getElementById(\"root\")!).render(<App />);\n","size_bytes":157},"client/src/components/ui/drawer.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport { Drawer as DrawerPrimitive } from \"vaul\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Drawer = ({\n  shouldScaleBackground = true,\n  ...props\n}: React.ComponentProps<typeof DrawerPrimitive.Root>) => (\n  <DrawerPrimitive.Root\n    shouldScaleBackground={shouldScaleBackground}\n    {...props}\n  />\n)\nDrawer.displayName = \"Drawer\"\n\nconst DrawerTrigger = DrawerPrimitive.Trigger\n\nconst DrawerPortal = DrawerPrimitive.Portal\n\nconst DrawerClose = DrawerPrimitive.Close\n\nconst DrawerOverlay = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Overlay\n    ref={ref}\n    className={cn(\"fixed inset-0 z-50 bg-black/80\", className)}\n    {...props}\n  />\n))\nDrawerOverlay.displayName = DrawerPrimitive.Overlay.displayName\n\nconst DrawerContent = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DrawerPortal>\n    <DrawerOverlay />\n    <DrawerPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed inset-x-0 bottom-0 z-50 mt-24 flex h-auto flex-col rounded-t-[10px] border bg-background\",\n        className\n      )}\n      {...props}\n    >\n      <div className=\"mx-auto mt-4 h-2 w-[100px] rounded-full bg-muted\" />\n      {children}\n    </DrawerPrimitive.Content>\n  </DrawerPortal>\n))\nDrawerContent.displayName = \"DrawerContent\"\n\nconst DrawerHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"grid gap-1.5 p-4 text-center sm:text-left\", className)}\n    {...props}\n  />\n)\nDrawerHeader.displayName = \"DrawerHeader\"\n\nconst DrawerFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\"mt-auto flex flex-col gap-2 p-4\", className)}\n    {...props}\n  />\n)\nDrawerFooter.displayName = \"DrawerFooter\"\n\nconst DrawerTitle = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDrawerTitle.displayName = DrawerPrimitive.Title.displayName\n\nconst DrawerDescription = React.forwardRef<\n  React.ElementRef<typeof DrawerPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DrawerPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DrawerPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDrawerDescription.displayName = DrawerPrimitive.Description.displayName\n\nexport {\n  Drawer,\n  DrawerPortal,\n  DrawerOverlay,\n  DrawerTrigger,\n  DrawerClose,\n  DrawerContent,\n  DrawerHeader,\n  DrawerFooter,\n  DrawerTitle,\n  DrawerDescription,\n}\n","size_bytes":3021},"client/src/components/ui/dialog.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as DialogPrimitive from \"@radix-ui/react-dialog\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Dialog = DialogPrimitive.Root\n\nconst DialogTrigger = DialogPrimitive.Trigger\n\nconst DialogPortal = DialogPrimitive.Portal\n\nconst DialogClose = DialogPrimitive.Close\n\nconst DialogOverlay = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Overlay\n    ref={ref}\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogOverlay.displayName = DialogPrimitive.Overlay.displayName\n\nconst DialogContent = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <DialogPortal>\n    <DialogOverlay />\n    <DialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <DialogPrimitive.Close className=\"absolute right-4 top-4 rounded-sm opacity-70 ring-offset-background transition-opacity hover:opacity-100 focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none data-[state=open]:bg-accent data-[state=open]:text-muted-foreground\">\n        <X className=\"h-4 w-4\" />\n        <span className=\"sr-only\">Close</span>\n      </DialogPrimitive.Close>\n    </DialogPrimitive.Content>\n  </DialogPortal>\n))\nDialogContent.displayName = DialogPrimitive.Content.displayName\n\nconst DialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-1.5 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogHeader.displayName = \"DialogHeader\"\n\nconst DialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nDialogFooter.displayName = \"DialogFooter\"\n\nconst DialogTitle = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Title\n    ref={ref}\n    className={cn(\n      \"text-lg font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nDialogTitle.displayName = DialogPrimitive.Title.displayName\n\nconst DialogDescription = React.forwardRef<\n  React.ElementRef<typeof DialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof DialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <DialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nDialogDescription.displayName = DialogPrimitive.Description.displayName\n\nexport {\n  Dialog,\n  DialogPortal,\n  DialogOverlay,\n  DialogClose,\n  DialogTrigger,\n  DialogContent,\n  DialogHeader,\n  DialogFooter,\n  DialogTitle,\n  DialogDescription,\n}\n","size_bytes":3848},"client/src/components/ui/toggle.tsx":{"content":"import * as React from \"react\"\nimport * as TogglePrimitive from \"@radix-ui/react-toggle\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst toggleVariants = cva(\n  \"inline-flex items-center justify-center rounded-md text-sm font-medium ring-offset-background transition-colors hover:bg-muted hover:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=on]:bg-accent data-[state=on]:text-accent-foreground [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0 gap-2\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-transparent\",\n        outline:\n          \"border border-input bg-transparent hover:bg-accent hover:text-accent-foreground\",\n      },\n      size: {\n        default: \"h-10 px-3 min-w-10\",\n        sm: \"h-9 px-2.5 min-w-9\",\n        lg: \"h-11 px-5 min-w-11\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  }\n)\n\nconst Toggle = React.forwardRef<\n  React.ElementRef<typeof TogglePrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof TogglePrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, ...props }, ref) => (\n  <TogglePrimitive.Root\n    ref={ref}\n    className={cn(toggleVariants({ variant, size, className }))}\n    {...props}\n  />\n))\n\nToggle.displayName = TogglePrimitive.Root.displayName\n\nexport { Toggle, toggleVariants }\n","size_bytes":1527},"client/src/components/ui/textarea.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Textarea = React.forwardRef<\n  HTMLTextAreaElement,\n  React.ComponentProps<\"textarea\">\n>(({ className, ...props }, ref) => {\n  return (\n    <textarea\n      className={cn(\n        \"flex min-h-[80px] w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  )\n})\nTextarea.displayName = \"Textarea\"\n\nexport { Textarea }\n","size_bytes":689},"server/seed.ts":{"content":"import { db } from \"./db\";\nimport { scratchCards, coupons } from \"@shared/schema\";\n\nasync function seed() {\n  console.log(\"Seeding database...\");\n\n  // Seed scratch cards\n  const scratchCardData = [\n    {\n      name: \"Eco Home Essentials\",\n      description: \"Eco-friendly cleaning products bundle\",\n      category: \"home_decor\",\n      pointsCost: 50,\n      isActive: true,\n    },\n    {\n      name: \"Bamboo Basics\",\n      description: \"Set of bamboo kitchen utensils\",\n      category: \"home_decor\",\n      pointsCost: 75,\n      isActive: true,\n    },\n    {\n      name: \"Green Living Pack\",\n      description: \"Reusable bags and containers set\",\n      category: \"personal_essentials\",\n      pointsCost: 60,\n      isActive: true,\n    },\n    {\n      name: \"Sustainable Self-Care\",\n      description: \"Organic personal care items\",\n      category: \"personal_essentials\",\n      pointsCost: 80,\n      isActive: true,\n    },\n  ];\n\n  for (const card of scratchCardData) {\n    await db.insert(scratchCards).values(card).onConflictDoNothing();\n  }\n\n  // Seed coupons\n  const couponData = [\n    {\n      name: \"EcoStore Premium\",\n      description: \"25% off on all eco-friendly products\",\n      discountPercentage: 25,\n      brandName: \"EcoStore\",\n      category: \"products\",\n      pointsCost: 200,\n      validUntil: new Date(\"2026-12-31\"),\n      eventType: null,\n      isActive: true,\n    },\n    {\n      name: \"GreenTech Gadgets\",\n      description: \"20% off on energy-efficient appliances\",\n      discountPercentage: 20,\n      brandName: \"GreenTech\",\n      category: \"products\",\n      pointsCost: 250,\n      validUntil: new Date(\"2026-12-31\"),\n      eventType: null,\n      isActive: true,\n    },\n    {\n      name: \"Sustainability Course - World Environment Day\",\n      description: \"50% off on online sustainability certification\",\n      discountPercentage: 50,\n      brandName: \"EcoAcademy\",\n      category: \"courses\",\n      pointsCost: 300,\n      validUntil: new Date(\"2025-06-05\"),\n      eventType: \"world_environment_day\",\n      isActive: true,\n    },\n    {\n      name: \"App Festival Special\",\n      description: \"30% off on eco-lifestyle masterclass\",\n      discountPercentage: 30,\n      brandName: \"Green Living Institute\",\n      category: \"courses\",\n      pointsCost: 250,\n      validUntil: new Date(\"2025-12-31\"),\n      eventType: \"app_festival\",\n      isActive: true,\n    },\n  ];\n\n  for (const coupon of couponData) {\n    await db.insert(coupons).values(coupon).onConflictDoNothing();\n  }\n\n  console.log(\"Database seeded successfully!\");\n}\n\nseed()\n  .catch((error) => {\n    console.error(\"Error seeding database:\", error);\n    process.exit(1);\n  })\n  .finally(() => {\n    process.exit(0);\n  });\n","size_bytes":2693},"client/src/pages/Progress.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { TrendingUp, Leaf, Droplet, Zap, Trophy, Calendar } from \"lucide-react\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport type { EnergyRecord, WaterRecord, EcoRoute, Post } from \"@shared/schema\";\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, Legend } from \"recharts\";\n\nexport default function Progress() {\n  const { user } = useAuth();\n\n  const { data: energyRecords } = useQuery<EnergyRecord[]>({\n    queryKey: [\"/api/energy\"],\n  });\n\n  const { data: waterRecords } = useQuery<WaterRecord[]>({\n    queryKey: [\"/api/water\"],\n  });\n\n  const { data: routes } = useQuery<EcoRoute[]>({\n    queryKey: [\"/api/routes\"],\n  });\n\n  const { data: posts } = useQuery<Post[]>({\n    queryKey: [\"/api/posts\"],\n  });\n\n  const totalPointsEarned = \n    (energyRecords?.reduce((sum, r) => sum + r.pointsEarned, 0) || 0) +\n    (waterRecords?.reduce((sum, r) => sum + r.pointsEarned, 0) || 0) +\n    (routes?.reduce((sum, r) => sum + r.pointsEarned, 0) || 0);\n\n  const achievementsData = [\n    {\n      month: energyRecords?.[5]?.month || \"\",\n      points: (energyRecords?.[5]?.pointsEarned || 0) + (waterRecords?.[5]?.pointsEarned || 0),\n    },\n    {\n      month: energyRecords?.[4]?.month || \"\",\n      points: (energyRecords?.[4]?.pointsEarned || 0) + (waterRecords?.[4]?.pointsEarned || 0),\n    },\n    {\n      month: energyRecords?.[3]?.month || \"\",\n      points: (energyRecords?.[3]?.pointsEarned || 0) + (waterRecords?.[3]?.pointsEarned || 0),\n    },\n    {\n      month: energyRecords?.[2]?.month || \"\",\n      points: (energyRecords?.[2]?.pointsEarned || 0) + (waterRecords?.[2]?.pointsEarned || 0),\n    },\n    {\n      month: energyRecords?.[1]?.month || \"\",\n      points: (energyRecords?.[1]?.pointsEarned || 0) + (waterRecords?.[1]?.pointsEarned || 0),\n    },\n    {\n      month: energyRecords?.[0]?.month || \"\",\n      points: (energyRecords?.[0]?.pointsEarned || 0) + (waterRecords?.[0]?.pointsEarned || 0),\n    },\n  ].filter(d => d.month);\n\n  const milestones = [\n    {\n      title: \"First Energy Analysis\",\n      description: \"Analyzed your first electricity bill\",\n      date: energyRecords?.[energyRecords.length - 1]?.createdAt,\n      icon: Zap,\n      achieved: (energyRecords?.length || 0) > 0,\n    },\n    {\n      title: \"Water Warrior\",\n      description: \"Tracked your first water usage\",\n      date: waterRecords?.[waterRecords.length - 1]?.createdAt,\n      icon: Droplet,\n      achieved: (waterRecords?.length || 0) > 0,\n    },\n    {\n      title: \"Eco Driver\",\n      description: \"Took your first eco-friendly route\",\n      date: routes?.[routes.length - 1]?.createdAt,\n      icon: Leaf,\n      achieved: (routes?.length || 0) > 0,\n    },\n    {\n      title: \"100 Points Club\",\n      description: \"Earned your first 100 points\",\n      date: user?.createdAt,\n      icon: Trophy,\n      achieved: (user?.points || 0) >= 100,\n    },\n    {\n      title: \"Carbon Champion\",\n      description: \"Saved 10kg of CO\",\n      date: user?.createdAt,\n      icon: Leaf,\n      achieved: (user?.totalCarbonSaved || 0) >= 10,\n    },\n  ];\n\n  return (\n    <div className=\"max-w-7xl mx-auto p-4 sm:p-6 lg:p-8 space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-display font-bold mb-2\">Your Progress</h1>\n        <p className=\"text-muted-foreground\">Track your sustainability journey and celebrate milestones</p>\n      </div>\n\n      {/* Lifetime Impact */}\n      <div className=\"grid grid-cols-1 md:grid-cols-3 gap-6\">\n        <Card>\n          <CardHeader className=\"pb-3\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground\">Total Points Earned</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"flex items-center gap-3\">\n              <div className=\"flex items-center justify-center w-12 h-12 rounded-lg bg-primary/10 text-primary\">\n                <Trophy className=\"w-6 h-6\" />\n              </div>\n              <div>\n                <p className=\"text-3xl font-bold\" data-testid=\"stat-total-points\">{totalPointsEarned}</p>\n                <p className=\"text-xs text-muted-foreground\">All-time earnings</p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"pb-3\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground\">Carbon Saved</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"flex items-center gap-3\">\n              <div className=\"flex items-center justify-center w-12 h-12 rounded-lg bg-primary/10 text-primary\">\n                <Leaf className=\"w-6 h-6\" />\n              </div>\n              <div>\n                <p className=\"text-3xl font-bold\" data-testid=\"stat-carbon-saved\">{(user?.totalCarbonSaved || 0).toFixed(1)}</p>\n                <p className=\"text-xs text-muted-foreground\">kg CO</p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n\n        <Card>\n          <CardHeader className=\"pb-3\">\n            <CardTitle className=\"text-sm font-medium text-muted-foreground\">Water Saved</CardTitle>\n          </CardHeader>\n          <CardContent>\n            <div className=\"flex items-center gap-3\">\n              <div className=\"flex items-center justify-center w-12 h-12 rounded-lg bg-primary/10 text-primary\">\n                <Droplet className=\"w-6 h-6\" />\n              </div>\n              <div>\n                <p className=\"text-3xl font-bold\" data-testid=\"stat-water-saved\">{(user?.totalWaterSaved || 0).toFixed(0)}</p>\n                <p className=\"text-xs text-muted-foreground\">Liters</p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Points Trend */}\n      {achievementsData.length > 0 && (\n        <Card>\n          <CardHeader>\n            <CardTitle>Points Earned Over Time</CardTitle>\n            <CardDescription>Your monthly sustainability achievements</CardDescription>\n          </CardHeader>\n          <CardContent>\n            <ResponsiveContainer width=\"100%\" height={300}>\n              <LineChart data={achievementsData}>\n                <CartesianGrid strokeDasharray=\"3 3\" className=\"stroke-border\" />\n                <XAxis dataKey=\"month\" className=\"text-xs\" />\n                <YAxis className=\"text-xs\" />\n                <Tooltip />\n                <Legend />\n                <Line type=\"monotone\" dataKey=\"points\" stroke=\"hsl(var(--primary))\" strokeWidth={3} name=\"Points\" />\n              </LineChart>\n            </ResponsiveContainer>\n          </CardContent>\n        </Card>\n      )}\n\n      {/* Activity Summary */}\n      <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4\">\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"text-center\">\n              <Zap className=\"w-8 h-8 text-primary mx-auto mb-2\" />\n              <p className=\"text-2xl font-bold\">{energyRecords?.length || 0}</p>\n              <p className=\"text-sm text-muted-foreground\">Energy Reports</p>\n            </div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"text-center\">\n              <Droplet className=\"w-8 h-8 text-primary mx-auto mb-2\" />\n              <p className=\"text-2xl font-bold\">{waterRecords?.length || 0}</p>\n              <p className=\"text-sm text-muted-foreground\">Water Reports</p>\n            </div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"text-center\">\n              <Leaf className=\"w-8 h-8 text-primary mx-auto mb-2\" />\n              <p className=\"text-2xl font-bold\">{routes?.length || 0}</p>\n              <p className=\"text-sm text-muted-foreground\">Eco Routes</p>\n            </div>\n          </CardContent>\n        </Card>\n        <Card>\n          <CardContent className=\"p-6\">\n            <div className=\"text-center\">\n              <TrendingUp className=\"w-8 h-8 text-primary mx-auto mb-2\" />\n              <p className=\"text-2xl font-bold\">{posts?.length || 0}</p>\n              <p className=\"text-sm text-muted-foreground\">Community Posts</p>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      {/* Milestones */}\n      <Card>\n        <CardHeader>\n          <CardTitle>Milestones</CardTitle>\n          <CardDescription>Achievements unlocked on your sustainability journey</CardDescription>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-4\">\n            {milestones.map((milestone, index) => (\n              <div\n                key={index}\n                className={`flex items-start gap-4 p-4 rounded-lg border ${\n                  milestone.achieved ? \"bg-primary/5 border-primary/20\" : \"bg-muted/50 border-border\"\n                }`}\n              >\n                <div className={`flex items-center justify-center w-12 h-12 rounded-lg ${\n                  milestone.achieved ? \"bg-primary text-primary-foreground\" : \"bg-muted text-muted-foreground\"\n                }`}>\n                  <milestone.icon className=\"w-6 h-6\" />\n                </div>\n                <div className=\"flex-1\">\n                  <div className=\"flex items-center gap-2 mb-1\">\n                    <h3 className=\"font-semibold\">{milestone.title}</h3>\n                    {milestone.achieved && <Badge variant=\"default\">Achieved</Badge>}\n                  </div>\n                  <p className=\"text-sm text-muted-foreground mb-1\">{milestone.description}</p>\n                  {milestone.achieved && milestone.date && (\n                    <p className=\"text-xs text-muted-foreground flex items-center gap-1\">\n                      <Calendar className=\"w-3 h-3\" />\n                      {new Date(milestone.date).toLocaleDateString()}\n                    </p>\n                  )}\n                </div>\n              </div>\n            ))}\n          </div>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":10187},"client/src/components/ui/command.tsx":{"content":"import * as React from \"react\"\nimport { type DialogProps } from \"@radix-ui/react-dialog\"\nimport { Command as CommandPrimitive } from \"cmdk\"\nimport { Search } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Dialog, DialogContent } from \"@/components/ui/dialog\"\n\nconst Command = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full flex-col overflow-hidden rounded-md bg-popover text-popover-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nCommand.displayName = CommandPrimitive.displayName\n\nconst CommandDialog = ({ children, ...props }: DialogProps) => {\n  return (\n    <Dialog {...props}>\n      <DialogContent className=\"overflow-hidden p-0 shadow-lg\">\n        <Command className=\"[&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground [&_[cmdk-group]:not([hidden])_~[cmdk-group]]:pt-0 [&_[cmdk-group]]:px-2 [&_[cmdk-input-wrapper]_svg]:h-5 [&_[cmdk-input-wrapper]_svg]:w-5 [&_[cmdk-input]]:h-12 [&_[cmdk-item]]:px-2 [&_[cmdk-item]]:py-3 [&_[cmdk-item]_svg]:h-5 [&_[cmdk-item]_svg]:w-5\">\n          {children}\n        </Command>\n      </DialogContent>\n    </Dialog>\n  )\n}\n\nconst CommandInput = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Input>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Input>\n>(({ className, ...props }, ref) => (\n  <div className=\"flex items-center border-b px-3\" cmdk-input-wrapper=\"\">\n    <Search className=\"mr-2 h-4 w-4 shrink-0 opacity-50\" />\n    <CommandPrimitive.Input\n      ref={ref}\n      className={cn(\n        \"flex h-11 w-full rounded-md bg-transparent py-3 text-sm outline-none placeholder:text-muted-foreground disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    />\n  </div>\n))\n\nCommandInput.displayName = CommandPrimitive.Input.displayName\n\nconst CommandList = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.List\n    ref={ref}\n    className={cn(\"max-h-[300px] overflow-y-auto overflow-x-hidden\", className)}\n    {...props}\n  />\n))\n\nCommandList.displayName = CommandPrimitive.List.displayName\n\nconst CommandEmpty = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Empty>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Empty>\n>((props, ref) => (\n  <CommandPrimitive.Empty\n    ref={ref}\n    className=\"py-6 text-center text-sm\"\n    {...props}\n  />\n))\n\nCommandEmpty.displayName = CommandPrimitive.Empty.displayName\n\nconst CommandGroup = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Group>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Group>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Group\n    ref={ref}\n    className={cn(\n      \"overflow-hidden p-1 text-foreground [&_[cmdk-group-heading]]:px-2 [&_[cmdk-group-heading]]:py-1.5 [&_[cmdk-group-heading]]:text-xs [&_[cmdk-group-heading]]:font-medium [&_[cmdk-group-heading]]:text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandGroup.displayName = CommandPrimitive.Group.displayName\n\nconst CommandSeparator = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nCommandSeparator.displayName = CommandPrimitive.Separator.displayName\n\nconst CommandItem = React.forwardRef<\n  React.ElementRef<typeof CommandPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof CommandPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <CommandPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default gap-2 select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none data-[disabled=true]:pointer-events-none data-[selected='true']:bg-accent data-[selected=true]:text-accent-foreground data-[disabled=true]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      className\n    )}\n    {...props}\n  />\n))\n\nCommandItem.displayName = CommandPrimitive.Item.displayName\n\nconst CommandShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nCommandShortcut.displayName = \"CommandShortcut\"\n\nexport {\n  Command,\n  CommandDialog,\n  CommandInput,\n  CommandList,\n  CommandEmpty,\n  CommandGroup,\n  CommandItem,\n  CommandShortcut,\n  CommandSeparator,\n}\n","size_bytes":4885},"client/src/components/ui/accordion.tsx":{"content":"import * as React from \"react\"\nimport * as AccordionPrimitive from \"@radix-ui/react-accordion\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Accordion = AccordionPrimitive.Root\n\nconst AccordionItem = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Item>\n>(({ className, ...props }, ref) => (\n  <AccordionPrimitive.Item\n    ref={ref}\n    className={cn(\"border-b\", className)}\n    {...props}\n  />\n))\nAccordionItem.displayName = \"AccordionItem\"\n\nconst AccordionTrigger = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Header className=\"flex\">\n    <AccordionPrimitive.Trigger\n      ref={ref}\n      className={cn(\n        \"flex flex-1 items-center justify-between py-4 font-medium transition-all hover:underline [&[data-state=open]>svg]:rotate-180\",\n        className\n      )}\n      {...props}\n    >\n      {children}\n      <ChevronDown className=\"h-4 w-4 shrink-0 transition-transform duration-200\" />\n    </AccordionPrimitive.Trigger>\n  </AccordionPrimitive.Header>\n))\nAccordionTrigger.displayName = AccordionPrimitive.Trigger.displayName\n\nconst AccordionContent = React.forwardRef<\n  React.ElementRef<typeof AccordionPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AccordionPrimitive.Content>\n>(({ className, children, ...props }, ref) => (\n  <AccordionPrimitive.Content\n    ref={ref}\n    className=\"overflow-hidden text-sm transition-all data-[state=closed]:animate-accordion-up data-[state=open]:animate-accordion-down\"\n    {...props}\n  >\n    <div className={cn(\"pb-4 pt-0\", className)}>{children}</div>\n  </AccordionPrimitive.Content>\n))\n\nAccordionContent.displayName = AccordionPrimitive.Content.displayName\n\nexport { Accordion, AccordionItem, AccordionTrigger, AccordionContent }\n","size_bytes":1977},"client/src/hooks/useAuth.ts":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport type { User } from \"@shared/schema\";\n\nexport function useAuth() {\n  const { data: user, isLoading } = useQuery<User>({\n    queryKey: [\"/api/auth/user\"],\n    retry: false,\n  });\n\n  return {\n    user,\n    isLoading,\n    isAuthenticated: !!user,\n  };\n}\n","size_bytes":307},"client/src/lib/queryClient.ts":{"content":"import { QueryClient, QueryFunction } from \"@tanstack/react-query\";\n\nasync function throwIfResNotOk(res: Response) {\n  if (!res.ok) {\n    const text = (await res.text()) || res.statusText;\n    throw new Error(`${res.status}: ${text}`);\n  }\n}\n\nexport async function apiRequest(\n  method: string,\n  url: string,\n  data?: unknown | undefined,\n): Promise<Response> {\n  const res = await fetch(url, {\n    method,\n    headers: data ? { \"Content-Type\": \"application/json\" } : {},\n    body: data ? JSON.stringify(data) : undefined,\n    credentials: \"include\",\n  });\n\n  await throwIfResNotOk(res);\n  return res;\n}\n\ntype UnauthorizedBehavior = \"returnNull\" | \"throw\";\nexport const getQueryFn: <T>(options: {\n  on401: UnauthorizedBehavior;\n}) => QueryFunction<T> =\n  ({ on401: unauthorizedBehavior }) =>\n  async ({ queryKey }) => {\n    const res = await fetch(queryKey.join(\"/\") as string, {\n      credentials: \"include\",\n    });\n\n    if (unauthorizedBehavior === \"returnNull\" && res.status === 401) {\n      return null;\n    }\n\n    await throwIfResNotOk(res);\n    return await res.json();\n  };\n\nexport const queryClient = new QueryClient({\n  defaultOptions: {\n    queries: {\n      queryFn: getQueryFn({ on401: \"throw\" }),\n      refetchInterval: false,\n      refetchOnWindowFocus: false,\n      staleTime: Infinity,\n      retry: false,\n    },\n    mutations: {\n      retry: false,\n    },\n  },\n});\n","size_bytes":1383},"vite.config.ts":{"content":"import { defineConfig } from \"vite\";\nimport react from \"@vitejs/plugin-react\";\nimport path from \"path\";\nimport runtimeErrorOverlay from \"@replit/vite-plugin-runtime-error-modal\";\n\nexport default defineConfig({\n  plugins: [\n    react(),\n    runtimeErrorOverlay(),\n    ...(process.env.NODE_ENV !== \"production\" &&\n    process.env.REPL_ID !== undefined\n      ? [\n          await import(\"@replit/vite-plugin-cartographer\").then((m) =>\n            m.cartographer(),\n          ),\n          await import(\"@replit/vite-plugin-dev-banner\").then((m) =>\n            m.devBanner(),\n          ),\n        ]\n      : []),\n  ],\n  resolve: {\n    alias: {\n      \"@\": path.resolve(import.meta.dirname, \"client\", \"src\"),\n      \"@shared\": path.resolve(import.meta.dirname, \"shared\"),\n      \"@assets\": path.resolve(import.meta.dirname, \"attached_assets\"),\n    },\n  },\n  root: path.resolve(import.meta.dirname, \"client\"),\n  build: {\n    outDir: path.resolve(import.meta.dirname, \"dist/public\"),\n    emptyOutDir: true,\n  },\n  server: {\n    fs: {\n      strict: true,\n      deny: [\"**/.*\"],\n    },\n  },\n});\n","size_bytes":1080},"client/src/components/ui/hover-card.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as HoverCardPrimitive from \"@radix-ui/react-hover-card\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst HoverCard = HoverCardPrimitive.Root\n\nconst HoverCardTrigger = HoverCardPrimitive.Trigger\n\nconst HoverCardContent = React.forwardRef<\n  React.ElementRef<typeof HoverCardPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof HoverCardPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <HoverCardPrimitive.Content\n    ref={ref}\n    align={align}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 w-64 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-hover-card-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nHoverCardContent.displayName = HoverCardPrimitive.Content.displayName\n\nexport { HoverCard, HoverCardTrigger, HoverCardContent }\n","size_bytes":1251},"server/storage.ts":{"content":"// Referenced from javascript_log_in_with_replit and javascript_database blueprints\nimport {\n  users,\n  posts,\n  energyRecords,\n  waterRecords,\n  ecoRoutes,\n  scratchCards,\n  userScratchCards,\n  coupons,\n  userCoupons,\n  postLikes,\n  postComments,\n  userFollows,\n  type User,\n  type UpsertUser,\n  type InsertPost,\n  type Post,\n  type InsertEnergyRecord,\n  type EnergyRecord,\n  type InsertWaterRecord,\n  type WaterRecord,\n  type InsertEcoRoute,\n  type EcoRoute,\n  type ScratchCard,\n  type InsertScratchCard,\n  type UserScratchCard,\n  type InsertUserScratchCard,\n  type Coupon,\n  type InsertCoupon,\n  type UserCoupon,\n  type InsertUserCoupon,\n  type InsertPostLike,\n  type PostLike,\n  type InsertPostComment,\n  type PostComment,\n  type InsertUserFollow,\n  type UserFollow,\n} from \"@shared/schema\";\nimport { db } from \"./db\";\nimport { eq, desc, and, sql } from \"drizzle-orm\";\n\nexport interface IStorage {\n  // User operations (required for Replit Auth)\n  getUser(id: string): Promise<User | undefined>;\n  upsertUser(user: UpsertUser): Promise<User>;\n  updateUserPoints(userId: string, pointsDelta: number, carbonSavedDelta?: number, waterSavedDelta?: number): Promise<void>;\n  \n  // Posts operations\n  createPost(post: InsertPost): Promise<Post>;\n  getAllPosts(): Promise<any[]>;\n  \n  // Energy operations\n  createEnergyRecord(record: InsertEnergyRecord): Promise<EnergyRecord>;\n  getUserEnergyRecords(userId: string): Promise<EnergyRecord[]>;\n  \n  // Water operations\n  createWaterRecord(record: InsertWaterRecord): Promise<WaterRecord>;\n  getUserWaterRecords(userId: string): Promise<WaterRecord[]>;\n  \n  // Eco routes operations\n  createEcoRoute(route: InsertEcoRoute): Promise<EcoRoute>;\n  getUserEcoRoutes(userId: string): Promise<EcoRoute[]>;\n  \n  // Scratch cards operations\n  getAllScratchCards(): Promise<ScratchCard[]>;\n  createUserScratchCard(data: InsertUserScratchCard): Promise<UserScratchCard>;\n  getUserScratchCards(userId: string): Promise<any[]>;\n  updateScratchCard(id: string, prize: string): Promise<void>;\n  \n  // Coupons operations\n  getAllCoupons(): Promise<Coupon[]>;\n  createUserCoupon(data: InsertUserCoupon): Promise<UserCoupon>;\n  getUserCoupons(userId: string): Promise<any[]>;\n  \n  // Social features - Post likes\n  likePost(userId: string, postId: string): Promise<PostLike | null>;\n  unlikePost(userId: string, postId: string): Promise<void>;\n  getPostLikeCount(postId: string): Promise<number>;\n  hasUserLikedPost(userId: string, postId: string): Promise<boolean>;\n  \n  // Social features - Post comments\n  createComment(data: InsertPostComment): Promise<any>;\n  getPostComments(postId: string): Promise<any[]>;\n  \n  // Social features - User follows\n  followUser(followerId: string, followingId: string): Promise<UserFollow>;\n  unfollowUser(followerId: string, followingId: string): Promise<void>;\n  isFollowing(followerId: string, followingId: string): Promise<boolean>;\n  getFollowerCount(userId: string): Promise<number>;\n  getFollowingCount(userId: string): Promise<number>;\n  \n  // Leaderboard\n  getLeaderboard(): Promise<{\n    byPoints: User[];\n    byCarbonSaved: User[];\n    byWaterSaved: User[];\n  }>;\n}\n\nexport class DatabaseStorage implements IStorage {\n  // User operations\n  async getUser(id: string): Promise<User | undefined> {\n    const [user] = await db.select().from(users).where(eq(users.id, id));\n    return user;\n  }\n\n  async upsertUser(userData: UpsertUser): Promise<User> {\n    const [user] = await db\n      .insert(users)\n      .values(userData)\n      .onConflictDoUpdate({\n        target: users.id,\n        set: {\n          ...userData,\n          updatedAt: new Date(),\n        },\n      })\n      .returning();\n    return user;\n  }\n\n  async updateUserPoints(userId: string, pointsDelta: number, carbonSavedDelta: number = 0, waterSavedDelta: number = 0): Promise<void> {\n    const user = await this.getUser(userId);\n    if (!user) return;\n    \n    await db\n      .update(users)\n      .set({\n        points: user.points + pointsDelta,\n        totalCarbonSaved: user.totalCarbonSaved + carbonSavedDelta,\n        totalWaterSaved: user.totalWaterSaved + waterSavedDelta,\n        updatedAt: new Date(),\n      })\n      .where(eq(users.id, userId));\n  }\n\n  // Posts operations\n  async createPost(postData: InsertPost): Promise<Post> {\n    const [post] = await db.insert(posts).values(postData).returning();\n    return post;\n  }\n\n  async getAllPosts(): Promise<any[]> {\n    const results = await db\n      .select({\n        id: posts.id,\n        userId: posts.userId,\n        content: posts.content,\n        achievementType: posts.achievementType,\n        carbonSaved: posts.carbonSaved,\n        waterSaved: posts.waterSaved,\n        pointsEarned: posts.pointsEarned,\n        likes: posts.likes,\n        createdAt: posts.createdAt,\n        user: {\n          id: users.id,\n          email: users.email,\n          firstName: users.firstName,\n          lastName: users.lastName,\n          profileImageUrl: users.profileImageUrl,\n        },\n      })\n      .from(posts)\n      .leftJoin(users, eq(posts.userId, users.id))\n      .orderBy(desc(posts.createdAt));\n    \n    return results.map(r => ({\n      ...r,\n      user: r.user,\n    }));\n  }\n\n  // Energy operations\n  async createEnergyRecord(recordData: InsertEnergyRecord): Promise<EnergyRecord> {\n    const [record] = await db.insert(energyRecords).values(recordData).returning();\n    return record;\n  }\n\n  async getUserEnergyRecords(userId: string): Promise<EnergyRecord[]> {\n    return await db\n      .select()\n      .from(energyRecords)\n      .where(eq(energyRecords.userId, userId))\n      .orderBy(desc(energyRecords.createdAt));\n  }\n\n  // Water operations\n  async createWaterRecord(recordData: InsertWaterRecord): Promise<WaterRecord> {\n    const [record] = await db.insert(waterRecords).values(recordData).returning();\n    return record;\n  }\n\n  async getUserWaterRecords(userId: string): Promise<WaterRecord[]> {\n    return await db\n      .select()\n      .from(waterRecords)\n      .where(eq(waterRecords.userId, userId))\n      .orderBy(desc(waterRecords.createdAt));\n  }\n\n  // Eco routes operations\n  async createEcoRoute(routeData: InsertEcoRoute): Promise<EcoRoute> {\n    const [route] = await db.insert(ecoRoutes).values(routeData).returning();\n    return route;\n  }\n\n  async getUserEcoRoutes(userId: string): Promise<EcoRoute[]> {\n    return await db\n      .select()\n      .from(ecoRoutes)\n      .where(eq(ecoRoutes.userId, userId))\n      .orderBy(desc(ecoRoutes.createdAt));\n  }\n\n  // Scratch cards operations\n  async getAllScratchCards(): Promise<ScratchCard[]> {\n    return await db\n      .select()\n      .from(scratchCards)\n      .where(eq(scratchCards.isActive, true))\n      .orderBy(scratchCards.pointsCost);\n  }\n\n  async createUserScratchCard(data: InsertUserScratchCard): Promise<UserScratchCard> {\n    const [userCard] = await db.insert(userScratchCards).values(data).returning();\n    return userCard;\n  }\n\n  async getUserScratchCards(userId: string): Promise<any[]> {\n    const results = await db\n      .select({\n        id: userScratchCards.id,\n        userId: userScratchCards.userId,\n        scratchCardId: userScratchCards.scratchCardId,\n        isScratched: userScratchCards.isScratched,\n        prize: userScratchCards.prize,\n        redeemedAt: userScratchCards.redeemedAt,\n        scratchCard: {\n          id: scratchCards.id,\n          name: scratchCards.name,\n          description: scratchCards.description,\n          category: scratchCards.category,\n          pointsCost: scratchCards.pointsCost,\n        },\n      })\n      .from(userScratchCards)\n      .leftJoin(scratchCards, eq(userScratchCards.scratchCardId, scratchCards.id))\n      .where(eq(userScratchCards.userId, userId))\n      .orderBy(desc(userScratchCards.redeemedAt));\n    \n    return results.map(r => ({\n      ...r,\n      scratchCard: r.scratchCard,\n    }));\n  }\n\n  async updateScratchCard(id: string, prize: string): Promise<void> {\n    await db\n      .update(userScratchCards)\n      .set({ isScratched: true, prize })\n      .where(eq(userScratchCards.id, id));\n  }\n\n  // Coupons operations\n  async getAllCoupons(): Promise<Coupon[]> {\n    return await db\n      .select()\n      .from(coupons)\n      .where(eq(coupons.isActive, true))\n      .orderBy(coupons.pointsCost);\n  }\n\n  async createUserCoupon(data: InsertUserCoupon): Promise<UserCoupon> {\n    const [userCoupon] = await db.insert(userCoupons).values(data).returning();\n    return userCoupon;\n  }\n\n  async getUserCoupons(userId: string): Promise<any[]> {\n    const results = await db\n      .select({\n        id: userCoupons.id,\n        userId: userCoupons.userId,\n        couponId: userCoupons.couponId,\n        isUsed: userCoupons.isUsed,\n        redeemedAt: userCoupons.redeemedAt,\n        coupon: {\n          id: coupons.id,\n          name: coupons.name,\n          description: coupons.description,\n          discountPercentage: coupons.discountPercentage,\n          brandName: coupons.brandName,\n          category: coupons.category,\n          pointsCost: coupons.pointsCost,\n          validUntil: coupons.validUntil,\n        },\n      })\n      .from(userCoupons)\n      .leftJoin(coupons, eq(userCoupons.couponId, coupons.id))\n      .where(eq(userCoupons.userId, userId))\n      .orderBy(desc(userCoupons.redeemedAt));\n    \n    return results.map(r => ({\n      ...r,\n      coupon: r.coupon,\n    }));\n  }\n\n  // Social features - Post likes\n  async likePost(userId: string, postId: string): Promise<PostLike | null> {\n    try {\n      const [like] = await db.insert(postLikes).values({ userId, postId }).returning();\n      await db.update(posts).set({ likes: sql`${posts.likes} + 1` }).where(eq(posts.id, postId));\n      return like;\n    } catch (error: any) {\n      if (error.code === '23505') {\n        const [existing] = await db.select().from(postLikes).where(\n          and(eq(postLikes.userId, userId), eq(postLikes.postId, postId))\n        );\n        return existing || null;\n      }\n      throw error;\n    }\n  }\n\n  async unlikePost(userId: string, postId: string): Promise<void> {\n    const result = await db.delete(postLikes).where(and(eq(postLikes.userId, userId), eq(postLikes.postId, postId))).returning();\n    if (result.length > 0) {\n      await db.update(posts).set({ likes: sql`GREATEST(${posts.likes} - 1, 0)` }).where(eq(posts.id, postId));\n    }\n  }\n\n  async getPostLikeCount(postId: string): Promise<number> {\n    const result = await db.select({ count: sql<number>`count(*)` }).from(postLikes).where(eq(postLikes.postId, postId));\n    return Number(result[0]?.count ?? 0);\n  }\n\n  async hasUserLikedPost(userId: string, postId: string): Promise<boolean> {\n    const [like] = await db\n      .select()\n      .from(postLikes)\n      .where(and(eq(postLikes.userId, userId), eq(postLikes.postId, postId)));\n    return !!like;\n  }\n\n  // Social features - Post comments\n  async createComment(data: InsertPostComment): Promise<any> {\n    const [comment] = await db.insert(postComments).values(data).returning();\n    const [user] = await db.select().from(users).where(eq(users.id, data.userId));\n    return { ...comment, user };\n  }\n\n  async getPostComments(postId: string): Promise<any[]> {\n    const results = await db\n      .select({\n        id: postComments.id,\n        userId: postComments.userId,\n        postId: postComments.postId,\n        content: postComments.content,\n        createdAt: postComments.createdAt,\n        user: {\n          id: users.id,\n          firstName: users.firstName,\n          lastName: users.lastName,\n          profileImageUrl: users.profileImageUrl,\n        },\n      })\n      .from(postComments)\n      .leftJoin(users, eq(postComments.userId, users.id))\n      .where(eq(postComments.postId, postId))\n      .orderBy(desc(postComments.createdAt));\n    \n    return results.map(r => ({ ...r, user: r.user }));\n  }\n\n  // Social features - User follows\n  async followUser(followerId: string, followingId: string): Promise<UserFollow> {\n    const [follow] = await db.insert(userFollows).values({ followerId, followingId }).returning();\n    return follow;\n  }\n\n  async unfollowUser(followerId: string, followingId: string): Promise<void> {\n    await db.delete(userFollows).where(\n      and(eq(userFollows.followerId, followerId), eq(userFollows.followingId, followingId))\n    );\n  }\n\n  async isFollowing(followerId: string, followingId: string): Promise<boolean> {\n    const [follow] = await db\n      .select()\n      .from(userFollows)\n      .where(and(eq(userFollows.followerId, followerId), eq(userFollows.followingId, followingId)));\n    return !!follow;\n  }\n\n  async getFollowerCount(userId: string): Promise<number> {\n    const result = await db.select({ count: sql<number>`count(*)` }).from(userFollows).where(eq(userFollows.followingId, userId));\n    return Number(result[0]?.count ?? 0);\n  }\n\n  async getFollowingCount(userId: string): Promise<number> {\n    const result = await db.select({ count: sql<number>`count(*)` }).from(userFollows).where(eq(userFollows.followerId, userId));\n    return Number(result[0]?.count ?? 0);\n  }\n\n  // Leaderboard\n  async getLeaderboard(): Promise<{\n    byPoints: User[];\n    byCarbonSaved: User[];\n    byWaterSaved: User[];\n  }> {\n    const safeFields = {\n      id: users.id,\n      email: users.email,\n      firstName: users.firstName,\n      lastName: users.lastName,\n      profileImageUrl: users.profileImageUrl,\n      points: users.points,\n      totalCarbonSaved: users.totalCarbonSaved,\n      totalWaterSaved: users.totalWaterSaved,\n    };\n\n    const [byPoints, byCarbonSaved, byWaterSaved] = await Promise.all([\n      db.select(safeFields).from(users).orderBy(desc(users.points)).limit(10),\n      db.select(safeFields).from(users).orderBy(desc(users.totalCarbonSaved)).limit(10),\n      db.select(safeFields).from(users).orderBy(desc(users.totalWaterSaved)).limit(10),\n    ]);\n\n    return { byPoints, byCarbonSaved, byWaterSaved };\n  }\n}\n\nexport const storage = new DatabaseStorage();\n","size_bytes":13915},"client/src/components/ui/collapsible.tsx":{"content":"\"use client\"\n\nimport * as CollapsiblePrimitive from \"@radix-ui/react-collapsible\"\n\nconst Collapsible = CollapsiblePrimitive.Root\n\nconst CollapsibleTrigger = CollapsiblePrimitive.CollapsibleTrigger\n\nconst CollapsibleContent = CollapsiblePrimitive.CollapsibleContent\n\nexport { Collapsible, CollapsibleTrigger, CollapsibleContent }\n","size_bytes":329},"client/src/pages/Energy.tsx":{"content":"import { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Zap, TrendingDown, Lightbulb, AlertCircle } from \"lucide-react\";\nimport type { EnergyRecord } from \"@shared/schema\";\nimport { insertEnergyRecordSchema } from \"@shared/schema\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { isUnauthorizedError } from \"@/lib/authUtils\";\nimport { LineChart, Line, XAxis, YAxis, CartesianGrid, Tooltip, ResponsiveContainer, Legend } from \"recharts\";\n\nconst formSchema = z.object({\n  month: z.string().regex(/^\\d{4}-\\d{2}$/, \"Invalid month format\"),\n  billAmount: z.coerce.number().positive(\"Bill amount must be positive\"),\n  consumption: z.coerce.number().positive(\"Consumption must be positive\"),\n});\n\nexport default function Energy() {\n  const { toast } = useToast();\n  \n  const form = useForm<z.infer<typeof formSchema>>({\n    resolver: zodResolver(formSchema),\n    defaultValues: {\n      month: new Date().toISOString().slice(0, 7),\n      billAmount: \"\" as any,\n      consumption: \"\" as any,\n    },\n  });\n\n  const { data: records, isLoading } = useQuery<EnergyRecord[]>({\n    queryKey: [\"/api/energy\"],\n  });\n\n  const analyzeMutation = useMutation({\n    mutationFn: async (values: z.infer<typeof formSchema>) => {\n      return await apiRequest(\"POST\", \"/api/energy/analyze\", values);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/energy\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/auth/user\"] });\n      form.reset({\n        month: new Date().toISOString().slice(0, 7),\n        billAmount: \"\" as any,\n        consumption: \"\" as any,\n      });\n      toast({\n        title: \"Analysis Complete!\",\n        description: \"Your energy data has been analyzed and points have been awarded.\",\n      });\n    },\n    onError: (error: Error) => {\n      if (isUnauthorizedError(error)) {\n        toast({\n          title: \"Unauthorized\",\n          description: \"You are logged out. Logging in again...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: \"Error\",\n        description: \"Failed to analyze energy data. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const chartData = records?.slice(-6).map(r => ({\n    month: r.month,\n    consumption: r.consumption,\n    wastage: r.predictedWastage || 0,\n  })) || [];\n\n  const latestRecord = records?.[0];\n\n  return (\n    <div className=\"max-w-7xl mx-auto p-4 sm:p-6 lg:p-8 space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-display font-bold mb-2\">Energy Predictor</h1>\n        <p className=\"text-muted-foreground\">AI-powered analysis of your electricity consumption patterns</p>\n      </div>\n\n      {/* Input Form */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Zap className=\"w-5 h-5\" />\n            Submit Energy Data\n          </CardTitle>\n          <CardDescription>Enter your monthly electricity bill details for AI analysis</CardDescription>\n        </CardHeader>\n        <CardContent>\n          <Form {...form}>\n            <form onSubmit={form.handleSubmit((values) => analyzeMutation.mutate(values))} className=\"space-y-4\">\n              <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n                <FormField\n                  control={form.control}\n                  name=\"month\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Month</FormLabel>\n                      <FormControl>\n                        <Input type=\"month\" {...field} data-testid=\"input-energy-month\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                <FormField\n                  control={form.control}\n                  name=\"billAmount\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Bill Amount ($)</FormLabel>\n                      <FormControl>\n                        <Input\n                          type=\"number\"\n                          step=\"0.01\"\n                          placeholder=\"150.00\"\n                          {...field}\n                          value={field.value || ''}\n                          onChange={(e) => field.onChange(e.target.value)}\n                          data-testid=\"input-energy-bill\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                <FormField\n                  control={form.control}\n                  name=\"consumption\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Consumption (kWh)</FormLabel>\n                      <FormControl>\n                        <Input\n                          type=\"number\"\n                          step=\"0.1\"\n                          placeholder=\"850\"\n                          {...field}\n                          value={field.value || ''}\n                          onChange={(e) => field.onChange(e.target.value)}\n                          data-testid=\"input-energy-consumption\"\n                        />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n              <Button\n                type=\"submit\"\n                disabled={analyzeMutation.isPending}\n                className=\"w-full md:w-auto\"\n                data-testid=\"button-analyze-energy\"\n              >\n                {analyzeMutation.isPending ? \"Analyzing...\" : \"Analyze Usage\"}\n              </Button>\n            </form>\n          </Form>\n        </CardContent>\n      </Card>\n\n      {/* Latest Analysis */}\n      {latestRecord && (\n        <div className=\"grid grid-cols-1 md:grid-cols-2 gap-6\">\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"text-lg\">Wastage Analysis</CardTitle>\n            </CardHeader>\n            <CardContent className=\"space-y-4\">\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-sm text-muted-foreground\">Predicted Wastage</span>\n                <div className=\"flex items-center gap-2\">\n                  <TrendingDown className=\"w-4 h-4 text-destructive\" />\n                  <span className=\"text-2xl font-bold\">{latestRecord.predictedWastage?.toFixed(1) || 0} kWh</span>\n                </div>\n              </div>\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-sm text-muted-foreground\">Wastage Percentage</span>\n                <span className=\"text-2xl font-bold text-destructive\">\n                  {latestRecord.wastagePercentage?.toFixed(1) || 0}%\n                </span>\n              </div>\n              <div className=\"flex items-center justify-between\">\n                <span className=\"text-sm text-muted-foreground\">Points Earned</span>\n                <span className=\"text-2xl font-bold text-primary\">+{latestRecord.pointsEarned}</span>\n              </div>\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader>\n              <CardTitle className=\"text-lg flex items-center gap-2\">\n                <Lightbulb className=\"w-5 h-5\" />\n                AI Insights\n              </CardTitle>\n            </CardHeader>\n            <CardContent>\n              {latestRecord.aiInsights ? (\n                <div className=\"prose prose-sm max-w-none\">\n                  <p className=\"text-sm\">{latestRecord.aiInsights}</p>\n                </div>\n              ) : (\n                <p className=\"text-sm text-muted-foreground\">Analyzing your energy patterns...</p>\n              )}\n            </CardContent>\n          </Card>\n        </div>\n      )}\n\n      {/* Trend Chart */}\n      {isLoading ? (\n        <Card>\n          <CardContent className=\"p-6\">\n            <Skeleton className=\"h-[300px] w-full\" />\n          </CardContent>\n        </Card>\n      ) : records && records.length > 0 ? (\n        <Card>\n          <CardHeader>\n            <CardTitle>Consumption Trends</CardTitle>\n            <CardDescription>Your energy usage over the last 6 months</CardDescription>\n          </CardHeader>\n          <CardContent>\n            <ResponsiveContainer width=\"100%\" height={300}>\n              <LineChart data={chartData}>\n                <CartesianGrid strokeDasharray=\"3 3\" className=\"stroke-border\" />\n                <XAxis dataKey=\"month\" className=\"text-xs\" />\n                <YAxis className=\"text-xs\" />\n                <Tooltip />\n                <Legend />\n                <Line type=\"monotone\" dataKey=\"consumption\" stroke=\"hsl(var(--chart-1))\" strokeWidth={2} name=\"Consumption (kWh)\" />\n                <Line type=\"monotone\" dataKey=\"wastage\" stroke=\"hsl(var(--destructive))\" strokeWidth={2} name=\"Wastage (kWh)\" />\n              </LineChart>\n            </ResponsiveContainer>\n          </CardContent>\n        </Card>\n      ) : (\n        <Card>\n          <CardContent className=\"py-12 text-center\">\n            <AlertCircle className=\"w-12 h-12 text-muted-foreground mx-auto mb-4\" />\n            <p className=\"text-muted-foreground\">No energy data yet. Submit your first bill to get started!</p>\n          </CardContent>\n        </Card>\n      )}\n    </div>\n  );\n}\n","size_bytes":10071},"client/src/components/ui/popover.tsx":{"content":"import * as React from \"react\"\nimport * as PopoverPrimitive from \"@radix-ui/react-popover\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Popover = PopoverPrimitive.Root\n\nconst PopoverTrigger = PopoverPrimitive.Trigger\n\nconst PopoverContent = React.forwardRef<\n  React.ElementRef<typeof PopoverPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof PopoverPrimitive.Content>\n>(({ className, align = \"center\", sideOffset = 4, ...props }, ref) => (\n  <PopoverPrimitive.Portal>\n    <PopoverPrimitive.Content\n      ref={ref}\n      align={align}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 w-72 rounded-md border bg-popover p-4 text-popover-foreground shadow-md outline-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-popover-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </PopoverPrimitive.Portal>\n))\nPopoverContent.displayName = PopoverPrimitive.Content.displayName\n\nexport { Popover, PopoverTrigger, PopoverContent }\n","size_bytes":1280},"client/src/components/ui/scroll-area.tsx":{"content":"import * as React from \"react\"\nimport * as ScrollAreaPrimitive from \"@radix-ui/react-scroll-area\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ScrollArea = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <ScrollAreaPrimitive.Root\n    ref={ref}\n    className={cn(\"relative overflow-hidden\", className)}\n    {...props}\n  >\n    <ScrollAreaPrimitive.Viewport className=\"h-full w-full rounded-[inherit]\">\n      {children}\n    </ScrollAreaPrimitive.Viewport>\n    <ScrollBar />\n    <ScrollAreaPrimitive.Corner />\n  </ScrollAreaPrimitive.Root>\n))\nScrollArea.displayName = ScrollAreaPrimitive.Root.displayName\n\nconst ScrollBar = React.forwardRef<\n  React.ElementRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>,\n  React.ComponentPropsWithoutRef<typeof ScrollAreaPrimitive.ScrollAreaScrollbar>\n>(({ className, orientation = \"vertical\", ...props }, ref) => (\n  <ScrollAreaPrimitive.ScrollAreaScrollbar\n    ref={ref}\n    orientation={orientation}\n    className={cn(\n      \"flex touch-none select-none transition-colors\",\n      orientation === \"vertical\" &&\n        \"h-full w-2.5 border-l border-l-transparent p-[1px]\",\n      orientation === \"horizontal\" &&\n        \"h-2.5 flex-col border-t border-t-transparent p-[1px]\",\n      className\n    )}\n    {...props}\n  >\n    <ScrollAreaPrimitive.ScrollAreaThumb className=\"relative flex-1 rounded-full bg-border\" />\n  </ScrollAreaPrimitive.ScrollAreaScrollbar>\n))\nScrollBar.displayName = ScrollAreaPrimitive.ScrollAreaScrollbar.displayName\n\nexport { ScrollArea, ScrollBar }\n","size_bytes":1642},"client/src/components/ui/tooltip.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as TooltipPrimitive from \"@radix-ui/react-tooltip\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst TooltipProvider = TooltipPrimitive.Provider\n\nconst Tooltip = TooltipPrimitive.Root\n\nconst TooltipTrigger = TooltipPrimitive.Trigger\n\nconst TooltipContent = React.forwardRef<\n  React.ElementRef<typeof TooltipPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TooltipPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <TooltipPrimitive.Content\n    ref={ref}\n    sideOffset={sideOffset}\n    className={cn(\n      \"z-50 overflow-hidden rounded-md border bg-popover px-3 py-1.5 text-sm text-popover-foreground shadow-md animate-in fade-in-0 zoom-in-95 data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=closed]:zoom-out-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-tooltip-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nTooltipContent.displayName = TooltipPrimitive.Content.displayName\n\nexport { Tooltip, TooltipTrigger, TooltipContent, TooltipProvider }\n","size_bytes":1209},"client/src/components/ui/button.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst buttonVariants = cva(\n  \"inline-flex items-center justify-center gap-2 whitespace-nowrap rounded-md text-sm font-medium focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring disabled:pointer-events-none disabled:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\" +\n  \" hover-elevate active-elevate-2\",\n  {\n    variants: {\n      variant: {\n        default:\n          \"bg-primary text-primary-foreground border border-primary-border\",\n        destructive:\n          \"bg-destructive text-destructive-foreground border border-destructive-border\",\n        outline:\n          // Shows the background color of whatever card / sidebar / accent background it is inside of.\n          // Inherits the current text color.\n          \" border [border-color:var(--button-outline)]  shadow-xs active:shadow-none \",\n        secondary: \"border bg-secondary text-secondary-foreground border border-secondary-border \",\n        // Add a transparent border so that when someone toggles a border on later, it doesn't shift layout/size.\n        ghost: \"border border-transparent\",\n      },\n      // Heights are set as \"min\" heights, because sometimes Ai will place large amount of content\n      // inside buttons. With a min-height they will look appropriate with small amounts of content,\n      // but will expand to fit large amounts of content.\n      size: {\n        default: \"min-h-9 px-4 py-2\",\n        sm: \"min-h-8 rounded-md px-3 text-xs\",\n        lg: \"min-h-10 rounded-md px-8\",\n        icon: \"h-9 w-9\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n      size: \"default\",\n    },\n  },\n)\n\nexport interface ButtonProps\n  extends React.ButtonHTMLAttributes<HTMLButtonElement>,\n    VariantProps<typeof buttonVariants> {\n  asChild?: boolean\n}\n\nconst Button = React.forwardRef<HTMLButtonElement, ButtonProps>(\n  ({ className, variant, size, asChild = false, ...props }, ref) => {\n    const Comp = asChild ? Slot : \"button\"\n    return (\n      <Comp\n        className={cn(buttonVariants({ variant, size, className }))}\n        ref={ref}\n        {...props}\n      />\n    )\n  },\n)\nButton.displayName = \"Button\"\n\nexport { Button, buttonVariants }\n","size_bytes":2359},"client/src/components/ui/resizable.tsx":{"content":"\"use client\"\n\nimport { GripVertical } from \"lucide-react\"\nimport * as ResizablePrimitive from \"react-resizable-panels\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ResizablePanelGroup = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelGroup>) => (\n  <ResizablePrimitive.PanelGroup\n    className={cn(\n      \"flex h-full w-full data-[panel-group-direction=vertical]:flex-col\",\n      className\n    )}\n    {...props}\n  />\n)\n\nconst ResizablePanel = ResizablePrimitive.Panel\n\nconst ResizableHandle = ({\n  withHandle,\n  className,\n  ...props\n}: React.ComponentProps<typeof ResizablePrimitive.PanelResizeHandle> & {\n  withHandle?: boolean\n}) => (\n  <ResizablePrimitive.PanelResizeHandle\n    className={cn(\n      \"relative flex w-px items-center justify-center bg-border after:absolute after:inset-y-0 after:left-1/2 after:w-1 after:-translate-x-1/2 focus-visible:outline-none focus-visible:ring-1 focus-visible:ring-ring focus-visible:ring-offset-1 data-[panel-group-direction=vertical]:h-px data-[panel-group-direction=vertical]:w-full data-[panel-group-direction=vertical]:after:left-0 data-[panel-group-direction=vertical]:after:h-1 data-[panel-group-direction=vertical]:after:w-full data-[panel-group-direction=vertical]:after:-translate-y-1/2 data-[panel-group-direction=vertical]:after:translate-x-0 [&[data-panel-group-direction=vertical]>div]:rotate-90\",\n      className\n    )}\n    {...props}\n  >\n    {withHandle && (\n      <div className=\"z-10 flex h-4 w-3 items-center justify-center rounded-sm border bg-border\">\n        <GripVertical className=\"h-2.5 w-2.5\" />\n      </div>\n    )}\n  </ResizablePrimitive.PanelResizeHandle>\n)\n\nexport { ResizablePanelGroup, ResizablePanel, ResizableHandle }\n","size_bytes":1723},"client/src/components/ui/input.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Input = React.forwardRef<HTMLInputElement, React.ComponentProps<\"input\">>(\n  ({ className, type, ...props }, ref) => {\n    // h-9 to match icon buttons and default buttons.\n    return (\n      <input\n        type={type}\n        className={cn(\n          \"flex h-9 w-full rounded-md border border-input bg-background px-3 py-2 text-base ring-offset-background file:border-0 file:bg-transparent file:text-sm file:font-medium file:text-foreground placeholder:text-muted-foreground focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 md:text-sm\",\n          className\n        )}\n        ref={ref}\n        {...props}\n      />\n    )\n  }\n)\nInput.displayName = \"Input\"\n\nexport { Input }\n","size_bytes":844},"client/src/components/ui/navigation-menu.tsx":{"content":"import * as React from \"react\"\nimport * as NavigationMenuPrimitive from \"@radix-ui/react-navigation-menu\"\nimport { cva } from \"class-variance-authority\"\nimport { ChevronDown } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst NavigationMenu = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Root>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative z-10 flex max-w-max flex-1 items-center justify-center\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <NavigationMenuViewport />\n  </NavigationMenuPrimitive.Root>\n))\nNavigationMenu.displayName = NavigationMenuPrimitive.Root.displayName\n\nconst NavigationMenuList = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.List\n    ref={ref}\n    className={cn(\n      \"group flex flex-1 list-none items-center justify-center space-x-1\",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuList.displayName = NavigationMenuPrimitive.List.displayName\n\nconst NavigationMenuItem = NavigationMenuPrimitive.Item\n\nconst navigationMenuTriggerStyle = cva(\n  \"group inline-flex h-10 w-max items-center justify-center rounded-md bg-background px-4 py-2 text-sm font-medium transition-colors hover:bg-accent hover:text-accent-foreground focus:bg-accent focus:text-accent-foreground focus:outline-none disabled:pointer-events-none disabled:opacity-50 data-[state=open]:text-accent-foreground data-[state=open]:bg-accent/50 data-[state=open]:hover:bg-accent data-[state=open]:focus:bg-accent\"\n)\n\nconst NavigationMenuTrigger = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <NavigationMenuPrimitive.Trigger\n    ref={ref}\n    className={cn(navigationMenuTriggerStyle(), \"group\", className)}\n    {...props}\n  >\n    {children}{\" \"}\n    <ChevronDown\n      className=\"relative top-[1px] ml-1 h-3 w-3 transition duration-200 group-data-[state=open]:rotate-180\"\n      aria-hidden=\"true\"\n    />\n  </NavigationMenuPrimitive.Trigger>\n))\nNavigationMenuTrigger.displayName = NavigationMenuPrimitive.Trigger.displayName\n\nconst NavigationMenuContent = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"left-0 top-0 w-full data-[motion^=from-]:animate-in data-[motion^=to-]:animate-out data-[motion^=from-]:fade-in data-[motion^=to-]:fade-out data-[motion=from-end]:slide-in-from-right-52 data-[motion=from-start]:slide-in-from-left-52 data-[motion=to-end]:slide-out-to-right-52 data-[motion=to-start]:slide-out-to-left-52 md:absolute md:w-auto \",\n      className\n    )}\n    {...props}\n  />\n))\nNavigationMenuContent.displayName = NavigationMenuPrimitive.Content.displayName\n\nconst NavigationMenuLink = NavigationMenuPrimitive.Link\n\nconst NavigationMenuViewport = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Viewport>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Viewport>\n>(({ className, ...props }, ref) => (\n  <div className={cn(\"absolute left-0 top-full flex justify-center\")}>\n    <NavigationMenuPrimitive.Viewport\n      className={cn(\n        \"origin-top-center relative mt-1.5 h-[var(--radix-navigation-menu-viewport-height)] w-full overflow-hidden rounded-md border bg-popover text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-90 md:w-[var(--radix-navigation-menu-viewport-width)]\",\n        className\n      )}\n      ref={ref}\n      {...props}\n    />\n  </div>\n))\nNavigationMenuViewport.displayName =\n  NavigationMenuPrimitive.Viewport.displayName\n\nconst NavigationMenuIndicator = React.forwardRef<\n  React.ElementRef<typeof NavigationMenuPrimitive.Indicator>,\n  React.ComponentPropsWithoutRef<typeof NavigationMenuPrimitive.Indicator>\n>(({ className, ...props }, ref) => (\n  <NavigationMenuPrimitive.Indicator\n    ref={ref}\n    className={cn(\n      \"top-full z-[1] flex h-1.5 items-end justify-center overflow-hidden data-[state=visible]:animate-in data-[state=hidden]:animate-out data-[state=hidden]:fade-out data-[state=visible]:fade-in\",\n      className\n    )}\n    {...props}\n  >\n    <div className=\"relative top-[60%] h-2 w-2 rotate-45 rounded-tl-sm bg-border shadow-md\" />\n  </NavigationMenuPrimitive.Indicator>\n))\nNavigationMenuIndicator.displayName =\n  NavigationMenuPrimitive.Indicator.displayName\n\nexport {\n  navigationMenuTriggerStyle,\n  NavigationMenu,\n  NavigationMenuList,\n  NavigationMenuItem,\n  NavigationMenuContent,\n  NavigationMenuTrigger,\n  NavigationMenuLink,\n  NavigationMenuIndicator,\n  NavigationMenuViewport,\n}\n","size_bytes":5128},"client/src/components/ui/slider.tsx":{"content":"import * as React from \"react\"\nimport * as SliderPrimitive from \"@radix-ui/react-slider\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Slider = React.forwardRef<\n  React.ElementRef<typeof SliderPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SliderPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <SliderPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative flex w-full touch-none select-none items-center\",\n      className\n    )}\n    {...props}\n  >\n    <SliderPrimitive.Track className=\"relative h-2 w-full grow overflow-hidden rounded-full bg-secondary\">\n      <SliderPrimitive.Range className=\"absolute h-full bg-primary\" />\n    </SliderPrimitive.Track>\n    <SliderPrimitive.Thumb className=\"block h-5 w-5 rounded-full border-2 border-primary bg-background ring-offset-background transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50\" />\n  </SliderPrimitive.Root>\n))\nSlider.displayName = SliderPrimitive.Root.displayName\n\nexport { Slider }\n","size_bytes":1077},"client/src/components/ui/context-menu.tsx":{"content":"import * as React from \"react\"\nimport * as ContextMenuPrimitive from \"@radix-ui/react-context-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ContextMenu = ContextMenuPrimitive.Root\n\nconst ContextMenuTrigger = ContextMenuPrimitive.Trigger\n\nconst ContextMenuGroup = ContextMenuPrimitive.Group\n\nconst ContextMenuPortal = ContextMenuPrimitive.Portal\n\nconst ContextMenuSub = ContextMenuPrimitive.Sub\n\nconst ContextMenuRadioGroup = ContextMenuPrimitive.RadioGroup\n\nconst ContextMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <ContextMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </ContextMenuPrimitive.SubTrigger>\n))\nContextMenuSubTrigger.displayName = ContextMenuPrimitive.SubTrigger.displayName\n\nconst ContextMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuSubContent.displayName = ContextMenuPrimitive.SubContent.displayName\n\nconst ContextMenuContent = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Portal>\n    <ContextMenuPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"z-50 max-h-[--radix-context-menu-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md animate-in fade-in-80 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-context-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </ContextMenuPrimitive.Portal>\n))\nContextMenuContent.displayName = ContextMenuPrimitive.Content.displayName\n\nconst ContextMenuItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuItem.displayName = ContextMenuPrimitive.Item.displayName\n\nconst ContextMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <ContextMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.CheckboxItem>\n))\nContextMenuCheckboxItem.displayName =\n  ContextMenuPrimitive.CheckboxItem.displayName\n\nconst ContextMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <ContextMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <ContextMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </ContextMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </ContextMenuPrimitive.RadioItem>\n))\nContextMenuRadioItem.displayName = ContextMenuPrimitive.RadioItem.displayName\n\nconst ContextMenuLabel = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <ContextMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold text-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nContextMenuLabel.displayName = ContextMenuPrimitive.Label.displayName\n\nconst ContextMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof ContextMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof ContextMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <ContextMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-border\", className)}\n    {...props}\n  />\n))\nContextMenuSeparator.displayName = ContextMenuPrimitive.Separator.displayName\n\nconst ContextMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nContextMenuShortcut.displayName = \"ContextMenuShortcut\"\n\nexport {\n  ContextMenu,\n  ContextMenuTrigger,\n  ContextMenuContent,\n  ContextMenuItem,\n  ContextMenuCheckboxItem,\n  ContextMenuRadioItem,\n  ContextMenuLabel,\n  ContextMenuSeparator,\n  ContextMenuShortcut,\n  ContextMenuGroup,\n  ContextMenuPortal,\n  ContextMenuSub,\n  ContextMenuSubContent,\n  ContextMenuSubTrigger,\n  ContextMenuRadioGroup,\n}\n","size_bytes":7428},"client/src/components/ui/tabs.tsx":{"content":"import * as React from \"react\"\nimport * as TabsPrimitive from \"@radix-ui/react-tabs\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Tabs = TabsPrimitive.Root\n\nconst TabsList = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.List>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.List>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.List\n    ref={ref}\n    className={cn(\n      \"inline-flex h-10 items-center justify-center rounded-md bg-muted p-1 text-muted-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsList.displayName = TabsPrimitive.List.displayName\n\nconst TabsTrigger = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"inline-flex items-center justify-center whitespace-nowrap rounded-sm px-3 py-1.5 text-sm font-medium ring-offset-background transition-all focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 data-[state=active]:bg-background data-[state=active]:text-foreground data-[state=active]:shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsTrigger.displayName = TabsPrimitive.Trigger.displayName\n\nconst TabsContent = React.forwardRef<\n  React.ElementRef<typeof TabsPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof TabsPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <TabsPrimitive.Content\n    ref={ref}\n    className={cn(\n      \"mt-2 ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2\",\n      className\n    )}\n    {...props}\n  />\n))\nTabsContent.displayName = TabsPrimitive.Content.displayName\n\nexport { Tabs, TabsList, TabsTrigger, TabsContent }\n","size_bytes":1883},"client/src/components/ui/alert.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst alertVariants = cva(\n  \"relative w-full rounded-lg border p-4 [&>svg~*]:pl-7 [&>svg+div]:translate-y-[-3px] [&>svg]:absolute [&>svg]:left-4 [&>svg]:top-4 [&>svg]:text-foreground\",\n  {\n    variants: {\n      variant: {\n        default: \"bg-background text-foreground\",\n        destructive:\n          \"border-destructive/50 text-destructive dark:border-destructive [&>svg]:text-destructive\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Alert = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & VariantProps<typeof alertVariants>\n>(({ className, variant, ...props }, ref) => (\n  <div\n    ref={ref}\n    role=\"alert\"\n    className={cn(alertVariants({ variant }), className)}\n    {...props}\n  />\n))\nAlert.displayName = \"Alert\"\n\nconst AlertTitle = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLHeadingElement>\n>(({ className, ...props }, ref) => (\n  <h5\n    ref={ref}\n    className={cn(\"mb-1 font-medium leading-none tracking-tight\", className)}\n    {...props}\n  />\n))\nAlertTitle.displayName = \"AlertTitle\"\n\nconst AlertDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm [&_p]:leading-relaxed\", className)}\n    {...props}\n  />\n))\nAlertDescription.displayName = \"AlertDescription\"\n\nexport { Alert, AlertTitle, AlertDescription }\n","size_bytes":1584},"client/src/index.css":{"content":"@tailwind base;\n@tailwind components;\n@tailwind utilities;\n\n/* LIGHT MODE */\n:root {\n  --button-outline: rgba(0,0,0, .10);\n  --badge-outline: rgba(0,0,0, .05);\n\n  /* Automatic computation of border around primary / danger buttons */\n  --opaque-button-border-intensity: -8; /* In terms of percentages */\n\n  /* Backgrounds applied on top of other backgrounds when hovered/active */\n  --elevate-1: rgba(0,0,0, .03);\n  --elevate-2: rgba(0,0,0, .08);\n\n  --background: 0 0% 98%;\n\n  --foreground: 0 0% 12%;\n\n  --border: 0 0% 88%;\n\n  --card: 0 0% 96%;\n\n  --card-foreground: 0 0% 12%;\n\n  --card-border: 0 0% 91%;\n\n  --sidebar: 0 0% 94%;\n\n  --sidebar-foreground: 0 0% 12%;\n\n  --sidebar-border: 0 0% 89%;\n\n  --sidebar-primary: 142 76% 32%;\n\n  --sidebar-primary-foreground: 142 76% 97%;\n\n  --sidebar-accent: 142 8% 86%;\n\n  --sidebar-accent-foreground: 142 8% 25%;\n\n  --sidebar-ring: 142 76% 32%;\n\n  --popover: 0 0% 92%;\n\n  --popover-foreground: 0 0% 12%;\n\n  --popover-border: 0 0% 87%;\n\n  --primary: 142 76% 32%;\n\n  --primary-foreground: 142 76% 97%;\n\n  --secondary: 142 6% 84%;\n\n  --secondary-foreground: 142 6% 22%;\n\n  --muted: 142 8% 88%;\n\n  --muted-foreground: 142 8% 38%;\n\n  --accent: 142 12% 86%;\n\n  --accent-foreground: 142 12% 26%;\n\n  --destructive: 0 72% 35%;\n\n  --destructive-foreground: 0 72% 97%;\n\n  --input: 0 0% 72%;\n  --ring: 142 76% 32%;\n  --chart-1: 142 76% 32%;\n  --chart-2: 197 71% 35%;\n  --chart-3: 43 82% 42%;\n  --chart-4: 280 65% 38%;\n  --chart-5: 24 78% 45%;\n\n  --font-sans: Open Sans, sans-serif;\n  --font-serif: Georgia, serif;\n  --font-mono: Menlo, monospace;\n  --radius: .5rem; /* 8px */\n  --shadow-2xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.02);\n  --shadow-xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.03);\n  --shadow-sm: 0px 2px 0px 0px hsl(0 0% 0% / 0.03), 0px 1px 2px -1px hsl(0 0% 0% / 0.05);\n  --shadow: 0px 2px 0px 0px hsl(0 0% 0% / 0.04), 0px 1px 2px -1px hsl(0 0% 0% / 0.06);\n  --shadow-md: 0px 2px 0px 0px hsl(0 0% 0% / 0.05), 0px 2px 4px -1px hsl(0 0% 0% / 0.08);\n  --shadow-lg: 0px 2px 0px 0px hsl(0 0% 0% / 0.06), 0px 4px 6px -1px hsl(0 0% 0% / 0.10);\n  --shadow-xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.08), 0px 8px 10px -1px hsl(0 0% 0% / 0.12);\n  --shadow-2xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.10);\n  --tracking-normal: 0em;\n  --spacing: 0.25rem;\n\n  /* Automatically computed borders - intensity can be controlled by the user by the --opaque-button-border-intensity setting */\n\n  /* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n.dark {\n  --button-outline: rgba(255,255,255, .10);\n  --badge-outline: rgba(255,255,255, .05);\n\n  --opaque-button-border-intensity: 9;  /* In terms of percentages */\n\n  /* Backgrounds applied on top of other backgrounds when hovered/active */\n  --elevate-1: rgba(255,255,255, .04);\n  --elevate-2: rgba(255,255,255, .09);\n\n  --background: 0 0% 8%;\n\n  --foreground: 0 0% 92%;\n\n  --border: 0 0% 18%;\n\n  --card: 0 0% 10%;\n\n  --card-foreground: 0 0% 92%;\n\n  --card-border: 0 0% 14%;\n\n  --sidebar: 0 0% 12%;\n\n  --sidebar-foreground: 0 0% 92%;\n\n  --sidebar-border: 0 0% 16%;\n\n  --sidebar-primary: 142 76% 32%;\n\n  --sidebar-primary-foreground: 142 76% 97%;\n\n  --sidebar-accent: 142 8% 18%;\n\n  --sidebar-accent-foreground: 142 8% 85%;\n\n  --sidebar-ring: 142 76% 32%;\n\n  --popover: 0 0% 14%;\n\n  --popover-foreground: 0 0% 92%;\n\n  --popover-border: 0 0% 18%;\n\n  --primary: 142 76% 32%;\n\n  --primary-foreground: 142 76% 97%;\n\n  --secondary: 142 6% 20%;\n\n  --secondary-foreground: 142 6% 88%;\n\n  --muted: 142 8% 16%;\n\n  --muted-foreground: 142 8% 72%;\n\n  --accent: 142 12% 18%;\n\n  --accent-foreground: 142 12% 85%;\n\n  --destructive: 0 72% 35%;\n\n  --destructive-foreground: 0 72% 97%;\n\n  --input: 0 0% 32%;\n  --ring: 142 76% 32%;\n  --chart-1: 142 76% 55%;\n  --chart-2: 197 71% 60%;\n  --chart-3: 43 82% 65%;\n  --chart-4: 280 65% 65%;\n  --chart-5: 24 78% 68%;\n\n  --shadow-2xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.15);\n  --shadow-xs: 0px 2px 0px 0px hsl(0 0% 0% / 0.20);\n  --shadow-sm: 0px 2px 0px 0px hsl(0 0% 0% / 0.25), 0px 1px 2px -1px hsl(0 0% 0% / 0.30);\n  --shadow: 0px 2px 0px 0px hsl(0 0% 0% / 0.30), 0px 1px 2px -1px hsl(0 0% 0% / 0.35);\n  --shadow-md: 0px 2px 0px 0px hsl(0 0% 0% / 0.35), 0px 2px 4px -1px hsl(0 0% 0% / 0.40);\n  --shadow-lg: 0px 2px 0px 0px hsl(0 0% 0% / 0.40), 0px 4px 6px -1px hsl(0 0% 0% / 0.45);\n  --shadow-xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.45), 0px 8px 10px -1px hsl(0 0% 0% / 0.50);\n  --shadow-2xl: 0px 2px 0px 0px hsl(0 0% 0% / 0.50);\n\n  /* Automatically computed borders - intensity can be controlled by the user by the --opaque-button-border-intensity setting */\n\n  /* Fallback for older browsers */\n  --sidebar-primary-border: hsl(var(--sidebar-primary));\n  --sidebar-primary-border: hsl(from hsl(var(--sidebar-primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --sidebar-accent-border: hsl(var(--sidebar-accent));\n  --sidebar-accent-border: hsl(from hsl(var(--sidebar-accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --primary-border: hsl(var(--primary));\n  --primary-border: hsl(from hsl(var(--primary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --secondary-border: hsl(var(--secondary));\n  --secondary-border: hsl(from hsl(var(--secondary)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --muted-border: hsl(var(--muted));\n  --muted-border: hsl(from hsl(var(--muted)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --accent-border: hsl(var(--accent));\n  --accent-border: hsl(from hsl(var(--accent)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n\n  /* Fallback for older browsers */\n  --destructive-border: hsl(var(--destructive));\n  --destructive-border: hsl(from hsl(var(--destructive)) h s calc(l + var(--opaque-button-border-intensity)) / alpha);\n}\n\n@layer base {\n  * {\n    @apply border-border;\n  }\n\n  body {\n    @apply font-sans antialiased bg-background text-foreground;\n  }\n}\n\n/**\n * Using the elevate system.\n * Automatic contrast adjustment.\n *\n * <element className=\"hover-elevate\" />\n * <element className=\"active-elevate-2\" />\n *\n * // Using the tailwind utility when a data attribute is \"on\"\n * <element className=\"toggle-elevate data-[state=on]:toggle-elevated\" />\n * // Or manually controlling the toggle state\n * <element className=\"toggle-elevate toggle-elevated\" />\n *\n * Elevation systems have to handle many states.\n * - not-hovered, vs. hovered vs. active  (three mutually exclusive states)\n * - toggled or not\n * - focused or not (this is not handled with these utilities)\n *\n * Even without handling focused or not, this is six possible combinations that\n * need to be distinguished from eachother visually.\n */\n@layer utilities {\n\n  /* Hide ugly search cancel button in Chrome until we can style it properly */\n  input[type=\"search\"]::-webkit-search-cancel-button {\n    @apply hidden;\n  }\n\n  /* Placeholder styling for contentEditable div */\n  [contenteditable][data-placeholder]:empty::before {\n    content: attr(data-placeholder);\n    color: hsl(var(--muted-foreground));\n    pointer-events: none;\n  }\n\n  /* .no-default-hover-elevate/no-default-active-elevate is an escape hatch so consumers of\n   * buttons/badges can remove the automatic brightness adjustment on interactions\n   * and program their own. */\n  .no-default-hover-elevate {}\n\n  .no-default-active-elevate {}\n\n\n  /**\n   * Toggleable backgrounds go behind the content. Hoverable/active goes on top.\n   * This way they can stack/compound. Both will overlap the parent's borders!\n   * So borders will be automatically adjusted both on toggle, and hover/active,\n   * and they will be compounded.\n   */\n  .toggle-elevate::before,\n  .toggle-elevate-2::before {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: -1;\n    /* sits behind content but above backdrop */\n  }\n\n  .toggle-elevate.toggle-elevated::before {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.toggle-elevate::before {\n    inset: -1px;\n  }\n\n  /* Does not work on elements with overflow:hidden! */\n  .hover-elevate:not(.no-default-hover-elevate),\n  .active-elevate:not(.no-default-active-elevate),\n  .hover-elevate-2:not(.no-default-hover-elevate),\n  .active-elevate-2:not(.no-default-active-elevate) {\n    position: relative;\n    z-index: 0;\n  }\n\n  .hover-elevate:not(.no-default-hover-elevate)::after,\n  .active-elevate:not(.no-default-active-elevate)::after,\n  .hover-elevate-2:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:not(.no-default-active-elevate)::after {\n    content: \"\";\n    pointer-events: none;\n    position: absolute;\n    inset: 0px;\n    /*border-radius: inherit;   match rounded corners */\n    border-radius: inherit;\n    z-index: 999;\n    /* sits in front of content */\n  }\n\n  .hover-elevate:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-1);\n  }\n\n  .hover-elevate-2:hover:not(.no-default-hover-elevate)::after,\n  .active-elevate-2:active:not(.no-default-active-elevate)::after {\n    background-color: var(--elevate-2);\n  }\n\n  /* If there's a 1px border, adjust the inset so that it covers that parent's border */\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate-2:not(.no-hover-interaction-elevate)::after,\n  .border.active-elevate-2:not(.no-active-interaction-elevate)::after,\n  .border.hover-elevate:not(.no-hover-interaction-elevate)::after {\n    inset: -1px;\n  }\n}","size_bytes":11200},"client/src/components/ui/calendar.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight } from \"lucide-react\"\nimport { DayPicker } from \"react-day-picker\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nexport type CalendarProps = React.ComponentProps<typeof DayPicker>\n\nfunction Calendar({\n  className,\n  classNames,\n  showOutsideDays = true,\n  ...props\n}: CalendarProps) {\n  return (\n    <DayPicker\n      showOutsideDays={showOutsideDays}\n      className={cn(\"p-3\", className)}\n      classNames={{\n        months: \"flex flex-col sm:flex-row space-y-4 sm:space-x-4 sm:space-y-0\",\n        month: \"space-y-4\",\n        caption: \"flex justify-center pt-1 relative items-center\",\n        caption_label: \"text-sm font-medium\",\n        nav: \"space-x-1 flex items-center\",\n        nav_button: cn(\n          buttonVariants({ variant: \"outline\" }),\n          \"h-7 w-7 bg-transparent p-0 opacity-50 hover:opacity-100\"\n        ),\n        nav_button_previous: \"absolute left-1\",\n        nav_button_next: \"absolute right-1\",\n        table: \"w-full border-collapse space-y-1\",\n        head_row: \"flex\",\n        head_cell:\n          \"text-muted-foreground rounded-md w-9 font-normal text-[0.8rem]\",\n        row: \"flex w-full mt-2\",\n        cell: \"h-9 w-9 text-center text-sm p-0 relative [&:has([aria-selected].day-range-end)]:rounded-r-md [&:has([aria-selected].day-outside)]:bg-accent/50 [&:has([aria-selected])]:bg-accent first:[&:has([aria-selected])]:rounded-l-md last:[&:has([aria-selected])]:rounded-r-md focus-within:relative focus-within:z-20\",\n        day: cn(\n          buttonVariants({ variant: \"ghost\" }),\n          \"h-9 w-9 p-0 font-normal aria-selected:opacity-100\"\n        ),\n        day_range_end: \"day-range-end\",\n        day_selected:\n          \"bg-primary text-primary-foreground hover:bg-primary hover:text-primary-foreground focus:bg-primary focus:text-primary-foreground\",\n        day_today: \"bg-accent text-accent-foreground\",\n        day_outside:\n          \"day-outside text-muted-foreground aria-selected:bg-accent/50 aria-selected:text-muted-foreground\",\n        day_disabled: \"text-muted-foreground opacity-50\",\n        day_range_middle:\n          \"aria-selected:bg-accent aria-selected:text-accent-foreground\",\n        day_hidden: \"invisible\",\n        ...classNames,\n      }}\n      components={{\n        IconLeft: ({ className, ...props }) => (\n          <ChevronLeft className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n        IconRight: ({ className, ...props }) => (\n          <ChevronRight className={cn(\"h-4 w-4\", className)} {...props} />\n        ),\n      }}\n      {...props}\n    />\n  )\n}\nCalendar.displayName = \"Calendar\"\n\nexport { Calendar }\n","size_bytes":2695},"server/db.ts":{"content":"// Referenced from javascript_database blueprint\nimport { Pool, neonConfig } from '@neondatabase/serverless';\nimport { drizzle } from 'drizzle-orm/neon-serverless';\nimport ws from \"ws\";\nimport * as schema from \"@shared/schema\";\n\nneonConfig.webSocketConstructor = ws;\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\n    \"DATABASE_URL must be set. Did you forget to provision a database?\",\n  );\n}\n\nexport const pool = new Pool({ connectionString: process.env.DATABASE_URL });\nexport const db = drizzle({ client: pool, schema });\n","size_bytes":532},"client/src/lib/authUtils.ts":{"content":"export function isUnauthorizedError(error: Error): boolean {\n  return /^401: .*Unauthorized/.test(error.message);\n}\n","size_bytes":116},"client/src/components/ui/form.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport {\n  Controller,\n  FormProvider,\n  useFormContext,\n  type ControllerProps,\n  type FieldPath,\n  type FieldValues,\n} from \"react-hook-form\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Label } from \"@/components/ui/label\"\n\nconst Form = FormProvider\n\ntype FormFieldContextValue<\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n> = {\n  name: TName\n}\n\nconst FormFieldContext = React.createContext<FormFieldContextValue>(\n  {} as FormFieldContextValue\n)\n\nconst FormField = <\n  TFieldValues extends FieldValues = FieldValues,\n  TName extends FieldPath<TFieldValues> = FieldPath<TFieldValues>\n>({\n  ...props\n}: ControllerProps<TFieldValues, TName>) => {\n  return (\n    <FormFieldContext.Provider value={{ name: props.name }}>\n      <Controller {...props} />\n    </FormFieldContext.Provider>\n  )\n}\n\nconst useFormField = () => {\n  const fieldContext = React.useContext(FormFieldContext)\n  const itemContext = React.useContext(FormItemContext)\n  const { getFieldState, formState } = useFormContext()\n\n  const fieldState = getFieldState(fieldContext.name, formState)\n\n  if (!fieldContext) {\n    throw new Error(\"useFormField should be used within <FormField>\")\n  }\n\n  const { id } = itemContext\n\n  return {\n    id,\n    name: fieldContext.name,\n    formItemId: `${id}-form-item`,\n    formDescriptionId: `${id}-form-item-description`,\n    formMessageId: `${id}-form-item-message`,\n    ...fieldState,\n  }\n}\n\ntype FormItemContextValue = {\n  id: string\n}\n\nconst FormItemContext = React.createContext<FormItemContextValue>(\n  {} as FormItemContextValue\n)\n\nconst FormItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const id = React.useId()\n\n  return (\n    <FormItemContext.Provider value={{ id }}>\n      <div ref={ref} className={cn(\"space-y-2\", className)} {...props} />\n    </FormItemContext.Provider>\n  )\n})\nFormItem.displayName = \"FormItem\"\n\nconst FormLabel = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  const { error, formItemId } = useFormField()\n\n  return (\n    <Label\n      ref={ref}\n      className={cn(error && \"text-destructive\", className)}\n      htmlFor={formItemId}\n      {...props}\n    />\n  )\n})\nFormLabel.displayName = \"FormLabel\"\n\nconst FormControl = React.forwardRef<\n  React.ElementRef<typeof Slot>,\n  React.ComponentPropsWithoutRef<typeof Slot>\n>(({ ...props }, ref) => {\n  const { error, formItemId, formDescriptionId, formMessageId } = useFormField()\n\n  return (\n    <Slot\n      ref={ref}\n      id={formItemId}\n      aria-describedby={\n        !error\n          ? `${formDescriptionId}`\n          : `${formDescriptionId} ${formMessageId}`\n      }\n      aria-invalid={!!error}\n      {...props}\n    />\n  )\n})\nFormControl.displayName = \"FormControl\"\n\nconst FormDescription = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, ...props }, ref) => {\n  const { formDescriptionId } = useFormField()\n\n  return (\n    <p\n      ref={ref}\n      id={formDescriptionId}\n      className={cn(\"text-sm text-muted-foreground\", className)}\n      {...props}\n    />\n  )\n})\nFormDescription.displayName = \"FormDescription\"\n\nconst FormMessage = React.forwardRef<\n  HTMLParagraphElement,\n  React.HTMLAttributes<HTMLParagraphElement>\n>(({ className, children, ...props }, ref) => {\n  const { error, formMessageId } = useFormField()\n  const body = error ? String(error?.message ?? \"\") : children\n\n  if (!body) {\n    return null\n  }\n\n  return (\n    <p\n      ref={ref}\n      id={formMessageId}\n      className={cn(\"text-sm font-medium text-destructive\", className)}\n      {...props}\n    >\n      {body}\n    </p>\n  )\n})\nFormMessage.displayName = \"FormMessage\"\n\nexport {\n  useFormField,\n  Form,\n  FormItem,\n  FormLabel,\n  FormControl,\n  FormDescription,\n  FormMessage,\n  FormField,\n}\n","size_bytes":4120},"client/src/components/ui/skeleton.tsx":{"content":"import { cn } from \"@/lib/utils\"\n\nfunction Skeleton({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) {\n  return (\n    <div\n      className={cn(\"animate-pulse rounded-md bg-muted\", className)}\n      {...props}\n    />\n  )\n}\n\nexport { Skeleton }\n","size_bytes":261},"client/src/components/ui/dropdown-menu.tsx":{"content":"import * as React from \"react\"\nimport * as DropdownMenuPrimitive from \"@radix-ui/react-dropdown-menu\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst DropdownMenu = DropdownMenuPrimitive.Root\n\nconst DropdownMenuTrigger = DropdownMenuPrimitive.Trigger\n\nconst DropdownMenuGroup = DropdownMenuPrimitive.Group\n\nconst DropdownMenuPortal = DropdownMenuPrimitive.Portal\n\nconst DropdownMenuSub = DropdownMenuPrimitive.Sub\n\nconst DropdownMenuRadioGroup = DropdownMenuPrimitive.RadioGroup\n\nconst DropdownMenuSubTrigger = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent data-[state=open]:bg-accent [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto\" />\n  </DropdownMenuPrimitive.SubTrigger>\n))\nDropdownMenuSubTrigger.displayName =\n  DropdownMenuPrimitive.SubTrigger.displayName\n\nconst DropdownMenuSubContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-lg data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuSubContent.displayName =\n  DropdownMenuPrimitive.SubContent.displayName\n\nconst DropdownMenuContent = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Content>\n>(({ className, sideOffset = 4, ...props }, ref) => (\n  <DropdownMenuPrimitive.Portal>\n    <DropdownMenuPrimitive.Content\n      ref={ref}\n      sideOffset={sideOffset}\n      className={cn(\n        \"z-50 max-h-[var(--radix-dropdown-menu-content-available-height)] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-dropdown-menu-content-transform-origin]\",\n        className\n      )}\n      {...props}\n    />\n  </DropdownMenuPrimitive.Portal>\n))\nDropdownMenuContent.displayName = DropdownMenuPrimitive.Content.displayName\n\nconst DropdownMenuItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center gap-2 rounded-sm px-2 py-1.5 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50 [&_svg]:pointer-events-none [&_svg]:size-4 [&_svg]:shrink-0\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuItem.displayName = DropdownMenuPrimitive.Item.displayName\n\nconst DropdownMenuCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <DropdownMenuPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.CheckboxItem>\n))\nDropdownMenuCheckboxItem.displayName =\n  DropdownMenuPrimitive.CheckboxItem.displayName\n\nconst DropdownMenuRadioItem = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <DropdownMenuPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none transition-colors focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <DropdownMenuPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </DropdownMenuPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </DropdownMenuPrimitive.RadioItem>\n))\nDropdownMenuRadioItem.displayName = DropdownMenuPrimitive.RadioItem.displayName\n\nconst DropdownMenuLabel = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <DropdownMenuPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nDropdownMenuLabel.displayName = DropdownMenuPrimitive.Label.displayName\n\nconst DropdownMenuSeparator = React.forwardRef<\n  React.ElementRef<typeof DropdownMenuPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof DropdownMenuPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <DropdownMenuPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nDropdownMenuSeparator.displayName = DropdownMenuPrimitive.Separator.displayName\n\nconst DropdownMenuShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\"ml-auto text-xs tracking-widest opacity-60\", className)}\n      {...props}\n    />\n  )\n}\nDropdownMenuShortcut.displayName = \"DropdownMenuShortcut\"\n\nexport {\n  DropdownMenu,\n  DropdownMenuTrigger,\n  DropdownMenuContent,\n  DropdownMenuItem,\n  DropdownMenuCheckboxItem,\n  DropdownMenuRadioItem,\n  DropdownMenuLabel,\n  DropdownMenuSeparator,\n  DropdownMenuShortcut,\n  DropdownMenuGroup,\n  DropdownMenuPortal,\n  DropdownMenuSub,\n  DropdownMenuSubContent,\n  DropdownMenuSubTrigger,\n  DropdownMenuRadioGroup,\n}\n","size_bytes":7609},"client/src/components/ui/menubar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as MenubarPrimitive from \"@radix-ui/react-menubar\"\nimport { Check, ChevronRight, Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nfunction MenubarMenu({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Menu>) {\n  return <MenubarPrimitive.Menu {...props} />\n}\n\nfunction MenubarGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Group>) {\n  return <MenubarPrimitive.Group {...props} />\n}\n\nfunction MenubarPortal({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Portal>) {\n  return <MenubarPrimitive.Portal {...props} />\n}\n\nfunction MenubarRadioGroup({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.RadioGroup>) {\n  return <MenubarPrimitive.RadioGroup {...props} />\n}\n\nfunction MenubarSub({\n  ...props\n}: React.ComponentProps<typeof MenubarPrimitive.Sub>) {\n  return <MenubarPrimitive.Sub data-slot=\"menubar-sub\" {...props} />\n}\n\nconst Menubar = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"flex h-10 items-center space-x-1 rounded-md border bg-background p-1\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubar.displayName = MenubarPrimitive.Root.displayName\n\nconst MenubarTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Trigger>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-3 py-1.5 text-sm font-medium outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarTrigger.displayName = MenubarPrimitive.Trigger.displayName\n\nconst MenubarSubTrigger = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubTrigger>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubTrigger> & {\n    inset?: boolean\n  }\n>(({ className, inset, children, ...props }, ref) => (\n  <MenubarPrimitive.SubTrigger\n    ref={ref}\n    className={cn(\n      \"flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[state=open]:bg-accent data-[state=open]:text-accent-foreground\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <ChevronRight className=\"ml-auto h-4 w-4\" />\n  </MenubarPrimitive.SubTrigger>\n))\nMenubarSubTrigger.displayName = MenubarPrimitive.SubTrigger.displayName\n\nconst MenubarSubContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.SubContent>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.SubContent>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.SubContent\n    ref={ref}\n    className={cn(\n      \"z-50 min-w-[8rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarSubContent.displayName = MenubarPrimitive.SubContent.displayName\n\nconst MenubarContent = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Content>\n>(\n  (\n    { className, align = \"start\", alignOffset = -4, sideOffset = 8, ...props },\n    ref\n  ) => (\n    <MenubarPrimitive.Portal>\n      <MenubarPrimitive.Content\n        ref={ref}\n        align={align}\n        alignOffset={alignOffset}\n        sideOffset={sideOffset}\n        className={cn(\n          \"z-50 min-w-[12rem] overflow-hidden rounded-md border bg-popover p-1 text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-menubar-content-transform-origin]\",\n          className\n        )}\n        {...props}\n      />\n    </MenubarPrimitive.Portal>\n  )\n)\nMenubarContent.displayName = MenubarPrimitive.Content.displayName\n\nconst MenubarItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Item> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm px-2 py-1.5 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarItem.displayName = MenubarPrimitive.Item.displayName\n\nconst MenubarCheckboxItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.CheckboxItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.CheckboxItem>\n>(({ className, children, checked, ...props }, ref) => (\n  <MenubarPrimitive.CheckboxItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    checked={checked}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.CheckboxItem>\n))\nMenubarCheckboxItem.displayName = MenubarPrimitive.CheckboxItem.displayName\n\nconst MenubarRadioItem = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.RadioItem>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.RadioItem>\n>(({ className, children, ...props }, ref) => (\n  <MenubarPrimitive.RadioItem\n    ref={ref}\n    className={cn(\n      \"relative flex cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <MenubarPrimitive.ItemIndicator>\n        <Circle className=\"h-2 w-2 fill-current\" />\n      </MenubarPrimitive.ItemIndicator>\n    </span>\n    {children}\n  </MenubarPrimitive.RadioItem>\n))\nMenubarRadioItem.displayName = MenubarPrimitive.RadioItem.displayName\n\nconst MenubarLabel = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Label> & {\n    inset?: boolean\n  }\n>(({ className, inset, ...props }, ref) => (\n  <MenubarPrimitive.Label\n    ref={ref}\n    className={cn(\n      \"px-2 py-1.5 text-sm font-semibold\",\n      inset && \"pl-8\",\n      className\n    )}\n    {...props}\n  />\n))\nMenubarLabel.displayName = MenubarPrimitive.Label.displayName\n\nconst MenubarSeparator = React.forwardRef<\n  React.ElementRef<typeof MenubarPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof MenubarPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <MenubarPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nMenubarSeparator.displayName = MenubarPrimitive.Separator.displayName\n\nconst MenubarShortcut = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLSpanElement>) => {\n  return (\n    <span\n      className={cn(\n        \"ml-auto text-xs tracking-widest text-muted-foreground\",\n        className\n      )}\n      {...props}\n    />\n  )\n}\nMenubarShortcut.displayname = \"MenubarShortcut\"\n\nexport {\n  Menubar,\n  MenubarMenu,\n  MenubarTrigger,\n  MenubarContent,\n  MenubarItem,\n  MenubarSeparator,\n  MenubarLabel,\n  MenubarCheckboxItem,\n  MenubarRadioGroup,\n  MenubarRadioItem,\n  MenubarPortal,\n  MenubarSubContent,\n  MenubarSubTrigger,\n  MenubarGroup,\n  MenubarSub,\n  MenubarShortcut,\n}\n","size_bytes":8605},"server/openai.ts":{"content":"// Referenced from javascript_openai blueprint\nimport OpenAI from \"openai\";\n\n// the newest OpenAI model is \"gpt-5\" which was released August 7, 2025. do not change this unless explicitly requested by the user\nconst openai = new OpenAI({ apiKey: process.env.OPENAI_API_KEY });\n\nexport async function analyzeEnergyUsage(data: {\n  month: string;\n  billAmount: number;\n  consumption: number;\n}): Promise<{\n  predictedWastage: number;\n  wastagePercentage: number;\n  insights: string;\n}> {\n  try {\n    const prompt = `Analyze this electricity usage data and provide insights:\n    \nMonth: ${data.month}\nBill Amount: $${data.billAmount}\nConsumption: ${data.consumption} kWh\n\nProvide a JSON response with:\n1. predictedWastage (number, in kWh) - estimate how much energy is being wasted\n2. wastagePercentage (number) - percentage of total consumption that's wastage\n3. insights (string) - 2-3 specific, actionable tips to reduce energy consumption\n\nBe specific and practical. Focus on the most impactful changes.`;\n\n    const response = await openai.chat.completions.create({\n      model: \"gpt-5\",\n      messages: [\n        {\n          role: \"system\",\n          content: \"You are an energy efficiency expert. Analyze usage patterns and provide practical conservation tips. Respond with JSON matching the exact format requested.\",\n        },\n        {\n          role: \"user\",\n          content: prompt,\n        },\n      ],\n      response_format: { type: \"json_object\" },\n      max_completion_tokens: 500,\n    });\n\n    const result = JSON.parse(response.choices[0].message.content || \"{}\");\n    \n    return {\n      predictedWastage: result.predictedWastage || data.consumption * 0.15,\n      wastagePercentage: result.wastagePercentage || 15,\n      insights: result.insights || \"Consider using energy-efficient appliances and LED bulbs.\",\n    };\n  } catch (error) {\n    console.error(\"Error analyzing energy usage:\", error);\n    // Fallback to simple calculation\n    return {\n      predictedWastage: data.consumption * 0.15,\n      wastagePercentage: 15,\n      insights: \"Switch to LED bulbs, unplug devices when not in use, and use energy-efficient appliances.\",\n    };\n  }\n}\n\nexport async function analyzeWaterUsage(data: {\n  month: string;\n  billAmount: number;\n  consumption: number;\n}): Promise<{\n  efficiencyScore: number;\n  insights: string;\n}> {\n  try {\n    const prompt = `Analyze this water usage data and provide insights:\n    \nMonth: ${data.month}\nBill Amount: $${data.billAmount}\nConsumption: ${data.consumption} liters\n\nProvide a JSON response with:\n1. efficiencyScore (number, 0-100) - how efficient the water usage is (100 = excellent)\n2. insights (string) - 2-3 specific, actionable tips to conserve water\n\nBe specific and practical.`;\n\n    const response = await openai.chat.completions.create({\n      model: \"gpt-5\",\n      messages: [\n        {\n          role: \"system\",\n          content: \"You are a water conservation expert. Analyze usage patterns and provide practical tips. Respond with JSON matching the exact format requested.\",\n        },\n        {\n          role: \"user\",\n          content: prompt,\n        },\n      ],\n      response_format: { type: \"json_object\" },\n      max_completion_tokens: 500,\n    });\n\n    const result = JSON.parse(response.choices[0].message.content || \"{}\");\n    \n    return {\n      efficiencyScore: result.efficiencyScore || 65,\n      insights: result.insights || \"Fix leaky faucets, take shorter showers, and install low-flow fixtures.\",\n    };\n  } catch (error) {\n    console.error(\"Error analyzing water usage:\", error);\n    // Fallback\n    return {\n      efficiencyScore: 65,\n      insights: \"Fix leaky faucets, take shorter showers, and install low-flow fixtures to conserve water.\",\n    };\n  }\n}\n\nexport async function chatWithAdvisor(message: string): Promise<string> {\n  try {\n    const response = await openai.chat.completions.create({\n      model: \"gpt-5\",\n      messages: [\n        {\n          role: \"system\",\n          content: \"You are an AI sustainability advisor helping users live more eco-friendly lives. Provide practical, actionable advice about reducing carbon footprint, saving energy, conserving water, and finding sustainable products. Be encouraging and specific.\",\n        },\n        {\n          role: \"user\",\n          content: message,\n        },\n      ],\n      max_completion_tokens: 500,\n    });\n\n    return response.choices[0].message.content || \"I'm here to help you live more sustainably! Ask me anything about reducing your environmental impact.\";\n  } catch (error) {\n    console.error(\"Error in AI advisor chat:\", error);\n    return \"I'm having trouble connecting right now, but I'm here to help you with sustainability tips! Try asking about energy savings, water conservation, or eco-friendly products.\";\n  }\n}\n","size_bytes":4789},"client/src/hooks/use-toast.ts":{"content":"import * as React from \"react\"\n\nimport type {\n  ToastActionElement,\n  ToastProps,\n} from \"@/components/ui/toast\"\n\nconst TOAST_LIMIT = 1\nconst TOAST_REMOVE_DELAY = 1000000\n\ntype ToasterToast = ToastProps & {\n  id: string\n  title?: React.ReactNode\n  description?: React.ReactNode\n  action?: ToastActionElement\n}\n\nconst actionTypes = {\n  ADD_TOAST: \"ADD_TOAST\",\n  UPDATE_TOAST: \"UPDATE_TOAST\",\n  DISMISS_TOAST: \"DISMISS_TOAST\",\n  REMOVE_TOAST: \"REMOVE_TOAST\",\n} as const\n\nlet count = 0\n\nfunction genId() {\n  count = (count + 1) % Number.MAX_SAFE_INTEGER\n  return count.toString()\n}\n\ntype ActionType = typeof actionTypes\n\ntype Action =\n  | {\n      type: ActionType[\"ADD_TOAST\"]\n      toast: ToasterToast\n    }\n  | {\n      type: ActionType[\"UPDATE_TOAST\"]\n      toast: Partial<ToasterToast>\n    }\n  | {\n      type: ActionType[\"DISMISS_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n  | {\n      type: ActionType[\"REMOVE_TOAST\"]\n      toastId?: ToasterToast[\"id\"]\n    }\n\ninterface State {\n  toasts: ToasterToast[]\n}\n\nconst toastTimeouts = new Map<string, ReturnType<typeof setTimeout>>()\n\nconst addToRemoveQueue = (toastId: string) => {\n  if (toastTimeouts.has(toastId)) {\n    return\n  }\n\n  const timeout = setTimeout(() => {\n    toastTimeouts.delete(toastId)\n    dispatch({\n      type: \"REMOVE_TOAST\",\n      toastId: toastId,\n    })\n  }, TOAST_REMOVE_DELAY)\n\n  toastTimeouts.set(toastId, timeout)\n}\n\nexport const reducer = (state: State, action: Action): State => {\n  switch (action.type) {\n    case \"ADD_TOAST\":\n      return {\n        ...state,\n        toasts: [action.toast, ...state.toasts].slice(0, TOAST_LIMIT),\n      }\n\n    case \"UPDATE_TOAST\":\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === action.toast.id ? { ...t, ...action.toast } : t\n        ),\n      }\n\n    case \"DISMISS_TOAST\": {\n      const { toastId } = action\n\n      // ! Side effects ! - This could be extracted into a dismissToast() action,\n      // but I'll keep it here for simplicity\n      if (toastId) {\n        addToRemoveQueue(toastId)\n      } else {\n        state.toasts.forEach((toast) => {\n          addToRemoveQueue(toast.id)\n        })\n      }\n\n      return {\n        ...state,\n        toasts: state.toasts.map((t) =>\n          t.id === toastId || toastId === undefined\n            ? {\n                ...t,\n                open: false,\n              }\n            : t\n        ),\n      }\n    }\n    case \"REMOVE_TOAST\":\n      if (action.toastId === undefined) {\n        return {\n          ...state,\n          toasts: [],\n        }\n      }\n      return {\n        ...state,\n        toasts: state.toasts.filter((t) => t.id !== action.toastId),\n      }\n  }\n}\n\nconst listeners: Array<(state: State) => void> = []\n\nlet memoryState: State = { toasts: [] }\n\nfunction dispatch(action: Action) {\n  memoryState = reducer(memoryState, action)\n  listeners.forEach((listener) => {\n    listener(memoryState)\n  })\n}\n\ntype Toast = Omit<ToasterToast, \"id\">\n\nfunction toast({ ...props }: Toast) {\n  const id = genId()\n\n  const update = (props: ToasterToast) =>\n    dispatch({\n      type: \"UPDATE_TOAST\",\n      toast: { ...props, id },\n    })\n  const dismiss = () => dispatch({ type: \"DISMISS_TOAST\", toastId: id })\n\n  dispatch({\n    type: \"ADD_TOAST\",\n    toast: {\n      ...props,\n      id,\n      open: true,\n      onOpenChange: (open) => {\n        if (!open) dismiss()\n      },\n    },\n  })\n\n  return {\n    id: id,\n    dismiss,\n    update,\n  }\n}\n\nfunction useToast() {\n  const [state, setState] = React.useState<State>(memoryState)\n\n  React.useEffect(() => {\n    listeners.push(setState)\n    return () => {\n      const index = listeners.indexOf(setState)\n      if (index > -1) {\n        listeners.splice(index, 1)\n      }\n    }\n  }, [state])\n\n  return {\n    ...state,\n    toast,\n    dismiss: (toastId?: string) => dispatch({ type: \"DISMISS_TOAST\", toastId }),\n  }\n}\n\nexport { useToast, toast }\n","size_bytes":3895},"client/src/components/ui/chart.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as RechartsPrimitive from \"recharts\"\n\nimport { cn } from \"@/lib/utils\"\n\n// Format: { THEME_NAME: CSS_SELECTOR }\nconst THEMES = { light: \"\", dark: \".dark\" } as const\n\nexport type ChartConfig = {\n  [k in string]: {\n    label?: React.ReactNode\n    icon?: React.ComponentType\n  } & (\n    | { color?: string; theme?: never }\n    | { color?: never; theme: Record<keyof typeof THEMES, string> }\n  )\n}\n\ntype ChartContextProps = {\n  config: ChartConfig\n}\n\nconst ChartContext = React.createContext<ChartContextProps | null>(null)\n\nfunction useChart() {\n  const context = React.useContext(ChartContext)\n\n  if (!context) {\n    throw new Error(\"useChart must be used within a <ChartContainer />\")\n  }\n\n  return context\n}\n\nconst ChartContainer = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> & {\n    config: ChartConfig\n    children: React.ComponentProps<\n      typeof RechartsPrimitive.ResponsiveContainer\n    >[\"children\"]\n  }\n>(({ id, className, children, config, ...props }, ref) => {\n  const uniqueId = React.useId()\n  const chartId = `chart-${id || uniqueId.replace(/:/g, \"\")}`\n\n  return (\n    <ChartContext.Provider value={{ config }}>\n      <div\n        data-chart={chartId}\n        ref={ref}\n        className={cn(\n          \"flex aspect-video justify-center text-xs [&_.recharts-cartesian-axis-tick_text]:fill-muted-foreground [&_.recharts-cartesian-grid_line[stroke='#ccc']]:stroke-border/50 [&_.recharts-curve.recharts-tooltip-cursor]:stroke-border [&_.recharts-dot[stroke='#fff']]:stroke-transparent [&_.recharts-layer]:outline-none [&_.recharts-polar-grid_[stroke='#ccc']]:stroke-border [&_.recharts-radial-bar-background-sector]:fill-muted [&_.recharts-rectangle.recharts-tooltip-cursor]:fill-muted [&_.recharts-reference-line_[stroke='#ccc']]:stroke-border [&_.recharts-sector[stroke='#fff']]:stroke-transparent [&_.recharts-sector]:outline-none [&_.recharts-surface]:outline-none\",\n          className\n        )}\n        {...props}\n      >\n        <ChartStyle id={chartId} config={config} />\n        <RechartsPrimitive.ResponsiveContainer>\n          {children}\n        </RechartsPrimitive.ResponsiveContainer>\n      </div>\n    </ChartContext.Provider>\n  )\n})\nChartContainer.displayName = \"Chart\"\n\nconst ChartStyle = ({ id, config }: { id: string; config: ChartConfig }) => {\n  const colorConfig = Object.entries(config).filter(\n    ([, config]) => config.theme || config.color\n  )\n\n  if (!colorConfig.length) {\n    return null\n  }\n\n  return (\n    <style\n      dangerouslySetInnerHTML={{\n        __html: Object.entries(THEMES)\n          .map(\n            ([theme, prefix]) => `\n${prefix} [data-chart=${id}] {\n${colorConfig\n  .map(([key, itemConfig]) => {\n    const color =\n      itemConfig.theme?.[theme as keyof typeof itemConfig.theme] ||\n      itemConfig.color\n    return color ? `  --color-${key}: ${color};` : null\n  })\n  .join(\"\\n\")}\n}\n`\n          )\n          .join(\"\\n\"),\n      }}\n    />\n  )\n}\n\nconst ChartTooltip = RechartsPrimitive.Tooltip\n\nconst ChartTooltipContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<typeof RechartsPrimitive.Tooltip> &\n    React.ComponentProps<\"div\"> & {\n      hideLabel?: boolean\n      hideIndicator?: boolean\n      indicator?: \"line\" | \"dot\" | \"dashed\"\n      nameKey?: string\n      labelKey?: string\n    }\n>(\n  (\n    {\n      active,\n      payload,\n      className,\n      indicator = \"dot\",\n      hideLabel = false,\n      hideIndicator = false,\n      label,\n      labelFormatter,\n      labelClassName,\n      formatter,\n      color,\n      nameKey,\n      labelKey,\n    },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    const tooltipLabel = React.useMemo(() => {\n      if (hideLabel || !payload?.length) {\n        return null\n      }\n\n      const [item] = payload\n      const key = `${labelKey || item?.dataKey || item?.name || \"value\"}`\n      const itemConfig = getPayloadConfigFromPayload(config, item, key)\n      const value =\n        !labelKey && typeof label === \"string\"\n          ? config[label as keyof typeof config]?.label || label\n          : itemConfig?.label\n\n      if (labelFormatter) {\n        return (\n          <div className={cn(\"font-medium\", labelClassName)}>\n            {labelFormatter(value, payload)}\n          </div>\n        )\n      }\n\n      if (!value) {\n        return null\n      }\n\n      return <div className={cn(\"font-medium\", labelClassName)}>{value}</div>\n    }, [\n      label,\n      labelFormatter,\n      payload,\n      hideLabel,\n      labelClassName,\n      config,\n      labelKey,\n    ])\n\n    if (!active || !payload?.length) {\n      return null\n    }\n\n    const nestLabel = payload.length === 1 && indicator !== \"dot\"\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"grid min-w-[8rem] items-start gap-1.5 rounded-lg border border-border/50 bg-background px-2.5 py-1.5 text-xs shadow-xl\",\n          className\n        )}\n      >\n        {!nestLabel ? tooltipLabel : null}\n        <div className=\"grid gap-1.5\">\n          {payload.map((item, index) => {\n            const key = `${nameKey || item.name || item.dataKey || \"value\"}`\n            const itemConfig = getPayloadConfigFromPayload(config, item, key)\n            const indicatorColor = color || item.payload.fill || item.color\n\n            return (\n              <div\n                key={item.dataKey}\n                className={cn(\n                  \"flex w-full flex-wrap items-stretch gap-2 [&>svg]:h-2.5 [&>svg]:w-2.5 [&>svg]:text-muted-foreground\",\n                  indicator === \"dot\" && \"items-center\"\n                )}\n              >\n                {formatter && item?.value !== undefined && item.name ? (\n                  formatter(item.value, item.name, item, index, item.payload)\n                ) : (\n                  <>\n                    {itemConfig?.icon ? (\n                      <itemConfig.icon />\n                    ) : (\n                      !hideIndicator && (\n                        <div\n                          className={cn(\n                            \"shrink-0 rounded-[2px] border-[--color-border] bg-[--color-bg]\",\n                            {\n                              \"h-2.5 w-2.5\": indicator === \"dot\",\n                              \"w-1\": indicator === \"line\",\n                              \"w-0 border-[1.5px] border-dashed bg-transparent\":\n                                indicator === \"dashed\",\n                              \"my-0.5\": nestLabel && indicator === \"dashed\",\n                            }\n                          )}\n                          style={\n                            {\n                              \"--color-bg\": indicatorColor,\n                              \"--color-border\": indicatorColor,\n                            } as React.CSSProperties\n                          }\n                        />\n                      )\n                    )}\n                    <div\n                      className={cn(\n                        \"flex flex-1 justify-between leading-none\",\n                        nestLabel ? \"items-end\" : \"items-center\"\n                      )}\n                    >\n                      <div className=\"grid gap-1.5\">\n                        {nestLabel ? tooltipLabel : null}\n                        <span className=\"text-muted-foreground\">\n                          {itemConfig?.label || item.name}\n                        </span>\n                      </div>\n                      {item.value && (\n                        <span className=\"font-mono font-medium tabular-nums text-foreground\">\n                          {item.value.toLocaleString()}\n                        </span>\n                      )}\n                    </div>\n                  </>\n                )}\n              </div>\n            )\n          })}\n        </div>\n      </div>\n    )\n  }\n)\nChartTooltipContent.displayName = \"ChartTooltip\"\n\nconst ChartLegend = RechartsPrimitive.Legend\n\nconst ChartLegendContent = React.forwardRef<\n  HTMLDivElement,\n  React.ComponentProps<\"div\"> &\n    Pick<RechartsPrimitive.LegendProps, \"payload\" | \"verticalAlign\"> & {\n      hideIcon?: boolean\n      nameKey?: string\n    }\n>(\n  (\n    { className, hideIcon = false, payload, verticalAlign = \"bottom\", nameKey },\n    ref\n  ) => {\n    const { config } = useChart()\n\n    if (!payload?.length) {\n      return null\n    }\n\n    return (\n      <div\n        ref={ref}\n        className={cn(\n          \"flex items-center justify-center gap-4\",\n          verticalAlign === \"top\" ? \"pb-3\" : \"pt-3\",\n          className\n        )}\n      >\n        {payload.map((item) => {\n          const key = `${nameKey || item.dataKey || \"value\"}`\n          const itemConfig = getPayloadConfigFromPayload(config, item, key)\n\n          return (\n            <div\n              key={item.value}\n              className={cn(\n                \"flex items-center gap-1.5 [&>svg]:h-3 [&>svg]:w-3 [&>svg]:text-muted-foreground\"\n              )}\n            >\n              {itemConfig?.icon && !hideIcon ? (\n                <itemConfig.icon />\n              ) : (\n                <div\n                  className=\"h-2 w-2 shrink-0 rounded-[2px]\"\n                  style={{\n                    backgroundColor: item.color,\n                  }}\n                />\n              )}\n              {itemConfig?.label}\n            </div>\n          )\n        })}\n      </div>\n    )\n  }\n)\nChartLegendContent.displayName = \"ChartLegend\"\n\n// Helper to extract item config from a payload.\nfunction getPayloadConfigFromPayload(\n  config: ChartConfig,\n  payload: unknown,\n  key: string\n) {\n  if (typeof payload !== \"object\" || payload === null) {\n    return undefined\n  }\n\n  const payloadPayload =\n    \"payload\" in payload &&\n    typeof payload.payload === \"object\" &&\n    payload.payload !== null\n      ? payload.payload\n      : undefined\n\n  let configLabelKey: string = key\n\n  if (\n    key in payload &&\n    typeof payload[key as keyof typeof payload] === \"string\"\n  ) {\n    configLabelKey = payload[key as keyof typeof payload] as string\n  } else if (\n    payloadPayload &&\n    key in payloadPayload &&\n    typeof payloadPayload[key as keyof typeof payloadPayload] === \"string\"\n  ) {\n    configLabelKey = payloadPayload[\n      key as keyof typeof payloadPayload\n    ] as string\n  }\n\n  return configLabelKey in config\n    ? config[configLabelKey]\n    : config[key as keyof typeof config]\n}\n\nexport {\n  ChartContainer,\n  ChartTooltip,\n  ChartTooltipContent,\n  ChartLegend,\n  ChartLegendContent,\n  ChartStyle,\n}\n","size_bytes":10481},"client/src/components/ui/separator.tsx":{"content":"import * as React from \"react\"\nimport * as SeparatorPrimitive from \"@radix-ui/react-separator\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Separator = React.forwardRef<\n  React.ElementRef<typeof SeparatorPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof SeparatorPrimitive.Root>\n>(\n  (\n    { className, orientation = \"horizontal\", decorative = true, ...props },\n    ref\n  ) => (\n    <SeparatorPrimitive.Root\n      ref={ref}\n      decorative={decorative}\n      orientation={orientation}\n      className={cn(\n        \"shrink-0 bg-border\",\n        orientation === \"horizontal\" ? \"h-[1px] w-full\" : \"h-full w-[1px]\",\n        className\n      )}\n      {...props}\n    />\n  )\n)\nSeparator.displayName = SeparatorPrimitive.Root.displayName\n\nexport { Separator }\n","size_bytes":756},"client/src/components/ui/alert-dialog.tsx":{"content":"import * as React from \"react\"\nimport * as AlertDialogPrimitive from \"@radix-ui/react-alert-dialog\"\n\nimport { cn } from \"@/lib/utils\"\nimport { buttonVariants } from \"@/components/ui/button\"\n\nconst AlertDialog = AlertDialogPrimitive.Root\n\nconst AlertDialogTrigger = AlertDialogPrimitive.Trigger\n\nconst AlertDialogPortal = AlertDialogPrimitive.Portal\n\nconst AlertDialogOverlay = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Overlay>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Overlay>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Overlay\n    className={cn(\n      \"fixed inset-0 z-50 bg-black/80  data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  />\n))\nAlertDialogOverlay.displayName = AlertDialogPrimitive.Overlay.displayName\n\nconst AlertDialogContent = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Content>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPortal>\n    <AlertDialogOverlay />\n    <AlertDialogPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"fixed left-[50%] top-[50%] z-50 grid w-full max-w-lg translate-x-[-50%] translate-y-[-50%] gap-4 border bg-background p-6 shadow-lg duration-200 data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[state=closed]:slide-out-to-left-1/2 data-[state=closed]:slide-out-to-top-[48%] data-[state=open]:slide-in-from-left-1/2 data-[state=open]:slide-in-from-top-[48%] sm:rounded-lg\",\n        className\n      )}\n      {...props}\n    />\n  </AlertDialogPortal>\n))\nAlertDialogContent.displayName = AlertDialogPrimitive.Content.displayName\n\nconst AlertDialogHeader = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col space-y-2 text-center sm:text-left\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogHeader.displayName = \"AlertDialogHeader\"\n\nconst AlertDialogFooter = ({\n  className,\n  ...props\n}: React.HTMLAttributes<HTMLDivElement>) => (\n  <div\n    className={cn(\n      \"flex flex-col-reverse sm:flex-row sm:justify-end sm:space-x-2\",\n      className\n    )}\n    {...props}\n  />\n)\nAlertDialogFooter.displayName = \"AlertDialogFooter\"\n\nconst AlertDialogTitle = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Title>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Title>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Title\n    ref={ref}\n    className={cn(\"text-lg font-semibold\", className)}\n    {...props}\n  />\n))\nAlertDialogTitle.displayName = AlertDialogPrimitive.Title.displayName\n\nconst AlertDialogDescription = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Description>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Description>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Description\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n))\nAlertDialogDescription.displayName =\n  AlertDialogPrimitive.Description.displayName\n\nconst AlertDialogAction = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Action>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Action>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Action\n    ref={ref}\n    className={cn(buttonVariants(), className)}\n    {...props}\n  />\n))\nAlertDialogAction.displayName = AlertDialogPrimitive.Action.displayName\n\nconst AlertDialogCancel = React.forwardRef<\n  React.ElementRef<typeof AlertDialogPrimitive.Cancel>,\n  React.ComponentPropsWithoutRef<typeof AlertDialogPrimitive.Cancel>\n>(({ className, ...props }, ref) => (\n  <AlertDialogPrimitive.Cancel\n    ref={ref}\n    className={cn(\n      buttonVariants({ variant: \"outline\" }),\n      \"mt-2 sm:mt-0\",\n      className\n    )}\n    {...props}\n  />\n))\nAlertDialogCancel.displayName = AlertDialogPrimitive.Cancel.displayName\n\nexport {\n  AlertDialog,\n  AlertDialogPortal,\n  AlertDialogOverlay,\n  AlertDialogTrigger,\n  AlertDialogContent,\n  AlertDialogHeader,\n  AlertDialogFooter,\n  AlertDialogTitle,\n  AlertDialogDescription,\n  AlertDialogAction,\n  AlertDialogCancel,\n}\n","size_bytes":4420},"client/src/components/ui/badge.tsx":{"content":"import * as React from \"react\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst badgeVariants = cva(\n  // Whitespace-nowrap: Badges should never wrap.\n  \"whitespace-nowrap inline-flex items-center rounded-md border px-2.5 py-0.5 text-xs font-semibold transition-colors focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2\" +\n  \" hover-elevate \" ,\n  {\n    variants: {\n      variant: {\n        default:\n          \"border-transparent bg-primary text-primary-foreground shadow-xs\",\n        secondary: \"border-transparent bg-secondary text-secondary-foreground\",\n        destructive:\n          \"border-transparent bg-destructive text-destructive-foreground shadow-xs\",\n\n        outline: \" border [border-color:var(--badge-outline)] shadow-xs\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  },\n)\n\nexport interface BadgeProps\n  extends React.HTMLAttributes<HTMLDivElement>,\n    VariantProps<typeof badgeVariants> {}\n\nfunction Badge({ className, variant, ...props }: BadgeProps) {\n  return (\n    <div className={cn(badgeVariants({ variant }), className)} {...props} />\n  );\n}\n\nexport { Badge, badgeVariants }\n","size_bytes":1202},"postcss.config.js":{"content":"export default {\n  plugins: {\n    tailwindcss: {},\n    autoprefixer: {},\n  },\n}\n","size_bytes":80},"client/src/pages/Landing.tsx":{"content":"import { Button } from \"@/components/ui/button\";\nimport { Card, CardContent } from \"@/components/ui/card\";\nimport { Leaf, Zap, Droplet, Map, Sparkles, Gift, TrendingUp } from \"lucide-react\";\n\nexport default function Landing() {\n  return (\n    <div className=\"min-h-screen bg-background\">\n      {/* Hero Section */}\n      <div className=\"relative overflow-hidden\">\n        <div className=\"absolute inset-0 bg-gradient-to-br from-primary/10 via-background to-background\"></div>\n        <div className=\"relative max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16 sm:py-24\">\n          <div className=\"text-center\">\n            <div className=\"flex items-center justify-center mb-6\">\n              <div className=\"flex items-center justify-center w-16 h-16 rounded-xl bg-primary shadow-lg\">\n                <Leaf className=\"w-10 h-10 text-primary-foreground\" />\n              </div>\n            </div>\n            <h1 className=\"text-4xl sm:text-5xl lg:text-6xl font-display font-bold mb-4\">\n              Green Intelligence\n            </h1>\n            <p className=\"text-xl sm:text-2xl text-muted-foreground mb-2 font-display\">\n              Code that saves carbon\n            </p>\n            <p className=\"text-base sm:text-lg text-muted-foreground mb-8 max-w-2xl mx-auto\">\n              AI-powered sustainability platform that predicts resource wastage and rewards you for eco-friendly choices\n            </p>\n            <div className=\"flex flex-col sm:flex-row gap-4 justify-center items-center\">\n              <Button size=\"lg\" asChild data-testid=\"button-get-started\" className=\"min-w-[200px]\">\n                <a href=\"/api/login\">Get Started</a>\n              </Button>\n              <Button size=\"lg\" variant=\"outline\" asChild className=\"min-w-[200px]\" data-testid=\"button-sign-in\">\n                <a href=\"/api/login\">Sign In</a>\n              </Button>\n            </div>\n          </div>\n        </div>\n      </div>\n\n      {/* Features Grid */}\n      <div className=\"max-w-7xl mx-auto px-4 sm:px-6 lg:px-8 py-16\">\n        <h2 className=\"text-3xl font-display font-bold text-center mb-12\">\n          Smart Features for a Sustainable Planet\n        </h2>\n        <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-6\">\n          <FeatureCard\n            icon={<Zap className=\"w-6 h-6\" />}\n            title=\"Energy Predictor\"\n            description=\"AI-powered analysis of electricity consumption with wastage forecasts and optimization tips\"\n          />\n          <FeatureCard\n            icon={<Droplet className=\"w-6 h-6\" />}\n            title=\"Water Tracker\"\n            description=\"Monitor daily water usage patterns and get personalized efficiency scores\"\n          />\n          <FeatureCard\n            icon={<Map className=\"w-6 h-6\" />}\n            title=\"Eco Routes\"\n            description=\"Find carbon-efficient routes with real-time emissions comparisons\"\n          />\n          <FeatureCard\n            icon={<Sparkles className=\"w-6 h-6\" />}\n            title=\"AI Advisor\"\n            description=\"Get personalized sustainability tips powered by advanced AI\"\n          />\n          <FeatureCard\n            icon={<Gift className=\"w-6 h-6\" />}\n            title=\"Rewards System\"\n            description=\"Earn points for eco-friendly choices and redeem for scratch cards & coupons\"\n          />\n          <FeatureCard\n            icon={<TrendingUp className=\"w-6 h-6\" />}\n            title=\"Progress Tracking\"\n            description=\"Visualize your environmental impact and celebrate sustainability milestones\"\n          />\n        </div>\n      </div>\n\n      {/* Call to Action */}\n      <div className=\"bg-primary/5 py-16\">\n        <div className=\"max-w-4xl mx-auto px-4 sm:px-6 lg:px-8 text-center\">\n          <h2 className=\"text-3xl font-display font-bold mb-4\">\n            Start Your Sustainability Journey Today\n          </h2>\n          <p className=\"text-lg text-muted-foreground mb-8\">\n            Join thousands of users making a positive impact on the planet while earning rewards\n          </p>\n          <Button size=\"lg\" asChild data-testid=\"button-cta-login\">\n            <a href=\"/api/login\">Join Now - It's Free</a>\n          </Button>\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction FeatureCard({ icon, title, description }: { icon: React.ReactNode; title: string; description: string }) {\n  return (\n    <Card className=\"hover-elevate\">\n      <CardContent className=\"p-6\">\n        <div className=\"flex items-center justify-center w-12 h-12 rounded-lg bg-primary/10 text-primary mb-4\">\n          {icon}\n        </div>\n        <h3 className=\"text-lg font-semibold mb-2\">{title}</h3>\n        <p className=\"text-sm text-muted-foreground\">{description}</p>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":4756},"client/src/pages/not-found.tsx":{"content":"import { Card, CardContent } from \"@/components/ui/card\";\nimport { AlertCircle } from \"lucide-react\";\n\nexport default function NotFound() {\n  return (\n    <div className=\"min-h-screen w-full flex items-center justify-center bg-gray-50\">\n      <Card className=\"w-full max-w-md mx-4\">\n        <CardContent className=\"pt-6\">\n          <div className=\"flex mb-4 gap-2\">\n            <AlertCircle className=\"h-8 w-8 text-red-500\" />\n            <h1 className=\"text-2xl font-bold text-gray-900\">404 Page Not Found</h1>\n          </div>\n\n          <p className=\"mt-4 text-sm text-gray-600\">\n            Did you forget to add the page to the router?\n          </p>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":711},"tailwind.config.ts":{"content":"import type { Config } from \"tailwindcss\";\n\nexport default {\n  darkMode: [\"class\"],\n  content: [\"./client/index.html\", \"./client/src/**/*.{js,jsx,ts,tsx}\"],\n  theme: {\n    extend: {\n      borderRadius: {\n        lg: \".5625rem\", /* 9px */\n        md: \".375rem\", /* 6px */\n        sm: \".1875rem\", /* 3px */\n      },\n      colors: {\n        // Flat / base colors (regular buttons)\n        background: \"hsl(var(--background) / <alpha-value>)\",\n        foreground: \"hsl(var(--foreground) / <alpha-value>)\",\n        border: \"hsl(var(--border) / <alpha-value>)\",\n        input: \"hsl(var(--input) / <alpha-value>)\",\n        card: {\n          DEFAULT: \"hsl(var(--card) / <alpha-value>)\",\n          foreground: \"hsl(var(--card-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--card-border) / <alpha-value>)\",\n        },\n        popover: {\n          DEFAULT: \"hsl(var(--popover) / <alpha-value>)\",\n          foreground: \"hsl(var(--popover-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--popover-border) / <alpha-value>)\",\n        },\n        primary: {\n          DEFAULT: \"hsl(var(--primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--primary-foreground) / <alpha-value>)\",\n          border: \"var(--primary-border)\",\n        },\n        secondary: {\n          DEFAULT: \"hsl(var(--secondary) / <alpha-value>)\",\n          foreground: \"hsl(var(--secondary-foreground) / <alpha-value>)\",\n          border: \"var(--secondary-border)\",\n        },\n        muted: {\n          DEFAULT: \"hsl(var(--muted) / <alpha-value>)\",\n          foreground: \"hsl(var(--muted-foreground) / <alpha-value>)\",\n          border: \"var(--muted-border)\",\n        },\n        accent: {\n          DEFAULT: \"hsl(var(--accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--accent-foreground) / <alpha-value>)\",\n          border: \"var(--accent-border)\",\n        },\n        destructive: {\n          DEFAULT: \"hsl(var(--destructive) / <alpha-value>)\",\n          foreground: \"hsl(var(--destructive-foreground) / <alpha-value>)\",\n          border: \"var(--destructive-border)\",\n        },\n        ring: \"hsl(var(--ring) / <alpha-value>)\",\n        chart: {\n          \"1\": \"hsl(var(--chart-1) / <alpha-value>)\",\n          \"2\": \"hsl(var(--chart-2) / <alpha-value>)\",\n          \"3\": \"hsl(var(--chart-3) / <alpha-value>)\",\n          \"4\": \"hsl(var(--chart-4) / <alpha-value>)\",\n          \"5\": \"hsl(var(--chart-5) / <alpha-value>)\",\n        },\n        sidebar: {\n          ring: \"hsl(var(--sidebar-ring) / <alpha-value>)\",\n          DEFAULT: \"hsl(var(--sidebar) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-foreground) / <alpha-value>)\",\n          border: \"hsl(var(--sidebar-border) / <alpha-value>)\",\n        },\n        \"sidebar-primary\": {\n          DEFAULT: \"hsl(var(--sidebar-primary) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-primary-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-primary-border)\",\n        },\n        \"sidebar-accent\": {\n          DEFAULT: \"hsl(var(--sidebar-accent) / <alpha-value>)\",\n          foreground: \"hsl(var(--sidebar-accent-foreground) / <alpha-value>)\",\n          border: \"var(--sidebar-accent-border)\"\n        },\n        status: {\n          online: \"rgb(34 197 94)\",\n          away: \"rgb(245 158 11)\",\n          busy: \"rgb(239 68 68)\",\n          offline: \"rgb(156 163 175)\",\n        },\n      },\n      fontFamily: {\n        sans: [\"Inter\", \"var(--font-sans)\"],\n        serif: [\"var(--font-serif)\"],\n        mono: [\"var(--font-mono)\"],\n        display: [\"Space Grotesk\", \"var(--font-sans)\"],\n      },\n      keyframes: {\n        \"accordion-down\": {\n          from: { height: \"0\" },\n          to: { height: \"var(--radix-accordion-content-height)\" },\n        },\n        \"accordion-up\": {\n          from: { height: \"var(--radix-accordion-content-height)\" },\n          to: { height: \"0\" },\n        },\n      },\n      animation: {\n        \"accordion-down\": \"accordion-down 0.2s ease-out\",\n        \"accordion-up\": \"accordion-up 0.2s ease-out\",\n      },\n    },\n  },\n  plugins: [require(\"tailwindcss-animate\"), require(\"@tailwindcss/typography\")],\n} satisfies Config;\n","size_bytes":4115},"client/src/components/ui/input-otp.tsx":{"content":"import * as React from \"react\"\nimport { OTPInput, OTPInputContext } from \"input-otp\"\nimport { Dot } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst InputOTP = React.forwardRef<\n  React.ElementRef<typeof OTPInput>,\n  React.ComponentPropsWithoutRef<typeof OTPInput>\n>(({ className, containerClassName, ...props }, ref) => (\n  <OTPInput\n    ref={ref}\n    containerClassName={cn(\n      \"flex items-center gap-2 has-[:disabled]:opacity-50\",\n      containerClassName\n    )}\n    className={cn(\"disabled:cursor-not-allowed\", className)}\n    {...props}\n  />\n))\nInputOTP.displayName = \"InputOTP\"\n\nconst InputOTPGroup = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"flex items-center\", className)} {...props} />\n))\nInputOTPGroup.displayName = \"InputOTPGroup\"\n\nconst InputOTPSlot = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\"> & { index: number }\n>(({ index, className, ...props }, ref) => {\n  const inputOTPContext = React.useContext(OTPInputContext)\n  const { char, hasFakeCaret, isActive } = inputOTPContext.slots[index]\n\n  return (\n    <div\n      ref={ref}\n      className={cn(\n        \"relative flex h-10 w-10 items-center justify-center border-y border-r border-input text-sm transition-all first:rounded-l-md first:border-l last:rounded-r-md\",\n        isActive && \"z-10 ring-2 ring-ring ring-offset-background\",\n        className\n      )}\n      {...props}\n    >\n      {char}\n      {hasFakeCaret && (\n        <div className=\"pointer-events-none absolute inset-0 flex items-center justify-center\">\n          <div className=\"h-4 w-px animate-caret-blink bg-foreground duration-1000\" />\n        </div>\n      )}\n    </div>\n  )\n})\nInputOTPSlot.displayName = \"InputOTPSlot\"\n\nconst InputOTPSeparator = React.forwardRef<\n  React.ElementRef<\"div\">,\n  React.ComponentPropsWithoutRef<\"div\">\n>(({ ...props }, ref) => (\n  <div ref={ref} role=\"separator\" {...props}>\n    <Dot />\n  </div>\n))\nInputOTPSeparator.displayName = \"InputOTPSeparator\"\n\nexport { InputOTP, InputOTPGroup, InputOTPSlot, InputOTPSeparator }\n","size_bytes":2154},"drizzle.config.ts":{"content":"import { defineConfig } from \"drizzle-kit\";\n\nif (!process.env.DATABASE_URL) {\n  throw new Error(\"DATABASE_URL, ensure the database is provisioned\");\n}\n\nexport default defineConfig({\n  out: \"./migrations\",\n  schema: \"./shared/schema.ts\",\n  dialect: \"postgresql\",\n  dbCredentials: {\n    url: process.env.DATABASE_URL,\n  },\n});\n","size_bytes":325},"client/src/pages/Advisor.tsx":{"content":"import { useState } from \"react\";\nimport { useMutation } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Input } from \"@/components/ui/input\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Avatar, AvatarFallback } from \"@/components/ui/avatar\";\nimport { Sparkles, Send, Lightbulb, Leaf, Droplet, Zap } from \"lucide-react\";\nimport { apiRequest } from \"@/lib/queryClient\";\nimport { isUnauthorizedError } from \"@/lib/authUtils\";\nimport { useAuth } from \"@/hooks/useAuth\";\n\ntype Message = {\n  role: \"user\" | \"assistant\";\n  content: string;\n};\n\nconst quickSuggestions = [\n  { icon: Zap, text: \"Reduce energy consumption\", color: \"chart-1\" },\n  { icon: Droplet, text: \"Save water at home\", color: \"chart-2\" },\n  { icon: Leaf, text: \"Eco-friendly products\", color: \"chart-1\" },\n  { icon: Lightbulb, text: \"Sustainable lifestyle tips\", color: \"chart-3\" },\n];\n\nexport default function Advisor() {\n  const { user } = useAuth();\n  const { toast } = useToast();\n  const [messages, setMessages] = useState<Message[]>([\n    {\n      role: \"assistant\",\n      content: \"Hello! I'm your AI Sustainability Advisor. I'm here to help you live a more eco-friendly lifestyle. Ask me anything about reducing your carbon footprint, saving energy, conserving water, or finding sustainable products!\",\n    },\n  ]);\n  const [input, setInput] = useState(\"\");\n\n  const chatMutation = useMutation({\n    mutationFn: async (message: string) => {\n      const response = await apiRequest(\"POST\", \"/api/advisor/chat\", { message });\n      return await response.json();\n    },\n    onSuccess: (data: any) => {\n      setMessages(prev => [...prev, { role: \"assistant\", content: data.response }]);\n    },\n    onError: (error: Error) => {\n      if (isUnauthorizedError(error)) {\n        toast({\n          title: \"Unauthorized\",\n          description: \"You are logged out. Logging in again...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: \"Error\",\n        description: \"Failed to get response. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const handleSend = () => {\n    if (!input.trim()) return;\n    \n    const userMessage = input.trim();\n    setMessages(prev => [...prev, { role: \"user\", content: userMessage }]);\n    setInput(\"\");\n    chatMutation.mutate(userMessage);\n  };\n\n  const handleSuggestionClick = (text: string) => {\n    setInput(text);\n  };\n\n  return (\n    <div className=\"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8 space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-display font-bold mb-2\">AI Sustainability Advisor</h1>\n        <p className=\"text-muted-foreground\">Get personalized eco-friendly recommendations powered by AI</p>\n      </div>\n\n      {/* Quick Suggestions */}\n      <div className=\"flex flex-wrap gap-2\">\n        {quickSuggestions.map((suggestion, index) => (\n          <Button\n            key={index}\n            variant=\"outline\"\n            size=\"sm\"\n            onClick={() => handleSuggestionClick(suggestion.text)}\n            className=\"gap-2\"\n            data-testid={`button-suggestion-${index}`}\n          >\n            <suggestion.icon className=\"w-4 h-4\" />\n            {suggestion.text}\n          </Button>\n        ))}\n      </div>\n\n      {/* Chat Messages */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Sparkles className=\"w-5 h-5\" />\n            Chat with AI Advisor\n          </CardTitle>\n        </CardHeader>\n        <CardContent>\n          <div className=\"space-y-4 mb-4 max-h-[500px] overflow-y-auto\">\n            {messages.map((message, index) => (\n              <div\n                key={index}\n                className={`flex gap-3 ${message.role === \"user\" ? \"justify-end\" : \"justify-start\"}`}\n              >\n                {message.role === \"assistant\" && (\n                  <Avatar className=\"w-8 h-8 bg-primary\">\n                    <AvatarFallback className=\"bg-primary text-primary-foreground\">\n                      <Sparkles className=\"w-4 h-4\" />\n                    </AvatarFallback>\n                  </Avatar>\n                )}\n                <div\n                  className={`max-w-[80%] rounded-lg p-4 ${\n                    message.role === \"user\"\n                      ? \"bg-primary text-primary-foreground\"\n                      : \"bg-muted\"\n                  }`}\n                  data-testid={`message-${message.role}-${index}`}\n                >\n                  <p className=\"text-sm whitespace-pre-wrap\">{message.content}</p>\n                </div>\n                {message.role === \"user\" && user && (\n                  <Avatar className=\"w-8 h-8\">\n                    <AvatarFallback>{user.firstName?.[0] || user.email?.[0] || \"U\"}</AvatarFallback>\n                  </Avatar>\n                )}\n              </div>\n            ))}\n            {chatMutation.isPending && (\n              <div className=\"flex gap-3 justify-start\">\n                <Avatar className=\"w-8 h-8 bg-primary\">\n                  <AvatarFallback className=\"bg-primary text-primary-foreground\">\n                    <Sparkles className=\"w-4 h-4\" />\n                  </AvatarFallback>\n                </Avatar>\n                <div className=\"bg-muted rounded-lg p-4\">\n                  <div className=\"flex gap-1\">\n                    <div className=\"w-2 h-2 bg-muted-foreground rounded-full animate-bounce\" style={{ animationDelay: \"0ms\" }}></div>\n                    <div className=\"w-2 h-2 bg-muted-foreground rounded-full animate-bounce\" style={{ animationDelay: \"150ms\" }}></div>\n                    <div className=\"w-2 h-2 bg-muted-foreground rounded-full animate-bounce\" style={{ animationDelay: \"300ms\" }}></div>\n                  </div>\n                </div>\n              </div>\n            )}\n          </div>\n\n          {/* Input */}\n          <form onSubmit={(e) => { e.preventDefault(); handleSend(); }} className=\"flex gap-2\">\n            <Input\n              placeholder=\"Ask me anything about sustainability...\"\n              value={input}\n              onChange={(e) => setInput(e.target.value)}\n              disabled={chatMutation.isPending}\n              data-testid=\"input-chat-message\"\n            />\n            <Button\n              type=\"submit\"\n              disabled={!input.trim() || chatMutation.isPending}\n              data-testid=\"button-send-message\"\n            >\n              <Send className=\"w-4 h-4\" />\n            </Button>\n          </form>\n        </CardContent>\n      </Card>\n    </div>\n  );\n}\n","size_bytes":6728},"client/src/components/ui/label.tsx":{"content":"import * as React from \"react\"\nimport * as LabelPrimitive from \"@radix-ui/react-label\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst labelVariants = cva(\n  \"text-sm font-medium leading-none peer-disabled:cursor-not-allowed peer-disabled:opacity-70\"\n)\n\nconst Label = React.forwardRef<\n  React.ElementRef<typeof LabelPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof LabelPrimitive.Root> &\n    VariantProps<typeof labelVariants>\n>(({ className, ...props }, ref) => (\n  <LabelPrimitive.Root\n    ref={ref}\n    className={cn(labelVariants(), className)}\n    {...props}\n  />\n))\nLabel.displayName = LabelPrimitive.Root.displayName\n\nexport { Label }\n","size_bytes":710},"client/src/components/ui/avatar.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as AvatarPrimitive from \"@radix-ui/react-avatar\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Avatar = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Root\n    ref={ref}\n    className={cn(`\n      after:content-[''] after:block after:absolute after:inset-0 after:rounded-full after:pointer-events-none after:border after:border-black/10 dark:after:border-white/10\n      relative flex h-10 w-10 shrink-0 overflow-hidden rounded-full`,\n      className\n    )}\n    {...props}\n  />\n))\nAvatar.displayName = AvatarPrimitive.Root.displayName\n\nconst AvatarImage = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Image>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Image>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Image\n    ref={ref}\n    className={cn(\"aspect-square h-full w-full\", className)}\n    {...props}\n  />\n))\nAvatarImage.displayName = AvatarPrimitive.Image.displayName\n\nconst AvatarFallback = React.forwardRef<\n  React.ElementRef<typeof AvatarPrimitive.Fallback>,\n  React.ComponentPropsWithoutRef<typeof AvatarPrimitive.Fallback>\n>(({ className, ...props }, ref) => (\n  <AvatarPrimitive.Fallback\n    ref={ref}\n    className={cn(\n      \"flex h-full w-full items-center justify-center rounded-full bg-muted\",\n      className\n    )}\n    {...props}\n  />\n))\nAvatarFallback.displayName = AvatarPrimitive.Fallback.displayName\n\nexport { Avatar, AvatarImage, AvatarFallback }\n","size_bytes":1592},"client/src/components/ui/carousel.tsx":{"content":"import * as React from \"react\"\nimport useEmblaCarousel, {\n  type UseEmblaCarouselType,\n} from \"embla-carousel-react\"\nimport { ArrowLeft, ArrowRight } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { Button } from \"@/components/ui/button\"\n\ntype CarouselApi = UseEmblaCarouselType[1]\ntype UseCarouselParameters = Parameters<typeof useEmblaCarousel>\ntype CarouselOptions = UseCarouselParameters[0]\ntype CarouselPlugin = UseCarouselParameters[1]\n\ntype CarouselProps = {\n  opts?: CarouselOptions\n  plugins?: CarouselPlugin\n  orientation?: \"horizontal\" | \"vertical\"\n  setApi?: (api: CarouselApi) => void\n}\n\ntype CarouselContextProps = {\n  carouselRef: ReturnType<typeof useEmblaCarousel>[0]\n  api: ReturnType<typeof useEmblaCarousel>[1]\n  scrollPrev: () => void\n  scrollNext: () => void\n  canScrollPrev: boolean\n  canScrollNext: boolean\n} & CarouselProps\n\nconst CarouselContext = React.createContext<CarouselContextProps | null>(null)\n\nfunction useCarousel() {\n  const context = React.useContext(CarouselContext)\n\n  if (!context) {\n    throw new Error(\"useCarousel must be used within a <Carousel />\")\n  }\n\n  return context\n}\n\nconst Carousel = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement> & CarouselProps\n>(\n  (\n    {\n      orientation = \"horizontal\",\n      opts,\n      setApi,\n      plugins,\n      className,\n      children,\n      ...props\n    },\n    ref\n  ) => {\n    const [carouselRef, api] = useEmblaCarousel(\n      {\n        ...opts,\n        axis: orientation === \"horizontal\" ? \"x\" : \"y\",\n      },\n      plugins\n    )\n    const [canScrollPrev, setCanScrollPrev] = React.useState(false)\n    const [canScrollNext, setCanScrollNext] = React.useState(false)\n\n    const onSelect = React.useCallback((api: CarouselApi) => {\n      if (!api) {\n        return\n      }\n\n      setCanScrollPrev(api.canScrollPrev())\n      setCanScrollNext(api.canScrollNext())\n    }, [])\n\n    const scrollPrev = React.useCallback(() => {\n      api?.scrollPrev()\n    }, [api])\n\n    const scrollNext = React.useCallback(() => {\n      api?.scrollNext()\n    }, [api])\n\n    const handleKeyDown = React.useCallback(\n      (event: React.KeyboardEvent<HTMLDivElement>) => {\n        if (event.key === \"ArrowLeft\") {\n          event.preventDefault()\n          scrollPrev()\n        } else if (event.key === \"ArrowRight\") {\n          event.preventDefault()\n          scrollNext()\n        }\n      },\n      [scrollPrev, scrollNext]\n    )\n\n    React.useEffect(() => {\n      if (!api || !setApi) {\n        return\n      }\n\n      setApi(api)\n    }, [api, setApi])\n\n    React.useEffect(() => {\n      if (!api) {\n        return\n      }\n\n      onSelect(api)\n      api.on(\"reInit\", onSelect)\n      api.on(\"select\", onSelect)\n\n      return () => {\n        api?.off(\"select\", onSelect)\n      }\n    }, [api, onSelect])\n\n    return (\n      <CarouselContext.Provider\n        value={{\n          carouselRef,\n          api: api,\n          opts,\n          orientation:\n            orientation || (opts?.axis === \"y\" ? \"vertical\" : \"horizontal\"),\n          scrollPrev,\n          scrollNext,\n          canScrollPrev,\n          canScrollNext,\n        }}\n      >\n        <div\n          ref={ref}\n          onKeyDownCapture={handleKeyDown}\n          className={cn(\"relative\", className)}\n          role=\"region\"\n          aria-roledescription=\"carousel\"\n          {...props}\n        >\n          {children}\n        </div>\n      </CarouselContext.Provider>\n    )\n  }\n)\nCarousel.displayName = \"Carousel\"\n\nconst CarouselContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { carouselRef, orientation } = useCarousel()\n\n  return (\n    <div ref={carouselRef} className=\"overflow-hidden\">\n      <div\n        ref={ref}\n        className={cn(\n          \"flex\",\n          orientation === \"horizontal\" ? \"-ml-4\" : \"-mt-4 flex-col\",\n          className\n        )}\n        {...props}\n      />\n    </div>\n  )\n})\nCarouselContent.displayName = \"CarouselContent\"\n\nconst CarouselItem = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => {\n  const { orientation } = useCarousel()\n\n  return (\n    <div\n      ref={ref}\n      role=\"group\"\n      aria-roledescription=\"slide\"\n      className={cn(\n        \"min-w-0 shrink-0 grow-0 basis-full\",\n        orientation === \"horizontal\" ? \"pl-4\" : \"pt-4\",\n        className\n      )}\n      {...props}\n    />\n  )\n})\nCarouselItem.displayName = \"CarouselItem\"\n\nconst CarouselPrevious = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollPrev, canScrollPrev } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute  h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-left-12 top-1/2 -translate-y-1/2\"\n          : \"-top-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollPrev}\n      onClick={scrollPrev}\n      {...props}\n    >\n      <ArrowLeft className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Previous slide</span>\n    </Button>\n  )\n})\nCarouselPrevious.displayName = \"CarouselPrevious\"\n\nconst CarouselNext = React.forwardRef<\n  HTMLButtonElement,\n  React.ComponentProps<typeof Button>\n>(({ className, variant = \"outline\", size = \"icon\", ...props }, ref) => {\n  const { orientation, scrollNext, canScrollNext } = useCarousel()\n\n  return (\n    <Button\n      ref={ref}\n      variant={variant}\n      size={size}\n      className={cn(\n        \"absolute h-8 w-8 rounded-full\",\n        orientation === \"horizontal\"\n          ? \"-right-12 top-1/2 -translate-y-1/2\"\n          : \"-bottom-12 left-1/2 -translate-x-1/2 rotate-90\",\n        className\n      )}\n      disabled={!canScrollNext}\n      onClick={scrollNext}\n      {...props}\n    >\n      <ArrowRight className=\"h-4 w-4\" />\n      <span className=\"sr-only\">Next slide</span>\n    </Button>\n  )\n})\nCarouselNext.displayName = \"CarouselNext\"\n\nexport {\n  type CarouselApi,\n  Carousel,\n  CarouselContent,\n  CarouselItem,\n  CarouselPrevious,\n  CarouselNext,\n}\n","size_bytes":6210},"client/src/components/ui/toaster.tsx":{"content":"import { useToast } from \"@/hooks/use-toast\"\nimport {\n  Toast,\n  ToastClose,\n  ToastDescription,\n  ToastProvider,\n  ToastTitle,\n  ToastViewport,\n} from \"@/components/ui/toast\"\n\nexport function Toaster() {\n  const { toasts } = useToast()\n\n  return (\n    <ToastProvider>\n      {toasts.map(function ({ id, title, description, action, ...props }) {\n        return (\n          <Toast key={id} {...props}>\n            <div className=\"grid gap-1\">\n              {title && <ToastTitle>{title}</ToastTitle>}\n              {description && (\n                <ToastDescription>{description}</ToastDescription>\n              )}\n            </div>\n            {action}\n            <ToastClose />\n          </Toast>\n        )\n      })}\n      <ToastViewport />\n    </ToastProvider>\n  )\n}\n","size_bytes":772},"server/index.ts":{"content":"import express, { type Request, Response, NextFunction } from \"express\";\nimport { registerRoutes } from \"./routes\";\nimport { setupVite, serveStatic, log } from \"./vite\";\n\nconst app = express();\n\ndeclare module 'http' {\n  interface IncomingMessage {\n    rawBody: unknown\n  }\n}\napp.use(express.json({\n  verify: (req, _res, buf) => {\n    req.rawBody = buf;\n  }\n}));\napp.use(express.urlencoded({ extended: false }));\n\napp.use((req, res, next) => {\n  const start = Date.now();\n  const path = req.path;\n  let capturedJsonResponse: Record<string, any> | undefined = undefined;\n\n  const originalResJson = res.json;\n  res.json = function (bodyJson, ...args) {\n    capturedJsonResponse = bodyJson;\n    return originalResJson.apply(res, [bodyJson, ...args]);\n  };\n\n  res.on(\"finish\", () => {\n    const duration = Date.now() - start;\n    if (path.startsWith(\"/api\")) {\n      let logLine = `${req.method} ${path} ${res.statusCode} in ${duration}ms`;\n      if (capturedJsonResponse) {\n        logLine += ` :: ${JSON.stringify(capturedJsonResponse)}`;\n      }\n\n      if (logLine.length > 80) {\n        logLine = logLine.slice(0, 79) + \"\";\n      }\n\n      log(logLine);\n    }\n  });\n\n  next();\n});\n\n(async () => {\n  const server = await registerRoutes(app);\n\n  app.use((err: any, _req: Request, res: Response, _next: NextFunction) => {\n    const status = err.status || err.statusCode || 500;\n    const message = err.message || \"Internal Server Error\";\n\n    res.status(status).json({ message });\n    throw err;\n  });\n\n  // importantly only setup vite in development and after\n  // setting up all the other routes so the catch-all route\n  // doesn't interfere with the other routes\n  if (app.get(\"env\") === \"development\") {\n    await setupVite(app, server);\n  } else {\n    serveStatic(app);\n  }\n\n  // ALWAYS serve the app on the port specified in the environment variable PORT\n  // Other ports are firewalled. Default to 5000 if not specified.\n  // this serves both the API and the client.\n  // It is the only port that is not firewalled.\n  const port = parseInt(process.env.PORT || '5000', 10);\n  server.listen({\n    port,\n    host: \"0.0.0.0\",\n    reusePort: true,\n  }, () => {\n    log(`serving on port ${port}`);\n  });\n})();\n","size_bytes":2210},"design_guidelines.md":{"content":"# Green Intelligence Platform - Design Guidelines\n\n## Design Approach\n**Reference-Based Strategy:** Drawing inspiration from Notion (dashboard organization), Strava (progress tracking), Duolingo (gamification), and Linear (clean data presentation). This creates a modern, achievement-focused sustainability platform that makes eco-friendly living engaging and rewarding.\n\n## Core Design Principles\n- **Achievement-First:** Gamification elements prominently displayed to drive engagement\n- **Data Clarity:** Complex environmental data presented through intuitive visualizations\n- **Progressive Disclosure:** Dense information revealed through expandable panels and tabs\n- **Trust & Credibility:** Clean, professional aesthetic reinforcing platform reliability\n\n## Typography System\n**Font Families:** Inter (UI/data) + Space Grotesk (headings/impact text)\n- Hero Headings: 3xl to 5xl, bold\n- Section Headers: xl to 2xl, semibold\n- Card Titles: lg, medium\n- Body Text: base, regular\n- Data/Metrics: lg to 2xl, bold (for numbers)\n- Labels/Captions: sm, medium\n\n## Layout System\n**Spacing Primitives:** Tailwind units of 2, 4, 6, 8, 12, 16, 20\n- Component padding: p-4 to p-8\n- Section spacing: py-12 to py-20\n- Card gaps: gap-4 to gap-6\n- Icon-text spacing: gap-2\n\n**Grid Structure:**\n- Dashboard: 12-column grid with 3-4 column cards on desktop, stack on mobile\n- Feature cards: grid-cols-1 md:grid-cols-2 lg:grid-cols-3\n- Stats panels: grid-cols-2 lg:grid-cols-4\n\n## Component Library\n\n### Authentication Pages\n- Centered card layout (max-w-md) on full-height page\n- Logo + tagline at top\n- Social login buttons (Google, GitHub) with icons from Heroicons\n- Email/password input fields with floating labels\n- Primary CTA button (large, rounded-lg)\n- Toggle between login/signup with subtle link\n\n### Home Dashboard\n**Layout:** Sidebar navigation (left, 64-72 wide) + Main content area\n- **Top Bar:** Welcome message, points badge (prominent), notification bell, profile avatar\n- **Social Feed:** Card-based posts (max-w-2xl centered), each showing: user avatar, name, achievement type, timestamp, impact stats (CO2 saved, points earned), like/share actions\n- **Quick Stats Row:** 4 metric cards showing total points, carbon saved, water saved, eco-routes taken\n\n### Energy Predictor\n- **Header:** Title + \"Analyze Usage\" CTA\n- **Input Section:** Month selector, manual bill entry OR \"Fetch from API\" button\n- **Prediction Display:** Large metric card showing predicted wastage percentage, trend graph (line chart), AI insights panel with bullet points\n- **Comparison View:** Side-by-side current vs. optimized usage bars\n\n### Water Tracker\n- **Daily Entry Form:** Date picker, liters used input, activity tags (shower, laundry, dishes)\n- **Weekly Overview:** 7-day bar chart with efficiency score\n- **Monthly Trends:** Line graph with annotations for high-usage days\n- **Tips Panel:** AI-generated conservation suggestions in expandable cards\n\n### Eco-Route Optimizer\n- **Input Panel:** Start/end location inputs, vehicle type selector\n- **Route Comparison:** 2-3 route cards showing: map thumbnail, distance, time, CO2 emissions (highlighted), points to earn\n- **Selection:** Radio buttons + \"Navigate with This Route\" primary button\n- **Impact Visualization:** Circular progress showing CO2 saved vs. standard route\n\n### AI Sustainability Advisor\n- **Chat Interface:** Messages left-aligned (user) and right-aligned (AI) with avatars\n- **Quick Actions:** Pill-shaped suggestion chips above input (\"Reduce energy\", \"Find eco-products\")\n- **Input Bar:** Text field + send button with microphone icon\n- **Insight Cards:** AI responses formatted as rich cards with icons, bullet points, and action buttons\n\n### Points & Rewards System\n**Points Display:** Persistent badge in top bar showing current points with sparkle animation on earn\n**Rewards Hub:**\n- **Tabs:** \"Scratch Cards\" | \"Discount Coupons\" | \"My Rewards\"\n- **Scratch Cards Grid:** 3-column grid, card design with \"mystery\" overlay, points cost badge, \"Scratch Now\" CTA\n- **Discount Coupons:** Larger cards with brand logos, discount percentage (prominent), validity dates, \"Claim\" button (disabled if locked)\n- **Special Events Banner:** Countdown timers for World Environment Day and App Festival Day at top\n\n### Progress Tracking\n- **Hero Stats:** Large metric cards (3-column) showing lifetime impact: Total CO2 saved, Water conserved, Points earned\n- **Timeline View:** Vertical timeline showing monthly achievements with icons and brief descriptions\n- **Charts Section:** Tabbed interface (Energy | Water | Routes) with interactive line/bar charts\n- **Leaderboard Panel:** Top 10 users with ranks, avatars, points (foster community engagement)\n\n### Social Sharing\n- **Share Modal:** Preview of achievement card, platform selection (Twitter, Facebook, LinkedIn icons), custom message input, \"Post to Community\" checkbox\n- **Achievement Cards:** Pre-designed cards with user stats, badge graphics, platform branding\n\n## Navigation Structure\n**Sidebar Menu Items:** (with Heroicons)\n- Home (newspaper icon)\n- Energy Predictor (lightning-bolt icon)\n- Water Tracker (beaker icon)\n- Eco Routes (map icon)\n- AI Advisor (sparkles icon)\n- Rewards (gift icon)\n- Progress (chart-bar icon)\n- Profile (user-circle icon)\n\n**Mobile:** Bottom tab bar (5 key items) + hamburger menu for secondary items\n\n## Visual Elements\n\n### Icons\n**Library:** Heroicons (outline for navigation, solid for status indicators)\n- Use consistently across platform (16px to 24px)\n- Environmental icons: leaf, globe, water-drop, lightning-bolt\n- Gamification: trophy, star, gift, badge-check\n\n### Cards & Containers\n- Rounded corners: rounded-lg to rounded-xl\n- Subtle shadows: shadow-sm to shadow-md\n- Bordered cards with hover lift effect (transition-transform)\n- Dashboard cards: White/neutral background, organized content hierarchy\n\n### Data Visualizations\n- Line charts for trends (energy/water over time)\n- Bar charts for comparisons (daily/weekly usage)\n- Circular progress for goals and targets\n- Heatmaps for urban optimization dashboards (if implemented)\n- Use chart.js or recharts library\n\n### Badges & Indicators\n- Points badges: pill-shaped, medium size, positioned top-right in cards\n- Status indicators: Small circular dots (online, active streaks)\n- Achievement badges: Medal/trophy icons with tier levels (bronze, silver, gold)\n\n### Forms & Inputs\n- Input fields: Bordered, rounded-md, adequate padding (p-3)\n- Focus states: Ring effect (ring-2)\n- Labels: Above inputs, text-sm semibold\n- Helper text: Below inputs, text-xs\n- Error states: Red accent on border + error message\n\n### Buttons\n- Primary: Large, rounded-lg, prominent (for main actions)\n- Secondary: Outlined style (for alternative actions)\n- Text buttons: For tertiary actions\n- Icon buttons: For quick actions (like, share, delete)\n- All buttons: Smooth hover transitions, scale on press\n\n## Images Section\n**Hero Image:** No traditional hero - Dashboard opens directly with action-focused layout\n\n**Strategic Image Placement:**\n1. **Rewards Section:** Product images for scratch card items and coupon brands (rectangular cards, rounded corners)\n2. **Achievement Posts:** User-generated environmental action photos in social feed (square thumbnails, 400x400)\n3. **Empty States:** Friendly illustrations for \"No data yet\" screens (centered, max 300px width)\n4. **AI Advisor:** Small icon/avatar representing AI assistant (48x48, rounded-full)\n5. **Eco-Route Maps:** Simplified map thumbnails in route comparison cards (16:9 aspect ratio)\n\n**Image Treatment:** All images use rounded-lg, object-cover, with subtle shadow-sm\n\n## Special Interactions\n- **Scratch Card Reveal:** Overlay fades on click, reveal animation for prize\n- **Points Animation:** Confetti burst or sparkle effect when points are earned\n- **Progress Milestones:** Celebratory modal when user hits savings targets\n- **Real-time Updates:** Subtle pulse animation on dashboard cards when new data arrives\n- **Smooth Transitions:** Page transitions, expandable panels use ease-in-out timing\n\n## Accessibility Features\n- Clear focus indicators on all interactive elements\n- Sufficient contrast ratios for text (WCAG AA minimum)\n- Screen reader labels for icons and charts\n- Keyboard navigation support throughout\n- Loading states with descriptive text (\"Analyzing your usage...\")\n\n## Responsive Behavior\n- Desktop (lg+): Full sidebar, multi-column grids, side-by-side comparisons\n- Tablet (md): Collapsible sidebar, 2-column grids\n- Mobile: Bottom navigation, single-column stacks, full-width cards, condensed stats\n\nThis design creates a comprehensive, engaging sustainability platform that balances data-driven insights with gamification, making eco-friendly living both measurable and rewarding.","size_bytes":8770},"client/src/App.tsx":{"content":"import { Switch, Route } from \"wouter\";\nimport { queryClient } from \"./lib/queryClient\";\nimport { QueryClientProvider } from \"@tanstack/react-query\";\nimport { Toaster } from \"@/components/ui/toaster\";\nimport { TooltipProvider } from \"@/components/ui/tooltip\";\nimport { SidebarProvider, SidebarTrigger, SidebarInset } from \"@/components/ui/sidebar\";\nimport { AppSidebar } from \"@/components/AppSidebar\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport NotFound from \"@/pages/not-found\";\nimport Landing from \"@/pages/Landing\";\nimport Home from \"@/pages/Home\";\nimport Energy from \"@/pages/Energy\";\nimport Water from \"@/pages/Water\";\nimport Routes from \"@/pages/Routes\";\nimport Advisor from \"@/pages/Advisor\";\nimport Rewards from \"@/pages/Rewards\";\nimport Progress from \"@/pages/Progress\";\nimport Leaderboard from \"@/pages/Leaderboard\";\n\nfunction Router() {\n  const { isAuthenticated, isLoading } = useAuth();\n\n  return (\n    <Switch>\n      {isLoading || !isAuthenticated ? (\n        <Route path=\"/\" component={Landing} />\n      ) : (\n        <>\n          <Route path=\"/\" component={Home} />\n          <Route path=\"/energy\" component={Energy} />\n          <Route path=\"/water\" component={Water} />\n          <Route path=\"/routes\" component={Routes} />\n          <Route path=\"/advisor\" component={Advisor} />\n          <Route path=\"/rewards\" component={Rewards} />\n          <Route path=\"/progress\" component={Progress} />\n          <Route path=\"/leaderboard\" component={Leaderboard} />\n        </>\n      )}\n      <Route component={NotFound} />\n    </Switch>\n  );\n}\n\nfunction AppContent() {\n  const { isAuthenticated, isLoading } = useAuth();\n\n  const sidebarStyle = {\n    \"--sidebar-width\": \"16rem\",\n    \"--sidebar-width-icon\": \"3rem\",\n  } as React.CSSProperties;\n\n  if (isLoading || !isAuthenticated) {\n    return (\n      <>\n        <Router />\n        <Toaster />\n      </>\n    );\n  }\n\n  return (\n    <SidebarProvider style={sidebarStyle}>\n      <div className=\"flex h-screen w-full\">\n        <AppSidebar />\n        <SidebarInset className=\"flex flex-col flex-1 overflow-hidden\">\n          <header className=\"flex items-center justify-between p-4 border-b bg-background sticky top-0 z-10\">\n            <SidebarTrigger data-testid=\"button-sidebar-toggle\" />\n          </header>\n          <main className=\"flex-1 overflow-y-auto\">\n            <Router />\n          </main>\n        </SidebarInset>\n      </div>\n      <Toaster />\n    </SidebarProvider>\n  );\n}\n\nexport default function App() {\n  return (\n    <QueryClientProvider client={queryClient}>\n      <TooltipProvider>\n        <AppContent />\n      </TooltipProvider>\n    </QueryClientProvider>\n  );\n}\n","size_bytes":2651},"client/src/lib/utils.ts":{"content":"import { clsx, type ClassValue } from \"clsx\"\nimport { twMerge } from \"tailwind-merge\"\n\nexport function cn(...inputs: ClassValue[]) {\n  return twMerge(clsx(inputs))\n}\n","size_bytes":166},"shared/schema.ts":{"content":"import { sql } from 'drizzle-orm';\nimport {\n  index,\n  uniqueIndex,\n  jsonb,\n  pgTable,\n  timestamp,\n  varchar,\n  text,\n  integer,\n  real,\n  boolean,\n} from \"drizzle-orm/pg-core\";\nimport { relations } from \"drizzle-orm\";\nimport { createInsertSchema } from \"drizzle-zod\";\nimport { z } from \"zod\";\n\n// Session storage table - required for Replit Auth\nexport const sessions = pgTable(\n  \"sessions\",\n  {\n    sid: varchar(\"sid\").primaryKey(),\n    sess: jsonb(\"sess\").notNull(),\n    expire: timestamp(\"expire\").notNull(),\n  },\n  (table) => [index(\"IDX_session_expire\").on(table.expire)],\n);\n\n// User storage table - required for Replit Auth\nexport const users = pgTable(\"users\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  email: varchar(\"email\").unique(),\n  firstName: varchar(\"first_name\"),\n  lastName: varchar(\"last_name\"),\n  profileImageUrl: varchar(\"profile_image_url\"),\n  points: integer(\"points\").notNull().default(0),\n  totalCarbonSaved: real(\"total_carbon_saved\").notNull().default(0),\n  totalWaterSaved: real(\"total_water_saved\").notNull().default(0),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n  updatedAt: timestamp(\"updated_at\").defaultNow(),\n});\n\nexport type UpsertUser = typeof users.$inferInsert;\nexport type User = typeof users.$inferSelect;\n\n// Posts - social feed for sharing sustainability achievements\nexport const posts = pgTable(\"posts\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  content: text(\"content\").notNull(),\n  achievementType: varchar(\"achievement_type\").notNull(), // \"energy\", \"water\", \"route\", \"general\"\n  carbonSaved: real(\"carbon_saved\"),\n  waterSaved: real(\"water_saved\"),\n  pointsEarned: integer(\"points_earned\"),\n  likes: integer(\"likes\").notNull().default(0),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const insertPostSchema = createInsertSchema(posts).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type InsertPost = z.infer<typeof insertPostSchema>;\nexport type Post = typeof posts.$inferSelect;\n\n// Energy consumption records\nexport const energyRecords = pgTable(\"energy_records\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  month: varchar(\"month\").notNull(), // \"2025-01\"\n  billAmount: real(\"bill_amount\").notNull(),\n  consumption: real(\"consumption\").notNull(), // kWh\n  predictedWastage: real(\"predicted_wastage\"),\n  wastagePercentage: real(\"wastage_percentage\"),\n  aiInsights: text(\"ai_insights\"),\n  pointsEarned: integer(\"points_earned\").notNull().default(0),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const insertEnergyRecordSchema = createInsertSchema(energyRecords).omit({\n  id: true,\n  createdAt: true,\n  predictedWastage: true,\n  wastagePercentage: true,\n  aiInsights: true,\n});\n\nexport type InsertEnergyRecord = z.infer<typeof insertEnergyRecordSchema>;\nexport type EnergyRecord = typeof energyRecords.$inferSelect;\n\n// Water consumption records\nexport const waterRecords = pgTable(\"water_records\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  month: varchar(\"month\").notNull(), // \"2025-01\"\n  billAmount: real(\"bill_amount\").notNull(),\n  consumption: real(\"consumption\").notNull(), // liters\n  efficiencyScore: integer(\"efficiency_score\"), // 0-100\n  aiInsights: text(\"ai_insights\"),\n  pointsEarned: integer(\"points_earned\").notNull().default(0),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const insertWaterRecordSchema = createInsertSchema(waterRecords).omit({\n  id: true,\n  createdAt: true,\n  efficiencyScore: true,\n  aiInsights: true,\n});\n\nexport type InsertWaterRecord = z.infer<typeof insertWaterRecordSchema>;\nexport type WaterRecord = typeof waterRecords.$inferSelect;\n\n// Eco routes taken by users\nexport const ecoRoutes = pgTable(\"eco_routes\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  startLocation: varchar(\"start_location\").notNull(),\n  endLocation: varchar(\"end_location\").notNull(),\n  distance: real(\"distance\").notNull(), // km\n  carbonSaved: real(\"carbon_saved\").notNull(), // kg CO2\n  pointsEarned: integer(\"points_earned\").notNull().default(0),\n  routeType: varchar(\"route_type\").notNull(), // \"eco\", \"standard\"\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const insertEcoRouteSchema = createInsertSchema(ecoRoutes).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type InsertEcoRoute = z.infer<typeof insertEcoRouteSchema>;\nexport type EcoRoute = typeof ecoRoutes.$inferSelect;\n\n// Scratch cards available to users\nexport const scratchCards = pgTable(\"scratch_cards\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: varchar(\"name\").notNull(),\n  description: text(\"description\").notNull(),\n  category: varchar(\"category\").notNull(), // \"home_decor\", \"personal_essentials\"\n  pointsCost: integer(\"points_cost\").notNull(),\n  imageUrl: varchar(\"image_url\"),\n  isActive: boolean(\"is_active\").notNull().default(true),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const insertScratchCardSchema = createInsertSchema(scratchCards).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type InsertScratchCard = z.infer<typeof insertScratchCardSchema>;\nexport type ScratchCard = typeof scratchCards.$inferSelect;\n\n// User scratch card redemptions\nexport const userScratchCards = pgTable(\"user_scratch_cards\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  scratchCardId: varchar(\"scratch_card_id\").notNull().references(() => scratchCards.id),\n  isScratched: boolean(\"is_scratched\").notNull().default(false),\n  prize: varchar(\"prize\"),\n  redeemedAt: timestamp(\"redeemed_at\").defaultNow(),\n});\n\nexport const insertUserScratchCardSchema = createInsertSchema(userScratchCards).omit({\n  id: true,\n  redeemedAt: true,\n});\n\nexport type InsertUserScratchCard = z.infer<typeof insertUserScratchCardSchema>;\nexport type UserScratchCard = typeof userScratchCards.$inferSelect;\n\n// Discount coupons\nexport const coupons = pgTable(\"coupons\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  name: varchar(\"name\").notNull(),\n  description: text(\"description\").notNull(),\n  discountPercentage: integer(\"discount_percentage\").notNull(),\n  brandName: varchar(\"brand_name\").notNull(),\n  category: varchar(\"category\").notNull(), // \"products\", \"courses\"\n  pointsCost: integer(\"points_cost\").notNull(),\n  validUntil: timestamp(\"valid_until\").notNull(),\n  eventType: varchar(\"event_type\"), // \"world_environment_day\", \"app_festival\"\n  isActive: boolean(\"is_active\").notNull().default(true),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const insertCouponSchema = createInsertSchema(coupons).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type InsertCoupon = z.infer<typeof insertCouponSchema>;\nexport type Coupon = typeof coupons.$inferSelect;\n\n// User coupon redemptions\nexport const userCoupons = pgTable(\"user_coupons\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  couponId: varchar(\"coupon_id\").notNull().references(() => coupons.id),\n  isUsed: boolean(\"is_used\").notNull().default(false),\n  redeemedAt: timestamp(\"redeemed_at\").defaultNow(),\n});\n\nexport const insertUserCouponSchema = createInsertSchema(userCoupons).omit({\n  id: true,\n  redeemedAt: true,\n});\n\nexport type InsertUserCoupon = z.infer<typeof insertUserCouponSchema>;\nexport type UserCoupon = typeof userCoupons.$inferSelect;\n\n// Post likes\nexport const postLikes = pgTable(\"post_likes\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  postId: varchar(\"post_id\").notNull().references(() => posts.id, { onDelete: \"cascade\" }),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n}, (table) => [\n  uniqueIndex(\"unique_post_likes_user_post\").on(table.userId, table.postId),\n]);\n\nexport const insertPostLikeSchema = createInsertSchema(postLikes).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type InsertPostLike = z.infer<typeof insertPostLikeSchema>;\nexport type PostLike = typeof postLikes.$inferSelect;\n\n// Post comments\nexport const postComments = pgTable(\"post_comments\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  userId: varchar(\"user_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  postId: varchar(\"post_id\").notNull().references(() => posts.id, { onDelete: \"cascade\" }),\n  content: text(\"content\").notNull(),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const insertPostCommentSchema = createInsertSchema(postComments).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type InsertPostComment = z.infer<typeof insertPostCommentSchema>;\nexport type PostComment = typeof postComments.$inferSelect;\n\n// User follows\nexport const userFollows = pgTable(\"user_follows\", {\n  id: varchar(\"id\").primaryKey().default(sql`gen_random_uuid()`),\n  followerId: varchar(\"follower_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  followingId: varchar(\"following_id\").notNull().references(() => users.id, { onDelete: \"cascade\" }),\n  createdAt: timestamp(\"created_at\").defaultNow(),\n});\n\nexport const insertUserFollowSchema = createInsertSchema(userFollows).omit({\n  id: true,\n  createdAt: true,\n});\n\nexport type InsertUserFollow = z.infer<typeof insertUserFollowSchema>;\nexport type UserFollow = typeof userFollows.$inferSelect;\n\n// Relations\nexport const usersRelations = relations(users, ({ many }) => ({\n  posts: many(posts),\n  energyRecords: many(energyRecords),\n  waterRecords: many(waterRecords),\n  ecoRoutes: many(ecoRoutes),\n  userScratchCards: many(userScratchCards),\n  userCoupons: many(userCoupons),\n}));\n\nexport const postsRelations = relations(posts, ({ one, many }) => ({\n  user: one(users, {\n    fields: [posts.userId],\n    references: [users.id],\n  }),\n  postLikes: many(postLikes),\n  postComments: many(postComments),\n}));\n\nexport const energyRecordsRelations = relations(energyRecords, ({ one }) => ({\n  user: one(users, {\n    fields: [energyRecords.userId],\n    references: [users.id],\n  }),\n}));\n\nexport const waterRecordsRelations = relations(waterRecords, ({ one }) => ({\n  user: one(users, {\n    fields: [waterRecords.userId],\n    references: [users.id],\n  }),\n}));\n\nexport const ecoRoutesRelations = relations(ecoRoutes, ({ one }) => ({\n  user: one(users, {\n    fields: [ecoRoutes.userId],\n    references: [users.id],\n  }),\n}));\n\nexport const userScratchCardsRelations = relations(userScratchCards, ({ one }) => ({\n  user: one(users, {\n    fields: [userScratchCards.userId],\n    references: [users.id],\n  }),\n  scratchCard: one(scratchCards, {\n    fields: [userScratchCards.scratchCardId],\n    references: [scratchCards.id],\n  }),\n}));\n\nexport const userCouponsRelations = relations(userCoupons, ({ one }) => ({\n  user: one(users, {\n    fields: [userCoupons.userId],\n    references: [users.id],\n  }),\n  coupon: one(coupons, {\n    fields: [userCoupons.couponId],\n    references: [coupons.id],\n  }),\n}));\n\nexport const postLikesRelations = relations(postLikes, ({ one }) => ({\n  user: one(users, {\n    fields: [postLikes.userId],\n    references: [users.id],\n  }),\n  post: one(posts, {\n    fields: [postLikes.postId],\n    references: [posts.id],\n  }),\n}));\n\nexport const postCommentsRelations = relations(postComments, ({ one }) => ({\n  user: one(users, {\n    fields: [postComments.userId],\n    references: [users.id],\n  }),\n  post: one(posts, {\n    fields: [postComments.postId],\n    references: [posts.id],\n  }),\n}));\n\nexport const userFollowsRelations = relations(userFollows, ({ one }) => ({\n  follower: one(users, {\n    fields: [userFollows.followerId],\n    references: [users.id],\n  }),\n  following: one(users, {\n    fields: [userFollows.followingId],\n    references: [users.id],\n  }),\n}));\n","size_bytes":12322},"client/src/components/ui/checkbox.tsx":{"content":"import * as React from \"react\"\nimport * as CheckboxPrimitive from \"@radix-ui/react-checkbox\"\nimport { Check } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Checkbox = React.forwardRef<\n  React.ElementRef<typeof CheckboxPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof CheckboxPrimitive.Root>\n>(({ className, ...props }, ref) => (\n  <CheckboxPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"peer h-4 w-4 shrink-0 rounded-sm border border-primary ring-offset-background focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=checked]:text-primary-foreground\",\n      className\n    )}\n    {...props}\n  >\n    <CheckboxPrimitive.Indicator\n      className={cn(\"flex items-center justify-center text-current\")}\n    >\n      <Check className=\"h-4 w-4\" />\n    </CheckboxPrimitive.Indicator>\n  </CheckboxPrimitive.Root>\n))\nCheckbox.displayName = CheckboxPrimitive.Root.displayName\n\nexport { Checkbox }\n","size_bytes":1056},"client/src/components/ui/toast.tsx":{"content":"import * as React from \"react\"\nimport * as ToastPrimitives from \"@radix-ui/react-toast\"\nimport { cva, type VariantProps } from \"class-variance-authority\"\nimport { X } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst ToastProvider = ToastPrimitives.Provider\n\nconst ToastViewport = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Viewport>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Viewport>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Viewport\n    ref={ref}\n    className={cn(\n      \"fixed top-0 z-[100] flex max-h-screen w-full flex-col-reverse p-4 sm:bottom-0 sm:right-0 sm:top-auto sm:flex-col md:max-w-[420px]\",\n      className\n    )}\n    {...props}\n  />\n))\nToastViewport.displayName = ToastPrimitives.Viewport.displayName\n\nconst toastVariants = cva(\n  \"group pointer-events-auto relative flex w-full items-center justify-between space-x-4 overflow-hidden rounded-md border p-6 pr-8 shadow-lg transition-all data-[swipe=cancel]:translate-x-0 data-[swipe=end]:translate-x-[var(--radix-toast-swipe-end-x)] data-[swipe=move]:translate-x-[var(--radix-toast-swipe-move-x)] data-[swipe=move]:transition-none data-[state=open]:animate-in data-[state=closed]:animate-out data-[swipe=end]:animate-out data-[state=closed]:fade-out-80 data-[state=closed]:slide-out-to-right-full data-[state=open]:slide-in-from-top-full data-[state=open]:sm:slide-in-from-bottom-full\",\n  {\n    variants: {\n      variant: {\n        default: \"border bg-background text-foreground\",\n        destructive:\n          \"destructive group border-destructive bg-destructive text-destructive-foreground\",\n      },\n    },\n    defaultVariants: {\n      variant: \"default\",\n    },\n  }\n)\n\nconst Toast = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Root> &\n    VariantProps<typeof toastVariants>\n>(({ className, variant, ...props }, ref) => {\n  return (\n    <ToastPrimitives.Root\n      ref={ref}\n      className={cn(toastVariants({ variant }), className)}\n      {...props}\n    />\n  )\n})\nToast.displayName = ToastPrimitives.Root.displayName\n\nconst ToastAction = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Action>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Action>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Action\n    ref={ref}\n    className={cn(\n      \"inline-flex h-8 shrink-0 items-center justify-center rounded-md border bg-transparent px-3 text-sm font-medium ring-offset-background transition-colors hover:bg-secondary focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:pointer-events-none disabled:opacity-50 group-[.destructive]:border-muted/40 group-[.destructive]:hover:border-destructive/30 group-[.destructive]:hover:bg-destructive group-[.destructive]:hover:text-destructive-foreground group-[.destructive]:focus:ring-destructive\",\n      className\n    )}\n    {...props}\n  />\n))\nToastAction.displayName = ToastPrimitives.Action.displayName\n\nconst ToastClose = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Close>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Close>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Close\n    ref={ref}\n    className={cn(\n      \"absolute right-2 top-2 rounded-md p-1 text-foreground/50 opacity-0 transition-opacity hover:text-foreground focus:opacity-100 focus:outline-none focus:ring-2 group-hover:opacity-100 group-[.destructive]:text-red-300 group-[.destructive]:hover:text-red-50 group-[.destructive]:focus:ring-red-400 group-[.destructive]:focus:ring-offset-red-600\",\n      className\n    )}\n    toast-close=\"\"\n    {...props}\n  >\n    <X className=\"h-4 w-4\" />\n  </ToastPrimitives.Close>\n))\nToastClose.displayName = ToastPrimitives.Close.displayName\n\nconst ToastTitle = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Title>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Title>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Title\n    ref={ref}\n    className={cn(\"text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nToastTitle.displayName = ToastPrimitives.Title.displayName\n\nconst ToastDescription = React.forwardRef<\n  React.ElementRef<typeof ToastPrimitives.Description>,\n  React.ComponentPropsWithoutRef<typeof ToastPrimitives.Description>\n>(({ className, ...props }, ref) => (\n  <ToastPrimitives.Description\n    ref={ref}\n    className={cn(\"text-sm opacity-90\", className)}\n    {...props}\n  />\n))\nToastDescription.displayName = ToastPrimitives.Description.displayName\n\ntype ToastProps = React.ComponentPropsWithoutRef<typeof Toast>\n\ntype ToastActionElement = React.ReactElement<typeof ToastAction>\n\nexport {\n  type ToastProps,\n  type ToastActionElement,\n  ToastProvider,\n  ToastViewport,\n  Toast,\n  ToastTitle,\n  ToastDescription,\n  ToastClose,\n  ToastAction,\n}\n","size_bytes":4845},"client/src/components/ui/toggle-group.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ToggleGroupPrimitive from \"@radix-ui/react-toggle-group\"\nimport { type VariantProps } from \"class-variance-authority\"\n\nimport { cn } from \"@/lib/utils\"\nimport { toggleVariants } from \"@/components/ui/toggle\"\n\nconst ToggleGroupContext = React.createContext<\n  VariantProps<typeof toggleVariants>\n>({\n  size: \"default\",\n  variant: \"default\",\n})\n\nconst ToggleGroup = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Root> &\n    VariantProps<typeof toggleVariants>\n>(({ className, variant, size, children, ...props }, ref) => (\n  <ToggleGroupPrimitive.Root\n    ref={ref}\n    className={cn(\"flex items-center justify-center gap-1\", className)}\n    {...props}\n  >\n    <ToggleGroupContext.Provider value={{ variant, size }}>\n      {children}\n    </ToggleGroupContext.Provider>\n  </ToggleGroupPrimitive.Root>\n))\n\nToggleGroup.displayName = ToggleGroupPrimitive.Root.displayName\n\nconst ToggleGroupItem = React.forwardRef<\n  React.ElementRef<typeof ToggleGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof ToggleGroupPrimitive.Item> &\n    VariantProps<typeof toggleVariants>\n>(({ className, children, variant, size, ...props }, ref) => {\n  const context = React.useContext(ToggleGroupContext)\n\n  return (\n    <ToggleGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        toggleVariants({\n          variant: context.variant || variant,\n          size: context.size || size,\n        }),\n        className\n      )}\n      {...props}\n    >\n      {children}\n    </ToggleGroupPrimitive.Item>\n  )\n})\n\nToggleGroupItem.displayName = ToggleGroupPrimitive.Item.displayName\n\nexport { ToggleGroup, ToggleGroupItem }\n","size_bytes":1753},"server/replitAuth.ts":{"content":"// Referenced from javascript_log_in_with_replit blueprint\nimport * as client from \"openid-client\";\nimport { Strategy, type VerifyFunction } from \"openid-client/passport\";\n\nimport passport from \"passport\";\nimport session from \"express-session\";\nimport type { Express, RequestHandler } from \"express\";\nimport memoize from \"memoizee\";\nimport connectPg from \"connect-pg-simple\";\nimport { storage } from \"./storage\";\n\nconst getOidcConfig = memoize(\n  async () => {\n    return await client.discovery(\n      new URL(process.env.ISSUER_URL ?? \"https://replit.com/oidc\"),\n      process.env.REPL_ID!\n    );\n  },\n  { maxAge: 3600 * 1000 }\n);\n\nexport function getSession() {\n  const sessionTtl = 7 * 24 * 60 * 60 * 1000; // 1 week\n  const pgStore = connectPg(session);\n  const sessionStore = new pgStore({\n    conString: process.env.DATABASE_URL,\n    createTableIfMissing: false,\n    ttl: sessionTtl,\n    tableName: \"sessions\",\n  });\n  return session({\n    secret: process.env.SESSION_SECRET!,\n    store: sessionStore,\n    resave: false,\n    saveUninitialized: false,\n    cookie: {\n      httpOnly: true,\n      secure: true,\n      maxAge: sessionTtl,\n    },\n  });\n}\n\nfunction updateUserSession(\n  user: any,\n  tokens: client.TokenEndpointResponse & client.TokenEndpointResponseHelpers\n) {\n  user.claims = tokens.claims();\n  user.access_token = tokens.access_token;\n  user.refresh_token = tokens.refresh_token;\n  user.expires_at = user.claims?.exp;\n}\n\nasync function upsertUser(\n  claims: any,\n) {\n  await storage.upsertUser({\n    id: claims[\"sub\"],\n    email: claims[\"email\"],\n    firstName: claims[\"first_name\"],\n    lastName: claims[\"last_name\"],\n    profileImageUrl: claims[\"profile_image_url\"],\n  });\n}\n\nexport async function setupAuth(app: Express) {\n  app.set(\"trust proxy\", 1);\n  app.use(getSession());\n  app.use(passport.initialize());\n  app.use(passport.session());\n\n  const config = await getOidcConfig();\n\n  const verify: VerifyFunction = async (\n    tokens: client.TokenEndpointResponse & client.TokenEndpointResponseHelpers,\n    verified: passport.AuthenticateCallback\n  ) => {\n    const user = {};\n    updateUserSession(user, tokens);\n    await upsertUser(tokens.claims());\n    verified(null, user);\n  };\n\n  // Keep track of registered strategies\n  const registeredStrategies = new Set<string>();\n\n  // Helper function to ensure strategy exists for a domain\n  const ensureStrategy = (domain: string) => {\n    const strategyName = `replitauth:${domain}`;\n    if (!registeredStrategies.has(strategyName)) {\n      const strategy = new Strategy(\n        {\n          name: strategyName,\n          config,\n          scope: \"openid email profile offline_access\",\n          callbackURL: `https://${domain}/api/callback`,\n        },\n        verify,\n      );\n      passport.use(strategy);\n      registeredStrategies.add(strategyName);\n    }\n  };\n\n  passport.serializeUser((user: Express.User, cb) => cb(null, user));\n  passport.deserializeUser((user: Express.User, cb) => cb(null, user));\n\n  app.get(\"/api/login\", (req, res, next) => {\n    ensureStrategy(req.hostname);\n    passport.authenticate(`replitauth:${req.hostname}`, {\n      prompt: \"login consent\",\n      scope: [\"openid\", \"email\", \"profile\", \"offline_access\"],\n    })(req, res, next);\n  });\n\n  app.get(\"/api/callback\", (req, res, next) => {\n    ensureStrategy(req.hostname);\n    passport.authenticate(`replitauth:${req.hostname}`, {\n      successReturnToOrRedirect: \"/\",\n      failureRedirect: \"/api/login\",\n    })(req, res, next);\n  });\n\n  app.get(\"/api/logout\", (req, res) => {\n    req.logout(() => {\n      res.redirect(\n        client.buildEndSessionUrl(config, {\n          client_id: process.env.REPL_ID!,\n          post_logout_redirect_uri: `${req.protocol}://${req.hostname}`,\n        }).href\n      );\n    });\n  });\n}\n\nexport const isAuthenticated: RequestHandler = async (req, res, next) => {\n  const user = req.user as any;\n\n  if (!req.isAuthenticated() || !user.expires_at) {\n    return res.status(401).json({ message: \"Unauthorized\" });\n  }\n\n  const now = Math.floor(Date.now() / 1000);\n  if (now <= user.expires_at) {\n    return next();\n  }\n\n  const refreshToken = user.refresh_token;\n  if (!refreshToken) {\n    res.status(401).json({ message: \"Unauthorized\" });\n    return;\n  }\n\n  try {\n    const config = await getOidcConfig();\n    const tokenResponse = await client.refreshTokenGrant(config, refreshToken);\n    updateUserSession(user, tokenResponse);\n    return next();\n  } catch (error) {\n    res.status(401).json({ message: \"Unauthorized\" });\n    return;\n  }\n};\n","size_bytes":4531},"replit.md":{"content":"# Green Intelligence Platform\n\n## Overview\n\nGreen Intelligence is an AI-powered sustainability platform that gamifies eco-friendly behavior through resource usage prediction and rewards. The platform enables users to track energy consumption, water usage, and eco-friendly transportation routes while earning points redeemable for scratch cards and coupons. Built with a modern React frontend and Express backend, it leverages OpenAI's GPT-5 for intelligent analysis of consumption patterns and personalized sustainability recommendations.\n\n## User Preferences\n\nPreferred communication style: Simple, everyday language.\n\n## System Architecture\n\n### Frontend Architecture\n\n**Framework & Tooling**\n- React 18 with TypeScript for type-safe component development\n- Vite as the build tool and development server for fast HMR\n- Wouter for lightweight client-side routing\n- TanStack Query (React Query) for server state management with aggressive caching (staleTime: Infinity)\n\n**UI Component System**\n- shadcn/ui components built on Radix UI primitives\n- Tailwind CSS for utility-first styling with custom design tokens\n- Custom theme system with CSS variables for light/dark mode support\n- Typography: Inter for UI/data elements, Space Grotesk for headings\n- Recharts for data visualization (line charts, bar charts)\n\n**State Management Pattern**\n- Server state: TanStack Query with centralized queryClient\n- Authentication state: Custom useAuth hook consuming user query\n- No global client state library - relying on React Query cache and component state\n\n**Design System**\n- Achievement-first approach with prominent gamification elements\n- Progressive disclosure pattern for dense information\n- Reference-based design inspired by Notion (dashboard), Strava (progress), Duolingo (gamification), Linear (data presentation)\n- Responsive grid system: 12-column on desktop, stacked on mobile\n\n### Backend Architecture\n\n**Server Framework**\n- Express.js with TypeScript running on Node.js\n- ESM module system throughout\n- Custom middleware for request logging with timing and response capture\n\n**Authentication & Sessions**\n- OpenID Connect (OIDC) integration with Replit Auth\n- Passport.js strategy for authentication flow\n- Session management via express-session with PostgreSQL storage (connect-pg-simple)\n- 7-day session TTL with secure, httpOnly cookies\n\n**API Design**\n- RESTful endpoints under `/api` namespace\n- Consistent error handling with 401 redirects for unauthorized requests\n- Request body validation using Zod schemas derived from Drizzle tables\n- JSON response format with captured logging\n\n**AI Integration (OpenAI)**\n- GPT-5 model for energy/water consumption analysis\n- Structured JSON responses for predictive wastage calculations\n- AI Sustainability Advisor chatbot for personalized eco-tips\n- System prompts engineered for practical, actionable insights\n\n### Data Storage\n\n**Database**\n- PostgreSQL via Neon serverless driver with WebSocket support\n- Drizzle ORM for type-safe database operations\n- Schema-first approach with Drizzle-Zod integration for validation\n\n**Data Models**\n- `users`: Core user profile with points, carbon saved, water saved metrics\n- `posts`: Social feed for sharing sustainability achievements\n- `energyRecords`: Monthly electricity consumption with AI-analyzed wastage\n- `waterRecords`: Monthly water usage tracking with conservation tips\n- `ecoRoutes`: Transportation route comparisons with carbon impact\n- `scratchCards` / `userScratchCards`: Redeemable rewards system\n- `coupons` / `userCoupons`: Brand partnership discount system\n- `sessions`: Server-side session storage for authentication\n\n**Storage Layer Pattern**\n- Repository pattern implemented in `server/storage.ts`\n- IStorage interface defines all data operations\n- Encapsulates Drizzle queries behind clean async methods\n- User points and environmental metrics updated atomically\n\n### External Dependencies\n\n**Third-Party Services**\n- **Neon Database**: Serverless PostgreSQL hosting with connection pooling\n- **OpenAI API**: GPT-5 for consumption analysis and conversational AI advisor\n- **Replit Auth**: OIDC-based authentication provider (issuer: replit.com/oidc)\n\n**Key Libraries**\n- **@neondatabase/serverless**: PostgreSQL driver optimized for serverless with ws WebSocket polyfill\n- **drizzle-orm & drizzle-kit**: Type-safe ORM with migration tooling\n- **openid-client**: Standards-compliant OIDC client\n- **@tanstack/react-query**: Declarative data fetching and caching\n- **react-hook-form + @hookform/resolvers**: Form state management with Zod validation\n- **recharts**: Composable charting library for consumption visualizations\n- **lucide-react**: Icon system\n\n**Development Tools**\n- **@replit/vite-plugin-***: Replit-specific development enhancements (cartographer, dev-banner, runtime-error-modal)\n- **tsx**: TypeScript execution for development server\n- **esbuild**: Production build bundling for server code\n\n**Environment Variables Required**\n- `DATABASE_URL`: Neon PostgreSQL connection string\n- `OPENAI_API_KEY`: OpenAI API authentication\n- `SESSION_SECRET`: Session encryption key\n- `REPL_ID`: Replit workspace identifier for OIDC\n- `ISSUER_URL`: OIDC issuer endpoint (defaults to https://replit.com/oidc)","size_bytes":5234},"server/routes.ts":{"content":"// Referenced from javascript_log_in_with_replit blueprint\nimport type { Express } from \"express\";\nimport { createServer, type Server } from \"http\";\nimport { storage } from \"./storage\";\nimport { setupAuth, isAuthenticated } from \"./replitAuth\";\nimport { analyzeEnergyUsage, analyzeWaterUsage, chatWithAdvisor } from \"./openai\";\nimport { insertPostSchema, insertEnergyRecordSchema, insertWaterRecordSchema, insertEcoRouteSchema, insertPostCommentSchema } from \"@shared/schema\";\n\n// Helper function to check seasonal coupon availability\nfunction checkSeasonalAvailability(eventType: string, now: Date): boolean {\n  const month = now.getMonth() + 1; // 1-12\n  const day = now.getDate();\n  \n  // World Environment Day: June 5 (available June 1-10)\n  if (eventType === 'world_environment_day') {\n    return month === 6 && day >= 1 && day <= 10;\n  }\n  \n  // App Festival Day: December 31 (available December 25-31)\n  if (eventType === 'app_festival') {\n    return month === 12 && day >= 25 && day <= 31;\n  }\n  \n  return true; // Non-seasonal coupons are always available\n}\n\nexport async function registerRoutes(app: Express): Promise<Server> {\n  // Auth middleware\n  await setupAuth(app);\n\n  // Auth routes\n  app.get('/api/auth/user', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const user = await storage.getUser(userId);\n      res.json(user);\n    } catch (error) {\n      console.error(\"Error fetching user:\", error);\n      res.status(500).json({ message: \"Failed to fetch user\" });\n    }\n  });\n\n  // Posts routes\n  app.get('/api/posts', isAuthenticated, async (req: any, res) => {\n    try {\n      const posts = await storage.getAllPosts();\n      res.json(posts);\n    } catch (error) {\n      console.error(\"Error fetching posts:\", error);\n      res.status(500).json({ message: \"Failed to fetch posts\" });\n    }\n  });\n\n  app.post('/api/posts', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const postData = insertPostSchema.parse({ ...req.body, userId });\n      const post = await storage.createPost(postData);\n      res.json(post);\n    } catch (error) {\n      console.error(\"Error creating post:\", error);\n      res.status(400).json({ message: \"Failed to create post\" });\n    }\n  });\n\n  // Social features - Post likes\n  app.post('/api/posts/:postId/like', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { postId } = req.params;\n      \n      const hasLiked = await storage.hasUserLikedPost(userId, postId);\n      if (hasLiked) {\n        await storage.unlikePost(userId, postId);\n        res.json({ liked: false });\n      } else {\n        await storage.likePost(userId, postId);\n        res.json({ liked: true });\n      }\n    } catch (error) {\n      console.error(\"Error toggling like:\", error);\n      res.status(500).json({ message: \"Failed to toggle like\" });\n    }\n  });\n\n  app.get('/api/posts/:postId/likes', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { postId } = req.params;\n      \n      const count = await storage.getPostLikeCount(postId);\n      const hasLiked = await storage.hasUserLikedPost(userId, postId);\n      \n      res.json({ count, hasLiked });\n    } catch (error) {\n      console.error(\"Error fetching like data:\", error);\n      res.status(500).json({ message: \"Failed to fetch like data\" });\n    }\n  });\n\n  // Social features - Post comments\n  app.post('/api/posts/:postId/comments', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { postId } = req.params;\n      \n      const commentData = insertPostCommentSchema.parse({\n        userId,\n        postId,\n        content: req.body.content,\n      });\n      \n      const comment = await storage.createComment(commentData);\n      res.json(comment);\n    } catch (error) {\n      console.error(\"Error creating comment:\", error);\n      res.status(400).json({ message: \"Failed to create comment\" });\n    }\n  });\n\n  app.get('/api/posts/:postId/comments', isAuthenticated, async (req: any, res) => {\n    try {\n      const { postId } = req.params;\n      const comments = await storage.getPostComments(postId);\n      res.json(comments);\n    } catch (error) {\n      console.error(\"Error fetching comments:\", error);\n      res.status(500).json({ message: \"Failed to fetch comments\" });\n    }\n  });\n\n  // Social features - User follows\n  app.post('/api/users/:userId/follow', isAuthenticated, async (req: any, res) => {\n    try {\n      const followerId = req.user.claims.sub;\n      const { userId: followingId } = req.params;\n      \n      if (followerId === followingId) {\n        return res.status(400).json({ message: \"Cannot follow yourself\" });\n      }\n      \n      const isFollowing = await storage.isFollowing(followerId, followingId);\n      if (isFollowing) {\n        await storage.unfollowUser(followerId, followingId);\n        res.json({ following: false });\n      } else {\n        await storage.followUser(followerId, followingId);\n        res.json({ following: true });\n      }\n    } catch (error) {\n      console.error(\"Error toggling follow:\", error);\n      res.status(500).json({ message: \"Failed to toggle follow\" });\n    }\n  });\n\n  app.get('/api/users/:userId/follow-stats', isAuthenticated, async (req: any, res) => {\n    try {\n      const currentUserId = req.user.claims.sub;\n      const { userId } = req.params;\n      \n      const [followerCount, followingCount, isFollowing] = await Promise.all([\n        storage.getFollowerCount(userId),\n        storage.getFollowingCount(userId),\n        storage.isFollowing(currentUserId, userId),\n      ]);\n      \n      res.json({ followerCount, followingCount, isFollowing });\n    } catch (error) {\n      console.error(\"Error fetching follow stats:\", error);\n      res.status(500).json({ message: \"Failed to fetch follow stats\" });\n    }\n  });\n\n  // Energy routes\n  app.get('/api/energy', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const records = await storage.getUserEnergyRecords(userId);\n      res.json(records);\n    } catch (error) {\n      console.error(\"Error fetching energy records:\", error);\n      res.status(500).json({ message: \"Failed to fetch energy records\" });\n    }\n  });\n\n  app.post('/api/energy/analyze', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const data = insertEnergyRecordSchema.parse({ ...req.body, userId });\n      \n      // AI analysis\n      const analysis = await analyzeEnergyUsage({\n        month: data.month,\n        billAmount: data.billAmount,\n        consumption: data.consumption,\n      });\n\n      // Calculate points: lower bill = more points\n      // Base points: 10, bonus points for low consumption\n      const avgConsumption = 900; // kWh per month average\n      const percentageBelow = ((avgConsumption - data.consumption) / avgConsumption) * 100;\n      const pointsEarned = Math.max(5, Math.round(10 + percentageBelow * 0.5));\n\n      const record = await storage.createEnergyRecord({\n        ...data,\n        predictedWastage: analysis.predictedWastage,\n        wastagePercentage: analysis.wastagePercentage,\n        aiInsights: analysis.insights,\n        pointsEarned,\n      });\n\n      // Update user points\n      await storage.updateUserPoints(userId, pointsEarned);\n\n      res.json(record);\n    } catch (error) {\n      console.error(\"Error analyzing energy:\", error);\n      res.status(400).json({ message: \"Failed to analyze energy data\" });\n    }\n  });\n\n  // Water routes\n  app.get('/api/water', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const records = await storage.getUserWaterRecords(userId);\n      res.json(records);\n    } catch (error) {\n      console.error(\"Error fetching water records:\", error);\n      res.status(500).json({ message: \"Failed to fetch water records\" });\n    }\n  });\n\n  app.post('/api/water/analyze', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const data = insertWaterRecordSchema.parse({ ...req.body, userId });\n      \n      // AI analysis\n      const analysis = await analyzeWaterUsage({\n        month: data.month,\n        billAmount: data.billAmount,\n        consumption: data.consumption,\n      });\n\n      // Calculate points based on efficiency score\n      const pointsEarned = Math.round(analysis.efficiencyScore / 5);\n\n      // Calculate water saved (compared to average)\n      const avgConsumption = 18000; // liters per month\n      const waterSaved = Math.max(0, avgConsumption - data.consumption);\n\n      const record = await storage.createWaterRecord({\n        ...data,\n        efficiencyScore: analysis.efficiencyScore,\n        aiInsights: analysis.insights,\n        pointsEarned,\n      });\n\n      // Update user points and water saved\n      await storage.updateUserPoints(userId, pointsEarned, 0, waterSaved);\n\n      res.json(record);\n    } catch (error) {\n      console.error(\"Error analyzing water:\", error);\n      res.status(400).json({ message: \"Failed to analyze water data\" });\n    }\n  });\n\n  // Routes routes\n  app.get('/api/routes', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const routes = await storage.getUserEcoRoutes(userId);\n      res.json(routes);\n    } catch (error) {\n      console.error(\"Error fetching routes:\", error);\n      res.status(500).json({ message: \"Failed to fetch routes\" });\n    }\n  });\n\n  app.post('/api/routes/calculate', isAuthenticated, async (req: any, res) => {\n    try {\n      const { startLocation, endLocation } = req.body;\n      \n      if (!startLocation || !endLocation) {\n        return res.status(400).json({ message: \"Start and end locations are required\" });\n      }\n\n      const { calculateEcoRoutes } = await import('./mapbox');\n      const routes = await calculateEcoRoutes(startLocation, endLocation);\n      \n      res.json({ routes });\n    } catch (error) {\n      console.error(\"Error calculating routes:\", error);\n      res.status(400).json({ message: \"Failed to calculate routes\" });\n    }\n  });\n\n  app.post('/api/routes', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const data = insertEcoRouteSchema.parse({ ...req.body, userId });\n      \n      const route = await storage.createEcoRoute(data);\n\n      // Update user points and carbon saved\n      await storage.updateUserPoints(userId, data.pointsEarned, data.carbonSaved);\n\n      res.json(route);\n    } catch (error) {\n      console.error(\"Error creating route:\", error);\n      res.status(400).json({ message: \"Failed to create route\" });\n    }\n  });\n\n  // AI Advisor routes\n  app.post('/api/advisor/chat', isAuthenticated, async (req: any, res) => {\n    try {\n      const { message } = req.body;\n      \n      if (!message || typeof message !== 'string') {\n        return res.status(400).json({ message: \"Message is required\" });\n      }\n\n      const response = await chatWithAdvisor(message);\n      res.json({ response });\n    } catch (error) {\n      console.error(\"Error in advisor chat:\", error);\n      res.status(500).json({ message: \"Failed to get advisor response\" });\n    }\n  });\n\n  // Rewards routes - Scratch Cards\n  app.get('/api/rewards/scratch-cards', isAuthenticated, async (req: any, res) => {\n    try {\n      const cards = await storage.getAllScratchCards();\n      res.json(cards);\n    } catch (error) {\n      console.error(\"Error fetching scratch cards:\", error);\n      res.status(500).json({ message: \"Failed to fetch scratch cards\" });\n    }\n  });\n\n  app.get('/api/rewards/my-scratch-cards', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const cards = await storage.getUserScratchCards(userId);\n      res.json(cards);\n    } catch (error) {\n      console.error(\"Error fetching user scratch cards:\", error);\n      res.status(500).json({ message: \"Failed to fetch user scratch cards\" });\n    }\n  });\n\n  app.post('/api/rewards/redeem-scratch-card', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { scratchCardId } = req.body;\n\n      const user = await storage.getUser(userId);\n      const cards = await storage.getAllScratchCards();\n      const card = cards.find(c => c.id === scratchCardId);\n\n      if (!card) {\n        return res.status(404).json({ message: \"Scratch card not found\" });\n      }\n\n      if (!user || user.points < card.pointsCost) {\n        return res.status(400).json({ message: \"Insufficient points\" });\n      }\n\n      // Deduct points\n      await storage.updateUserPoints(userId, -card.pointsCost);\n\n      // Create user scratch card\n      const userCard = await storage.createUserScratchCard({\n        userId,\n        scratchCardId,\n        isScratched: false,\n      });\n\n      res.json(userCard);\n    } catch (error) {\n      console.error(\"Error redeeming scratch card:\", error);\n      res.status(500).json({ message: \"Failed to redeem scratch card\" });\n    }\n  });\n\n  app.post('/api/rewards/scratch', isAuthenticated, async (req: any, res) => {\n    try {\n      const { userCardId } = req.body;\n\n      // Generate random prize\n      const prizes = [\n        \"10% off eco-friendly cleaning products\",\n        \"15% off bamboo toothbrushes\",\n        \"Free reusable shopping bag\",\n        \"20% off organic cotton towels\",\n        \"$5 gift card for sustainable products\",\n      ];\n      const prize = prizes[Math.floor(Math.random() * prizes.length)];\n\n      await storage.updateScratchCard(userCardId, prize);\n\n      res.json({ prize });\n    } catch (error) {\n      console.error(\"Error scratching card:\", error);\n      res.status(500).json({ message: \"Failed to scratch card\" });\n    }\n  });\n\n  // Rewards routes - Coupons\n  app.get('/api/rewards/coupons', isAuthenticated, async (req: any, res) => {\n    try {\n      const coupons = await storage.getAllCoupons();\n      const now = new Date();\n      \n      // Add availability status to each coupon\n      const couponsWithAvailability = coupons.map(coupon => ({\n        ...coupon,\n        isAvailable: coupon.eventType ? checkSeasonalAvailability(coupon.eventType, now) : true,\n        availabilityMessage: coupon.eventType \n          ? (coupon.eventType === 'world_environment_day' \n              ? 'Available June 1-10 (World Environment Day)' \n              : 'Available December 25-31 (App Festival Day)')\n          : null\n      }));\n      \n      res.json(couponsWithAvailability);\n    } catch (error) {\n      console.error(\"Error fetching coupons:\", error);\n      res.status(500).json({ message: \"Failed to fetch coupons\" });\n    }\n  });\n\n  app.get('/api/rewards/my-coupons', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const coupons = await storage.getUserCoupons(userId);\n      res.json(coupons);\n    } catch (error) {\n      console.error(\"Error fetching user coupons:\", error);\n      res.status(500).json({ message: \"Failed to fetch user coupons\" });\n    }\n  });\n\n  app.post('/api/rewards/redeem-coupon', isAuthenticated, async (req: any, res) => {\n    try {\n      const userId = req.user.claims.sub;\n      const { couponId } = req.body;\n\n      const user = await storage.getUser(userId);\n      const allCoupons = await storage.getAllCoupons();\n      const coupon = allCoupons.find(c => c.id === couponId);\n\n      if (!coupon) {\n        return res.status(404).json({ message: \"Coupon not found\" });\n      }\n\n      // Check seasonal availability for special event coupons\n      const now = new Date();\n      if (coupon.eventType) {\n        const isAvailable = checkSeasonalAvailability(coupon.eventType, now);\n        if (!isAvailable) {\n          return res.status(400).json({ \n            message: `This coupon is only available during ${coupon.eventType === 'world_environment_day' ? 'World Environment Day (June 5)' : 'App Festival Day (December 31)'}` \n          });\n        }\n      }\n\n      // Check if coupon is still valid\n      if (coupon.validUntil && new Date(coupon.validUntil) < now) {\n        return res.status(400).json({ message: \"This coupon has expired\" });\n      }\n\n      if (!user || user.points < coupon.pointsCost) {\n        return res.status(400).json({ message: \"Insufficient points\" });\n      }\n\n      // Deduct points\n      await storage.updateUserPoints(userId, -coupon.pointsCost);\n\n      // Generate unique coupon code\n      const couponCode = `ECO-${Date.now().toString(36).toUpperCase()}-${Math.random().toString(36).substr(2, 5).toUpperCase()}`;\n\n      // Create user coupon\n      const userCoupon = await storage.createUserCoupon({\n        userId,\n        couponId,\n        isUsed: false,\n      });\n\n      res.json(userCoupon);\n    } catch (error) {\n      console.error(\"Error redeeming coupon:\", error);\n      res.status(500).json({ message: \"Failed to redeem coupon\" });\n    }\n  });\n\n  // Leaderboard routes\n  app.get('/api/leaderboard', isAuthenticated, async (req: any, res) => {\n    try {\n      const leaderboard = await storage.getLeaderboard();\n      res.json(leaderboard);\n    } catch (error) {\n      console.error(\"Error fetching leaderboard:\", error);\n      res.status(500).json({ message: \"Failed to fetch leaderboard\" });\n    }\n  });\n\n  const httpServer = createServer(app);\n  return httpServer;\n}\n","size_bytes":17457},"client/src/pages/Routes.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useForm } from \"react-hook-form\";\nimport { zodResolver } from \"@hookform/resolvers/zod\";\nimport { z } from \"zod\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Form, FormControl, FormField, FormItem, FormLabel, FormMessage } from \"@/components/ui/form\";\nimport { Input } from \"@/components/ui/input\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Map, Leaf, Clock, Navigation, AlertCircle, Car, Bike, PersonStanding } from \"lucide-react\";\nimport type { EcoRoute } from \"@shared/schema\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { isUnauthorizedError } from \"@/lib/authUtils\";\n\nconst formSchema = z.object({\n  startLocation: z.string().min(1, \"Start location is required\"),\n  endLocation: z.string().min(1, \"End location is required\"),\n});\n\ntype RouteOption = {\n  mode: 'driving' | 'cycling' | 'walking';\n  distance: number;\n  duration: number;\n  carbonEmissions: number;\n  carbonSaved: number;\n};\n\nexport default function Routes() {\n  const { toast } = useToast();\n  const [calculatedRoutes, setCalculatedRoutes] = useState<RouteOption[]>([]);\n  \n  const form = useForm<z.infer<typeof formSchema>>({\n    resolver: zodResolver(formSchema),\n    defaultValues: {\n      startLocation: \"\",\n      endLocation: \"\",\n    },\n  });\n\n  const { data: routes, isLoading: routesLoading } = useQuery<EcoRoute[]>({\n    queryKey: [\"/api/routes\"],\n  });\n\n  const calculateMutation = useMutation({\n    mutationFn: async (values: z.infer<typeof formSchema>) => {\n      const res = await apiRequest(\"POST\", \"/api/routes/calculate\", values);\n      return await res.json();\n    },\n    onSuccess: (data: any) => {\n      if (data.routes) {\n        setCalculatedRoutes(data.routes);\n      }\n      toast({\n        title: \"Routes Calculated!\",\n        description: \"Your eco-friendly route options are ready.\",\n      });\n    },\n    onError: (error: Error) => {\n      if (isUnauthorizedError(error)) {\n        toast({\n          title: \"Unauthorized\",\n          description: \"You are logged out. Logging in again...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: \"Error\",\n        description: \"Failed to calculate routes. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const selectRouteMutation = useMutation({\n    mutationFn: async (data: { startLocation: string; endLocation: string; distance: number; carbonSaved: number; routeType: string; pointsEarned: number }) => {\n      return await apiRequest(\"POST\", \"/api/routes\", data);\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/routes\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/auth/user\"] });\n      setCalculatedRoutes([]);\n      form.reset();\n      toast({\n        title: \"Route Selected!\",\n        description: \"Points have been credited to your account.\",\n      });\n    },\n    onError: (error: Error) => {\n      if (isUnauthorizedError(error)) {\n        toast({\n          title: \"Unauthorized\",\n          description: \"You are logged out. Logging in again...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: \"Error\",\n        description: \"Failed to save route. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const latestRoutes = routes?.slice(-3) || [];\n\n  return (\n    <div className=\"max-w-7xl mx-auto p-4 sm:p-6 lg:p-8 space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-display font-bold mb-2\">Eco-Route Optimizer</h1>\n        <p className=\"text-muted-foreground\">Find carbon-efficient routes and earn points for sustainable travel</p>\n      </div>\n\n      {/* Route Calculator */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"flex items-center gap-2\">\n            <Map className=\"w-5 h-5\" />\n            Calculate Your Route\n          </CardTitle>\n          <CardDescription>Enter your start and end locations to find eco-friendly routes</CardDescription>\n        </CardHeader>\n        <CardContent>\n          <Form {...form}>\n            <form onSubmit={form.handleSubmit((values) => calculateMutation.mutate(values))} className=\"space-y-4\">\n              <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                <FormField\n                  control={form.control}\n                  name=\"startLocation\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>Start Location</FormLabel>\n                      <FormControl>\n                        <Input placeholder=\"123 Main St, City\" {...field} data-testid=\"input-start-location\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n                <FormField\n                  control={form.control}\n                  name=\"endLocation\"\n                  render={({ field }) => (\n                    <FormItem>\n                      <FormLabel>End Location</FormLabel>\n                      <FormControl>\n                        <Input placeholder=\"456 Oak Ave, City\" {...field} data-testid=\"input-end-location\" />\n                      </FormControl>\n                      <FormMessage />\n                    </FormItem>\n                  )}\n                />\n              </div>\n              <Button\n                type=\"submit\"\n                disabled={calculateMutation.isPending}\n                className=\"w-full md:w-auto\"\n                data-testid=\"button-calculate-route\"\n              >\n                {calculateMutation.isPending ? \"Calculating...\" : \"Find Routes\"}\n              </Button>\n            </form>\n          </Form>\n        </CardContent>\n      </Card>\n\n      {/* Calculated Route Options */}\n      {calculatedRoutes.length > 0 && (\n        <div>\n          <h2 className=\"text-xl font-semibold mb-4\">Route Options</h2>\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            {calculatedRoutes.map((option, index) => {\n              const icons = {\n                driving: Car,\n                cycling: Bike,\n                walking: PersonStanding,\n              };\n              const Icon = icons[option.mode];\n              const modeColors = {\n                driving: \"text-orange-500\",\n                cycling: \"text-green-500\",\n                walking: \"text-blue-500\",\n              };\n              \n              return (\n                <Card key={index} className=\"hover-elevate\" data-testid={`card-option-${option.mode}`}>\n                  <CardHeader>\n                    <div className=\"flex items-center justify-between\">\n                      <CardTitle className=\"text-lg capitalize flex items-center gap-2\">\n                        <Icon className={`w-5 h-5 ${modeColors[option.mode]}`} />\n                        {option.mode}\n                      </CardTitle>\n                      {option.carbonSaved > 0 && (\n                        <Badge variant=\"default\">\n                          <Leaf className=\"w-3 h-3 mr-1\" />\n                          Eco\n                        </Badge>\n                      )}\n                    </div>\n                  </CardHeader>\n                  <CardContent className=\"space-y-3\">\n                    <div className=\"flex items-center justify-between text-sm\">\n                      <span className=\"text-muted-foreground\">Distance</span>\n                      <span className=\"font-medium\">{option.distance.toFixed(1)} km</span>\n                    </div>\n                    <div className=\"flex items-center justify-between text-sm\">\n                      <span className=\"text-muted-foreground flex items-center gap-1\">\n                        <Clock className=\"w-3 h-3\" />\n                        Duration\n                      </span>\n                      <span className=\"font-medium\">{Math.round(option.duration / 60)} min</span>\n                    </div>\n                    <div className=\"flex items-center justify-between text-sm\">\n                      <span className=\"text-muted-foreground\">CO Emissions</span>\n                      <span className=\"font-medium\">{option.carbonEmissions.toFixed(2)} kg</span>\n                    </div>\n                    {option.carbonSaved > 0 && (\n                      <div className=\"flex items-center justify-between text-sm\">\n                        <span className=\"text-muted-foreground flex items-center gap-1\">\n                          <Leaf className=\"w-3 h-3\" />\n                          Carbon Saved\n                        </span>\n                        <span className=\"font-medium text-primary\">{option.carbonSaved.toFixed(2)} kg</span>\n                      </div>\n                    )}\n                    <Button\n                      className=\"w-full mt-2\"\n                      onClick={() => {\n                        const pointsEarned = Math.round(option.carbonSaved * 10);\n                        selectRouteMutation.mutate({\n                          startLocation: form.getValues(\"startLocation\"),\n                          endLocation: form.getValues(\"endLocation\"),\n                          distance: option.distance,\n                          carbonSaved: option.carbonSaved,\n                          routeType: option.mode,\n                          pointsEarned,\n                        });\n                      }}\n                      disabled={selectRouteMutation.isPending}\n                      data-testid={`button-select-${option.mode}`}\n                    >\n                      {selectRouteMutation.isPending ? \"Saving...\" : `Select & Earn ${Math.round(option.carbonSaved * 10)} pts`}\n                    </Button>\n                  </CardContent>\n                </Card>\n              );\n            })}\n          </div>\n        </div>\n      )}\n\n      {/* Latest Routes */}\n      {latestRoutes.length > 0 && (\n        <div>\n          <h2 className=\"text-xl font-semibold mb-4\">Your Recent Routes</h2>\n          <div className=\"grid grid-cols-1 md:grid-cols-3 gap-4\">\n            {latestRoutes.map((route, index) => (\n              <Card key={index} data-testid={`card-route-${index}`}>\n                <CardHeader>\n                  <div className=\"flex items-center justify-between\">\n                    <CardTitle className=\"text-lg capitalize\">{route.routeType} Route</CardTitle>\n                    {route.pointsEarned > 0 && (\n                      <Badge variant=\"default\" data-testid={`badge-points-${index}`}>+{route.pointsEarned} pts</Badge>\n                    )}\n                  </div>\n                </CardHeader>\n                <CardContent className=\"space-y-2\">\n                  <div className=\"flex items-center justify-between text-sm\">\n                    <span className=\"text-muted-foreground\">From</span>\n                    <span className=\"font-medium truncate ml-2\" data-testid={`text-start-${index}`}>{route.startLocation}</span>\n                  </div>\n                  <div className=\"flex items-center justify-between text-sm\">\n                    <span className=\"text-muted-foreground\">To</span>\n                    <span className=\"font-medium truncate ml-2\" data-testid={`text-end-${index}`}>{route.endLocation}</span>\n                  </div>\n                  <div className=\"flex items-center justify-between text-sm\">\n                    <span className=\"text-muted-foreground\">Distance</span>\n                    <span className=\"font-medium\" data-testid={`text-distance-${index}`}>{route.distance} km</span>\n                  </div>\n                  {route.carbonSaved > 0 && (\n                    <div className=\"flex items-center justify-between text-sm\">\n                      <span className=\"text-muted-foreground flex items-center gap-1\">\n                        <Leaf className=\"w-3 h-3\" />\n                        Carbon Saved\n                      </span>\n                      <span className=\"font-medium text-primary\" data-testid={`text-carbon-${index}`}>{route.carbonSaved} kg</span>\n                    </div>\n                  )}\n                  <Button\n                    className=\"w-full mt-4\"\n                    variant=\"outline\"\n                    onClick={() => {\n                      form.setValue(\"startLocation\", route.startLocation);\n                      form.setValue(\"endLocation\", route.endLocation);\n                    }}\n                    data-testid={`button-reuse-${index}`}\n                  >\n                    <Navigation className=\"w-4 h-4 mr-2\" />\n                    Reuse Route\n                  </Button>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        </div>\n      )}\n\n      {/* Route History */}\n      <div>\n        <h2 className=\"text-xl font-semibold mb-4\">Recent Routes</h2>\n        {routesLoading ? (\n          <div className=\"space-y-3\">\n            <Skeleton className=\"h-20 w-full\" />\n            <Skeleton className=\"h-20 w-full\" />\n          </div>\n        ) : routes && routes.length > 0 ? (\n          <div className=\"space-y-3\">\n            {routes.slice(0, 10).map((route) => (\n              <Card key={route.id} className=\"hover-elevate\">\n                <CardContent className=\"p-4\">\n                  <div className=\"flex flex-wrap items-center justify-between gap-4\">\n                    <div className=\"flex-1 min-w-0\">\n                      <p className=\"font-medium truncate\">{route.startLocation}  {route.endLocation}</p>\n                      <p className=\"text-sm text-muted-foreground\">\n                        {new Date(route.createdAt!).toLocaleDateString()}\n                      </p>\n                    </div>\n                    <div className=\"flex flex-wrap gap-2\">\n                      <Badge variant=\"outline\">{route.distance} km</Badge>\n                      <Badge variant=\"outline\" className=\"gap-1\">\n                        <Leaf className=\"w-3 h-3\" />\n                        {route.carbonSaved.toFixed(1)} kg saved\n                      </Badge>\n                      <Badge variant=\"secondary\">+{route.pointsEarned} pts</Badge>\n                    </div>\n                  </div>\n                </CardContent>\n              </Card>\n            ))}\n          </div>\n        ) : (\n          <Card>\n            <CardContent className=\"py-12 text-center\">\n              <AlertCircle className=\"w-12 h-12 text-muted-foreground mx-auto mb-4\" />\n              <p className=\"text-muted-foreground\">No routes yet. Calculate your first eco-friendly route!</p>\n            </CardContent>\n          </Card>\n        )}\n      </div>\n    </div>\n  );\n}\n","size_bytes":15087},"client/src/components/AppSidebar.tsx":{"content":"import {\n  Home,\n  Zap,\n  Droplet,\n  Map,\n  Sparkles,\n  Gift,\n  TrendingUp,\n  Trophy,\n  User,\n  LogOut,\n} from \"lucide-react\";\nimport {\n  Sidebar,\n  SidebarContent,\n  SidebarFooter,\n  SidebarGroup,\n  SidebarGroupContent,\n  SidebarGroupLabel,\n  SidebarMenu,\n  SidebarMenuButton,\n  SidebarMenuItem,\n  SidebarHeader,\n} from \"@/components/ui/sidebar\";\nimport { Link, useLocation } from \"wouter\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Leaf } from \"lucide-react\";\n\nconst menuItems = [\n  {\n    title: \"Home\",\n    url: \"/\",\n    icon: Home,\n  },\n  {\n    title: \"Energy Predictor\",\n    url: \"/energy\",\n    icon: Zap,\n  },\n  {\n    title: \"Water Tracker\",\n    url: \"/water\",\n    icon: Droplet,\n  },\n  {\n    title: \"Eco Routes\",\n    url: \"/routes\",\n    icon: Map,\n  },\n  {\n    title: \"AI Advisor\",\n    url: \"/advisor\",\n    icon: Sparkles,\n  },\n  {\n    title: \"Rewards\",\n    url: \"/rewards\",\n    icon: Gift,\n  },\n  {\n    title: \"Leaderboard\",\n    url: \"/leaderboard\",\n    icon: Trophy,\n  },\n  {\n    title: \"Progress\",\n    url: \"/progress\",\n    icon: TrendingUp,\n  },\n];\n\nexport function AppSidebar() {\n  const [location] = useLocation();\n  const { user } = useAuth();\n\n  return (\n    <Sidebar>\n      <SidebarHeader className=\"p-4\">\n        <div className=\"flex items-center gap-2\">\n          <div className=\"flex items-center justify-center w-8 h-8 rounded-md bg-primary\">\n            <Leaf className=\"w-5 h-5 text-primary-foreground\" />\n          </div>\n          <div className=\"flex flex-col\">\n            <span className=\"text-sm font-display font-semibold\">Green Intelligence</span>\n            <span className=\"text-xs text-muted-foreground\">Code that saves carbon</span>\n          </div>\n        </div>\n      </SidebarHeader>\n      <SidebarContent>\n        <SidebarGroup>\n          <SidebarGroupLabel>Dashboard</SidebarGroupLabel>\n          <SidebarGroupContent>\n            <SidebarMenu>\n              {menuItems.map((item) => (\n                <SidebarMenuItem key={item.title}>\n                  <SidebarMenuButton asChild isActive={location === item.url} data-testid={`link-${item.title.toLowerCase().replace(/\\s+/g, '-')}`}>\n                    <Link href={item.url}>\n                      <item.icon className=\"w-4 h-4\" />\n                      <span>{item.title}</span>\n                    </Link>\n                  </SidebarMenuButton>\n                </SidebarMenuItem>\n              ))}\n            </SidebarMenu>\n          </SidebarGroupContent>\n        </SidebarGroup>\n      </SidebarContent>\n      <SidebarFooter className=\"p-4 border-t\">\n        {user && (\n          <div className=\"flex items-center gap-3 mb-3\">\n            <Avatar className=\"w-10 h-10\">\n              <AvatarImage src={user.profileImageUrl || undefined} alt={user.firstName || \"User\"} className=\"object-cover\" />\n              <AvatarFallback>{user.firstName?.[0] || user.email?.[0] || \"U\"}</AvatarFallback>\n            </Avatar>\n            <div className=\"flex-1 min-w-0\">\n              <p className=\"text-sm font-medium truncate\" data-testid=\"text-user-name\">\n                {user.firstName && user.lastName ? `${user.firstName} ${user.lastName}` : user.email}\n              </p>\n              <Badge variant=\"secondary\" className=\"mt-1\" data-testid=\"badge-points\">\n                {user.points || 0} points\n              </Badge>\n            </div>\n          </div>\n        )}\n        <SidebarMenu>\n          <SidebarMenuItem>\n            <SidebarMenuButton asChild data-testid=\"button-logout\">\n              <a href=\"/api/logout\">\n                <LogOut className=\"w-4 h-4\" />\n                <span>Log out</span>\n              </a>\n            </SidebarMenuButton>\n          </SidebarMenuItem>\n        </SidebarMenu>\n      </SidebarFooter>\n    </Sidebar>\n  );\n}\n","size_bytes":3886},"client/src/components/ui/aspect-ratio.tsx":{"content":"import * as AspectRatioPrimitive from \"@radix-ui/react-aspect-ratio\"\n\nconst AspectRatio = AspectRatioPrimitive.Root\n\nexport { AspectRatio }\n","size_bytes":140},"client/src/components/ui/progress.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as ProgressPrimitive from \"@radix-ui/react-progress\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Progress = React.forwardRef<\n  React.ElementRef<typeof ProgressPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof ProgressPrimitive.Root>\n>(({ className, value, ...props }, ref) => (\n  <ProgressPrimitive.Root\n    ref={ref}\n    className={cn(\n      \"relative h-4 w-full overflow-hidden rounded-full bg-secondary\",\n      className\n    )}\n    {...props}\n  >\n    <ProgressPrimitive.Indicator\n      className=\"h-full w-full flex-1 bg-primary transition-all\"\n      style={{ transform: `translateX(-${100 - (value || 0)}%)` }}\n    />\n  </ProgressPrimitive.Root>\n))\nProgress.displayName = ProgressPrimitive.Root.displayName\n\nexport { Progress }\n","size_bytes":791},"client/src/pages/Home.tsx":{"content":"import { useState } from \"react\";\nimport { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { useAuth } from \"@/hooks/useAuth\";\nimport { Card, CardContent, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Textarea } from \"@/components/ui/textarea\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Leaf, Droplet, Zap, Heart, MessageCircle, UserPlus } from \"lucide-react\";\nimport type { Post, User } from \"@shared/schema\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { isUnauthorizedError } from \"@/lib/authUtils\";\n\ntype PostWithUser = Post & { user: User };\n\nexport default function Home() {\n  const { user } = useAuth();\n  const { toast } = useToast();\n  const [postContent, setPostContent] = useState(\"\");\n\n  const { data: posts, isLoading } = useQuery<PostWithUser[]>({\n    queryKey: [\"/api/posts\"],\n  });\n\n  const createPost = useMutation({\n    mutationFn: async (content: string) => {\n      await apiRequest(\"POST\", \"/api/posts\", {\n        content,\n        achievementType: \"general\",\n      });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/posts\"] });\n      setPostContent(\"\");\n      toast({\n        title: \"Post shared!\",\n        description: \"Your sustainability update has been posted to the community.\",\n      });\n    },\n    onError: (error: Error) => {\n      if (isUnauthorizedError(error)) {\n        toast({\n          title: \"Unauthorized\",\n          description: \"You are logged out. Logging in again...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: \"Error\",\n        description: \"Failed to create post. Please try again.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  return (\n    <div className=\"max-w-4xl mx-auto p-4 sm:p-6 lg:p-8 space-y-6\">\n      {/* Welcome Header */}\n      <div>\n        <h1 className=\"text-3xl font-display font-bold mb-2\">\n          Welcome back, {user?.firstName || \"there\"}!\n        </h1>\n        <p className=\"text-muted-foreground\">Share your sustainability achievements with the community</p>\n      </div>\n\n      {/* Quick Stats */}\n      <div className=\"grid grid-cols-2 lg:grid-cols-4 gap-4\">\n        <StatCard\n          icon={<Leaf className=\"w-5 h-5\" />}\n          label=\"Total Points\"\n          value={user?.points || 0}\n          color=\"primary\"\n        />\n        <StatCard\n          icon={<Leaf className=\"w-5 h-5\" />}\n          label=\"Carbon Saved\"\n          value={`${(user?.totalCarbonSaved || 0).toFixed(1)} kg`}\n          color=\"primary\"\n        />\n        <StatCard\n          icon={<Droplet className=\"w-5 h-5\" />}\n          label=\"Water Saved\"\n          value={`${(user?.totalWaterSaved || 0).toFixed(0)} L`}\n          color=\"primary\"\n        />\n        <StatCard\n          icon={<Zap className=\"w-5 h-5\" />}\n          label=\"Eco Actions\"\n          value={posts?.length || 0}\n          color=\"primary\"\n        />\n      </div>\n\n      {/* Create Post */}\n      <Card>\n        <CardHeader>\n          <CardTitle className=\"text-lg\">Share Your Impact</CardTitle>\n        </CardHeader>\n        <CardContent className=\"space-y-4\">\n          <Textarea\n            placeholder=\"What eco-friendly action did you take today?\"\n            value={postContent}\n            onChange={(e) => setPostContent(e.target.value)}\n            className=\"min-h-[100px] resize-none\"\n            data-testid=\"input-post-content\"\n          />\n          <div className=\"flex justify-end\">\n            <Button\n              onClick={() => createPost.mutate(postContent)}\n              disabled={!postContent.trim() || createPost.isPending}\n              data-testid=\"button-create-post\"\n            >\n              {createPost.isPending ? \"Posting...\" : \"Share\"}\n            </Button>\n          </div>\n        </CardContent>\n      </Card>\n\n      {/* Community Feed */}\n      <div>\n        <h2 className=\"text-2xl font-display font-semibold mb-4\">Community Feed</h2>\n        <div className=\"space-y-4\">\n          {isLoading ? (\n            <>\n              <PostSkeleton />\n              <PostSkeleton />\n              <PostSkeleton />\n            </>\n          ) : posts && posts.length > 0 ? (\n            posts.map((post) => <PostCard key={post.id} post={post} />)\n          ) : (\n            <Card>\n              <CardContent className=\"py-12 text-center\">\n                <p className=\"text-muted-foreground\">No posts yet. Be the first to share your sustainability journey!</p>\n              </CardContent>\n            </Card>\n          )}\n        </div>\n      </div>\n    </div>\n  );\n}\n\nfunction StatCard({ icon, label, value, color }: { icon: React.ReactNode; label: string; value: string | number; color: string }) {\n  return (\n    <Card>\n      <CardContent className=\"p-4\">\n        <div className=\"flex items-center gap-3\">\n          <div className={`flex items-center justify-center w-10 h-10 rounded-lg bg-${color}/10 text-${color}`}>\n            {icon}\n          </div>\n          <div className=\"flex-1 min-w-0\">\n            <p className=\"text-xs text-muted-foreground\">{label}</p>\n            <p className=\"text-lg font-semibold truncate\" data-testid={`stat-${label.toLowerCase().replace(/\\s+/g, '-')}`}>{value}</p>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n\nfunction PostCard({ post }: { post: PostWithUser }) {\n  const { user: currentUser } = useAuth();\n  const { toast } = useToast();\n  const [showComments, setShowComments] = useState(false);\n  const [commentContent, setCommentContent] = useState(\"\");\n\n  const { data: likeData } = useQuery({\n    queryKey: [`/api/posts/${post.id}/likes`],\n  });\n\n  const { data: comments } = useQuery({\n    queryKey: [`/api/posts/${post.id}/comments`],\n    enabled: showComments,\n  });\n\n  const likeMutation = useMutation({\n    mutationFn: async () => {\n      await apiRequest(\"POST\", `/api/posts/${post.id}/like`, {});\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [`/api/posts/${post.id}/likes`] });\n    },\n    onError: (error: Error) => {\n      if (isUnauthorizedError(error)) {\n        window.location.href = \"/api/login\";\n        return;\n      }\n      toast({\n        title: \"Error\",\n        description: \"Failed to update like status\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const commentMutation = useMutation({\n    mutationFn: async (content: string) => {\n      await apiRequest(\"POST\", `/api/posts/${post.id}/comments`, { content });\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [`/api/posts/${post.id}/comments`] });\n      setCommentContent(\"\");\n      toast({\n        title: \"Comment posted!\",\n        description: \"Your comment has been added.\",\n      });\n    },\n    onError: (error: Error) => {\n      if (isUnauthorizedError(error)) {\n        window.location.href = \"/api/login\";\n        return;\n      }\n      toast({\n        title: \"Error\",\n        description: \"Failed to post comment\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  return (\n    <Card className=\"hover-elevate\" data-testid={`card-post-${post.id}`}>\n      <CardContent className=\"p-6\">\n        <div className=\"flex items-start gap-4\">\n          <Avatar className=\"w-12 h-12\">\n            <AvatarImage src={post.user.profileImageUrl || undefined} alt={post.user.firstName || \"User\"} className=\"object-cover\" />\n            <AvatarFallback>{post.user.firstName?.[0] || post.user.email?.[0] || \"U\"}</AvatarFallback>\n          </Avatar>\n          <div className=\"flex-1 min-w-0\">\n            <div className=\"flex items-center gap-2 mb-1\">\n              <p className=\"font-semibold\">\n                {post.user.firstName && post.user.lastName\n                  ? `${post.user.firstName} ${post.user.lastName}`\n                  : post.user.email}\n              </p>\n              <Badge variant=\"secondary\" className=\"text-xs\">\n                {post.achievementType}\n              </Badge>\n            </div>\n            <p className=\"text-sm text-muted-foreground mb-3\">\n              {new Date(post.createdAt!).toLocaleDateString()} at {new Date(post.createdAt!).toLocaleTimeString()}\n            </p>\n            <p className=\"text-sm mb-4\">{post.content}</p>\n            {(post.carbonSaved || post.waterSaved || post.pointsEarned) && (\n              <div className=\"flex flex-wrap gap-2 mb-4\">\n                {post.carbonSaved && (\n                  <Badge variant=\"outline\" className=\"gap-1\">\n                    <Leaf className=\"w-3 h-3\" />\n                    {post.carbonSaved.toFixed(1)} kg CO saved\n                  </Badge>\n                )}\n                {post.waterSaved && (\n                  <Badge variant=\"outline\" className=\"gap-1\">\n                    <Droplet className=\"w-3 h-3\" />\n                    {post.waterSaved.toFixed(0)} L saved\n                  </Badge>\n                )}\n                {post.pointsEarned && (\n                  <Badge variant=\"outline\" className=\"gap-1\">\n                    <Zap className=\"w-3 h-3\" />\n                    +{post.pointsEarned} points\n                  </Badge>\n                )}\n              </div>\n            )}\n            <div className=\"flex items-center gap-4 mb-4\">\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                className=\"gap-2\"\n                onClick={() => likeMutation.mutate()}\n                disabled={likeMutation.isPending}\n                data-testid={`button-like-${post.id}`}\n              >\n                <Heart className={`w-4 h-4 ${likeData?.hasLiked ? 'fill-primary text-primary' : ''}`} />\n                {likeData?.count || post.likes || 0}\n              </Button>\n              <Button\n                variant=\"ghost\"\n                size=\"sm\"\n                className=\"gap-2\"\n                onClick={() => setShowComments(!showComments)}\n                data-testid={`button-comments-${post.id}`}\n              >\n                <MessageCircle className=\"w-4 h-4\" />\n                {comments?.length || 0}\n              </Button>\n            </div>\n\n            {showComments && (\n              <div className=\"space-y-4 pt-4 border-t\">\n                <div className=\"space-y-3\">\n                  {comments && comments.length > 0 ? (\n                    comments.map((comment: any) => (\n                      <div key={comment.id} className=\"flex items-start gap-2\" data-testid={`comment-${comment.id}`}>\n                        <Avatar className=\"w-8 h-8\">\n                          <AvatarImage src={comment.user?.profileImageUrl || undefined} className=\"object-cover\" />\n                          <AvatarFallback className=\"text-xs\">{comment.user?.firstName?.[0] || \"U\"}</AvatarFallback>\n                        </Avatar>\n                        <div className=\"flex-1 min-w-0\">\n                          <p className=\"text-sm font-medium\">{comment.user?.firstName || \"User\"}</p>\n                          <p className=\"text-sm text-muted-foreground\">{comment.content}</p>\n                        </div>\n                      </div>\n                    ))\n                  ) : (\n                    <p className=\"text-sm text-muted-foreground text-center py-2\">No comments yet</p>\n                  )}\n                </div>\n                <div className=\"flex gap-2\">\n                  <Textarea\n                    placeholder=\"Add a comment...\"\n                    value={commentContent}\n                    onChange={(e) => setCommentContent(e.target.value)}\n                    className=\"min-h-[60px] resize-none\"\n                    data-testid={`input-comment-${post.id}`}\n                  />\n                  <Button\n                    onClick={() => commentMutation.mutate(commentContent)}\n                    disabled={!commentContent.trim() || commentMutation.isPending}\n                    data-testid={`button-submit-comment-${post.id}`}\n                  >\n                    {commentMutation.isPending ? \"Posting...\" : \"Post\"}\n                  </Button>\n                </div>\n              </div>\n            )}\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n\nfunction PostSkeleton() {\n  return (\n    <Card>\n      <CardContent className=\"p-6\">\n        <div className=\"flex items-start gap-4\">\n          <Skeleton className=\"w-12 h-12 rounded-full\" />\n          <div className=\"flex-1 space-y-2\">\n            <Skeleton className=\"h-4 w-32\" />\n            <Skeleton className=\"h-3 w-24\" />\n            <Skeleton className=\"h-20 w-full\" />\n            <div className=\"flex gap-2\">\n              <Skeleton className=\"h-6 w-24\" />\n              <Skeleton className=\"h-6 w-24\" />\n            </div>\n          </div>\n        </div>\n      </CardContent>\n    </Card>\n  );\n}\n","size_bytes":13044},"client/src/components/ui/pagination.tsx":{"content":"import * as React from \"react\"\nimport { ChevronLeft, ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\nimport { ButtonProps, buttonVariants } from \"@/components/ui/button\"\n\nconst Pagination = ({ className, ...props }: React.ComponentProps<\"nav\">) => (\n  <nav\n    role=\"navigation\"\n    aria-label=\"pagination\"\n    className={cn(\"mx-auto flex w-full justify-center\", className)}\n    {...props}\n  />\n)\nPagination.displayName = \"Pagination\"\n\nconst PaginationContent = React.forwardRef<\n  HTMLUListElement,\n  React.ComponentProps<\"ul\">\n>(({ className, ...props }, ref) => (\n  <ul\n    ref={ref}\n    className={cn(\"flex flex-row items-center gap-1\", className)}\n    {...props}\n  />\n))\nPaginationContent.displayName = \"PaginationContent\"\n\nconst PaginationItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentProps<\"li\">\n>(({ className, ...props }, ref) => (\n  <li ref={ref} className={cn(\"\", className)} {...props} />\n))\nPaginationItem.displayName = \"PaginationItem\"\n\ntype PaginationLinkProps = {\n  isActive?: boolean\n} & Pick<ButtonProps, \"size\"> &\n  React.ComponentProps<\"a\">\n\nconst PaginationLink = ({\n  className,\n  isActive,\n  size = \"icon\",\n  ...props\n}: PaginationLinkProps) => (\n  <a\n    aria-current={isActive ? \"page\" : undefined}\n    className={cn(\n      buttonVariants({\n        variant: isActive ? \"outline\" : \"ghost\",\n        size,\n      }),\n      className\n    )}\n    {...props}\n  />\n)\nPaginationLink.displayName = \"PaginationLink\"\n\nconst PaginationPrevious = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to previous page\"\n    size=\"default\"\n    className={cn(\"gap-1 pl-2.5\", className)}\n    {...props}\n  >\n    <ChevronLeft className=\"h-4 w-4\" />\n    <span>Previous</span>\n  </PaginationLink>\n)\nPaginationPrevious.displayName = \"PaginationPrevious\"\n\nconst PaginationNext = ({\n  className,\n  ...props\n}: React.ComponentProps<typeof PaginationLink>) => (\n  <PaginationLink\n    aria-label=\"Go to next page\"\n    size=\"default\"\n    className={cn(\"gap-1 pr-2.5\", className)}\n    {...props}\n  >\n    <span>Next</span>\n    <ChevronRight className=\"h-4 w-4\" />\n  </PaginationLink>\n)\nPaginationNext.displayName = \"PaginationNext\"\n\nconst PaginationEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    aria-hidden\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More pages</span>\n  </span>\n)\nPaginationEllipsis.displayName = \"PaginationEllipsis\"\n\nexport {\n  Pagination,\n  PaginationContent,\n  PaginationEllipsis,\n  PaginationItem,\n  PaginationLink,\n  PaginationNext,\n  PaginationPrevious,\n}\n","size_bytes":2751},"client/src/components/ui/radio-group.tsx":{"content":"import * as React from \"react\"\nimport * as RadioGroupPrimitive from \"@radix-ui/react-radio-group\"\nimport { Circle } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst RadioGroup = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Root>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Root>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Root\n      className={cn(\"grid gap-2\", className)}\n      {...props}\n      ref={ref}\n    />\n  )\n})\nRadioGroup.displayName = RadioGroupPrimitive.Root.displayName\n\nconst RadioGroupItem = React.forwardRef<\n  React.ElementRef<typeof RadioGroupPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof RadioGroupPrimitive.Item>\n>(({ className, ...props }, ref) => {\n  return (\n    <RadioGroupPrimitive.Item\n      ref={ref}\n      className={cn(\n        \"aspect-square h-4 w-4 rounded-full border border-primary text-primary ring-offset-background focus:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50\",\n        className\n      )}\n      {...props}\n    >\n      <RadioGroupPrimitive.Indicator className=\"flex items-center justify-center\">\n        <Circle className=\"h-2.5 w-2.5 fill-current text-current\" />\n      </RadioGroupPrimitive.Indicator>\n    </RadioGroupPrimitive.Item>\n  )\n})\nRadioGroupItem.displayName = RadioGroupPrimitive.Item.displayName\n\nexport { RadioGroup, RadioGroupItem }\n","size_bytes":1467},"client/src/pages/Rewards.tsx":{"content":"import { useQuery, useMutation } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardDescription, CardHeader, CardTitle } from \"@/components/ui/card\";\nimport { Button } from \"@/components/ui/button\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { useToast } from \"@/hooks/use-toast\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Gift, Ticket, Award, Calendar, AlertCircle, Sparkles } from \"lucide-react\";\nimport type { ScratchCard, Coupon, UserScratchCard, UserCoupon, User } from \"@shared/schema\";\nimport { apiRequest, queryClient } from \"@/lib/queryClient\";\nimport { isUnauthorizedError } from \"@/lib/authUtils\";\nimport { useAuth } from \"@/hooks/useAuth\";\n\ntype ScratchCardWithRedemption = ScratchCard & { userCard?: UserScratchCard };\ntype CouponWithRedemption = Coupon & { userCoupon?: UserCoupon };\n\nexport default function Rewards() {\n  const { user } = useAuth();\n  const { toast } = useToast();\n\n  const { data: scratchCards, isLoading: cardsLoading } = useQuery<ScratchCardWithRedemption[]>({\n    queryKey: [\"/api/rewards/scratch-cards\"],\n  });\n\n  const { data: coupons, isLoading: couponsLoading } = useQuery<CouponWithRedemption[]>({\n    queryKey: [\"/api/rewards/coupons\"],\n  });\n\n  const { data: myScratchCards } = useQuery<(UserScratchCard & { scratchCard: ScratchCard })[]>({\n    queryKey: [\"/api/rewards/my-scratch-cards\"],\n  });\n\n  const { data: myCoupons } = useQuery<(UserCoupon & { coupon: Coupon })[]>({\n    queryKey: [\"/api/rewards/my-coupons\"],\n  });\n\n  const redeemScratchCard = useMutation({\n    mutationFn: async (cardId: string) => {\n      const res = await apiRequest(\"POST\", \"/api/rewards/redeem-scratch-card\", { scratchCardId: cardId });\n      return await res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/rewards/scratch-cards\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/rewards/my-scratch-cards\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/auth/user\"] });\n      toast({\n        title: \"Scratch Card Redeemed!\",\n        description: \"Check 'My Rewards' tab to scratch and reveal your prize.\",\n      });\n    },\n    onError: (error: Error) => {\n      if (isUnauthorizedError(error)) {\n        toast({\n          title: \"Unauthorized\",\n          description: \"You are logged out. Logging in again...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to redeem scratch card.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const redeemCoupon = useMutation({\n    mutationFn: async (couponId: string) => {\n      const res = await apiRequest(\"POST\", \"/api/rewards/redeem-coupon\", { couponId });\n      return await res.json();\n    },\n    onSuccess: () => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/rewards/coupons\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/rewards/my-coupons\"] });\n      queryClient.invalidateQueries({ queryKey: [\"/api/auth/user\"] });\n      toast({\n        title: \"Coupon Redeemed!\",\n        description: \"Check 'My Rewards' tab to view your coupon code.\",\n      });\n    },\n    onError: (error: Error) => {\n      if (isUnauthorizedError(error)) {\n        toast({\n          title: \"Unauthorized\",\n          description: \"You are logged out. Logging in again...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: \"Error\",\n        description: error.message || \"Failed to redeem coupon.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  const scratchMutation = useMutation({\n    mutationFn: async (userCardId: string) => {\n      const res = await apiRequest(\"POST\", \"/api/rewards/scratch\", { userCardId });\n      return await res.json();\n    },\n    onSuccess: (data: any) => {\n      queryClient.invalidateQueries({ queryKey: [\"/api/rewards/my-scratch-cards\"] });\n      toast({\n        title: \"Congratulations!\",\n        description: `You won: ${data.prize}`,\n      });\n    },\n    onError: (error: Error) => {\n      if (isUnauthorizedError(error)) {\n        toast({\n          title: \"Unauthorized\",\n          description: \"You are logged out. Logging in again...\",\n          variant: \"destructive\",\n        });\n        setTimeout(() => {\n          window.location.href = \"/api/login\";\n        }, 500);\n        return;\n      }\n      toast({\n        title: \"Error\",\n        description: \"Failed to scratch card.\",\n        variant: \"destructive\",\n      });\n    },\n  });\n\n  return (\n    <div className=\"max-w-7xl mx-auto p-4 sm:p-6 lg:p-8 space-y-6\">\n      <div className=\"flex flex-wrap items-center justify-between gap-4\">\n        <div>\n          <h1 className=\"text-3xl font-display font-bold mb-2\">Rewards Hub</h1>\n          <p className=\"text-muted-foreground\">Redeem your points for eco-friendly rewards</p>\n        </div>\n        <Card className=\"min-w-[200px]\">\n          <CardContent className=\"p-4\">\n            <div className=\"flex items-center gap-3\">\n              <div className=\"flex items-center justify-center w-12 h-12 rounded-lg bg-primary/10 text-primary\">\n                <Award className=\"w-6 h-6\" />\n              </div>\n              <div>\n                <p className=\"text-xs text-muted-foreground\">Your Points</p>\n                <p className=\"text-2xl font-bold\" data-testid=\"text-user-points\">{user?.points || 0}</p>\n              </div>\n            </div>\n          </CardContent>\n        </Card>\n      </div>\n\n      <Tabs defaultValue=\"scratch-cards\" className=\"space-y-6\">\n        <TabsList className=\"grid w-full grid-cols-3\">\n          <TabsTrigger value=\"scratch-cards\">Scratch Cards</TabsTrigger>\n          <TabsTrigger value=\"coupons\">Discount Coupons</TabsTrigger>\n          <TabsTrigger value=\"my-rewards\">My Rewards</TabsTrigger>\n        </TabsList>\n\n        {/* Scratch Cards Tab */}\n        <TabsContent value=\"scratch-cards\" className=\"space-y-4\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Available Scratch Cards</CardTitle>\n              <CardDescription>Redeem points for eco-friendly home decor and personal essentials</CardDescription>\n            </CardHeader>\n            <CardContent>\n              {cardsLoading ? (\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                  {[1, 2, 3].map(i => <Skeleton key={i} className=\"h-48\" />)}\n                </div>\n              ) : scratchCards && scratchCards.length > 0 ? (\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                  {scratchCards.map(card => (\n                    <Card key={card.id} className=\"hover-elevate\">\n                      <CardContent className=\"p-6 space-y-4\">\n                        <div className=\"flex items-center justify-center w-16 h-16 rounded-lg bg-primary/10 text-primary mx-auto\">\n                          <Gift className=\"w-8 h-8\" />\n                        </div>\n                        <div className=\"text-center\">\n                          <h3 className=\"font-semibold mb-1\">{card.name}</h3>\n                          <p className=\"text-sm text-muted-foreground mb-3\">{card.description}</p>\n                          <Badge>{card.category.replace(\"_\", \" \")}</Badge>\n                        </div>\n                        <div className=\"flex items-center justify-between pt-2 border-t\">\n                          <span className=\"text-sm font-medium\">{card.pointsCost} points</span>\n                          <Button\n                            size=\"sm\"\n                            onClick={() => redeemScratchCard.mutate(card.id)}\n                            disabled={!user || user.points < card.pointsCost || redeemScratchCard.isPending}\n                            data-testid={`button-redeem-card-${card.id}`}\n                          >\n                            {redeemScratchCard.isPending ? \"Redeeming...\" : \"Redeem\"}\n                          </Button>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n              ) : (\n                <div className=\"py-12 text-center\">\n                  <AlertCircle className=\"w-12 h-12 text-muted-foreground mx-auto mb-4\" />\n                  <p className=\"text-muted-foreground\">No scratch cards available at the moment.</p>\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        {/* Coupons Tab */}\n        <TabsContent value=\"coupons\" className=\"space-y-4\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Discount Coupons</CardTitle>\n              <CardDescription>Premium rewards for eco-friendly products and courses</CardDescription>\n            </CardHeader>\n            <CardContent>\n              {couponsLoading ? (\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  {[1, 2].map(i => <Skeleton key={i} className=\"h-40\" />)}\n                </div>\n              ) : coupons && coupons.length > 0 ? (\n                <div className=\"grid grid-cols-1 md:grid-cols-2 gap-4\">\n                  {coupons.map((coupon: any) => (\n                    <Card key={coupon.id} className={`hover-elevate ${!coupon.isAvailable ? 'opacity-60' : ''}`}>\n                      <CardContent className=\"p-6\">\n                        <div className=\"flex items-start gap-4\">\n                          <div className=\"flex items-center justify-center w-14 h-14 rounded-lg bg-primary/10 text-primary flex-shrink-0\">\n                            <Ticket className=\"w-7 h-7\" />\n                          </div>\n                          <div className=\"flex-1 min-w-0\">\n                            <h3 className=\"font-semibold mb-1\">{coupon.name}</h3>\n                            <p className=\"text-sm text-muted-foreground mb-2\">{coupon.description}</p>\n                            <div className=\"flex flex-wrap gap-2 mb-3\">\n                              <Badge variant=\"default\">{coupon.discountPercentage}% OFF</Badge>\n                              <Badge variant=\"outline\">{coupon.brandName}</Badge>\n                              {coupon.eventType && (\n                                <Badge variant=\"secondary\" className=\"gap-1\">\n                                  <Calendar className=\"w-3 h-3\" />\n                                  {coupon.eventType.replace(\"_\", \" \")}\n                                </Badge>\n                              )}\n                            </div>\n                            {coupon.availabilityMessage && !coupon.isAvailable && (\n                              <p className=\"text-xs text-muted-foreground mb-2\">{coupon.availabilityMessage}</p>\n                            )}\n                            <div className=\"flex items-center justify-between\">\n                              <span className=\"text-sm font-medium\">{coupon.pointsCost} points</span>\n                              <Button\n                                size=\"sm\"\n                                onClick={() => redeemCoupon.mutate(coupon.id)}\n                                disabled={!user || user.points < coupon.pointsCost || redeemCoupon.isPending || !coupon.isAvailable}\n                                data-testid={`button-redeem-coupon-${coupon.id}`}\n                              >\n                                {redeemCoupon.isPending ? \"Claiming...\" : (!coupon.isAvailable ? \"Unavailable\" : \"Claim\")}\n                              </Button>\n                            </div>\n                          </div>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n              ) : (\n                <div className=\"py-12 text-center\">\n                  <AlertCircle className=\"w-12 h-12 text-muted-foreground mx-auto mb-4\" />\n                  <p className=\"text-muted-foreground\">No coupons available. Check back on special event days!</p>\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        {/* My Rewards Tab */}\n        <TabsContent value=\"my-rewards\" className=\"space-y-6\">\n          <Card>\n            <CardHeader>\n              <CardTitle>My Scratch Cards</CardTitle>\n            </CardHeader>\n            <CardContent>\n              {myScratchCards && myScratchCards.length > 0 ? (\n                <div className=\"grid grid-cols-1 md:grid-cols-2 lg:grid-cols-3 gap-4\">\n                  {myScratchCards.map(userCard => (\n                    <Card key={userCard.id} className=\"hover-elevate\">\n                      <CardContent className=\"p-6 space-y-4\">\n                        <div className=\"flex items-center justify-center w-16 h-16 rounded-lg bg-primary/10 text-primary mx-auto\">\n                          <Sparkles className=\"w-8 h-8\" />\n                        </div>\n                        <div className=\"text-center\">\n                          <h3 className=\"font-semibold mb-1\">{userCard.scratchCard.name}</h3>\n                          {userCard.isScratched ? (\n                            <>\n                              <Badge variant=\"default\" className=\"mb-2\">Revealed</Badge>\n                              <p className=\"text-lg font-semibold text-primary\">{userCard.prize}</p>\n                            </>\n                          ) : (\n                            <Button\n                              className=\"w-full\"\n                              onClick={() => scratchMutation.mutate(userCard.id)}\n                              disabled={scratchMutation.isPending}\n                              data-testid={`button-scratch-${userCard.id}`}\n                            >\n                              <Sparkles className=\"w-4 h-4 mr-2\" />\n                              {scratchMutation.isPending ? \"Scratching...\" : \"Scratch Now!\"}\n                            </Button>\n                          )}\n                        </div>\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n              ) : (\n                <div className=\"py-12 text-center\">\n                  <p className=\"text-muted-foreground\">You haven't redeemed any scratch cards yet.</p>\n                </div>\n              )}\n            </CardContent>\n          </Card>\n\n          <Card>\n            <CardHeader>\n              <CardTitle>My Coupons</CardTitle>\n            </CardHeader>\n            <CardContent>\n              {myCoupons && myCoupons.length > 0 ? (\n                <div className=\"space-y-3\">\n                  {myCoupons.map(userCoupon => (\n                    <Card key={userCoupon.id}>\n                      <CardContent className=\"p-4\">\n                        <div className=\"flex items-center justify-between gap-4\">\n                          <div className=\"flex-1\">\n                            <h3 className=\"font-semibold\">{userCoupon.coupon.name}</h3>\n                            <p className=\"text-sm text-muted-foreground\">{userCoupon.coupon.brandName}</p>\n                          </div>\n                          <div className=\"text-right\">\n                            <Badge variant={userCoupon.isUsed ? \"secondary\" : \"default\"}>\n                              {userCoupon.coupon.discountPercentage}% OFF\n                            </Badge>\n                            <p className=\"text-xs text-muted-foreground mt-1\">\n                              {userCoupon.isUsed ? \"Used\" : \"Available\"}\n                            </p>\n                          </div>\n                        </div>\n                      </CardContent>\n                    </Card>\n                  ))}\n                </div>\n              ) : (\n                <div className=\"py-12 text-center\">\n                  <p className=\"text-muted-foreground\">You haven't claimed any coupons yet.</p>\n                </div>\n              )}\n            </CardContent>\n          </Card>\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n}\n","size_bytes":16313},"client/src/components/ui/switch.tsx":{"content":"import * as React from \"react\"\nimport * as SwitchPrimitives from \"@radix-ui/react-switch\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Switch = React.forwardRef<\n  React.ElementRef<typeof SwitchPrimitives.Root>,\n  React.ComponentPropsWithoutRef<typeof SwitchPrimitives.Root>\n>(({ className, ...props }, ref) => (\n  <SwitchPrimitives.Root\n    className={cn(\n      \"peer inline-flex h-6 w-11 shrink-0 cursor-pointer items-center rounded-full border-2 border-transparent transition-colors focus-visible:outline-none focus-visible:ring-2 focus-visible:ring-ring focus-visible:ring-offset-2 focus-visible:ring-offset-background disabled:cursor-not-allowed disabled:opacity-50 data-[state=checked]:bg-primary data-[state=unchecked]:bg-input\",\n      className\n    )}\n    {...props}\n    ref={ref}\n  >\n    <SwitchPrimitives.Thumb\n      className={cn(\n        \"pointer-events-none block h-5 w-5 rounded-full bg-background shadow-lg ring-0 transition-transform data-[state=checked]:translate-x-5 data-[state=unchecked]:translate-x-0\"\n      )}\n    />\n  </SwitchPrimitives.Root>\n))\nSwitch.displayName = SwitchPrimitives.Root.displayName\n\nexport { Switch }\n","size_bytes":1139},"client/src/components/ui/select.tsx":{"content":"\"use client\"\n\nimport * as React from \"react\"\nimport * as SelectPrimitive from \"@radix-ui/react-select\"\nimport { Check, ChevronDown, ChevronUp } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Select = SelectPrimitive.Root\n\nconst SelectGroup = SelectPrimitive.Group\n\nconst SelectValue = SelectPrimitive.Value\n\nconst SelectTrigger = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Trigger>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Trigger>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Trigger\n    ref={ref}\n    className={cn(\n      \"flex h-9 w-full items-center justify-between rounded-md border border-input bg-background px-3 py-2 text-sm ring-offset-background data-[placeholder]:text-muted-foreground focus:outline-none focus:ring-2 focus:ring-ring focus:ring-offset-2 disabled:cursor-not-allowed disabled:opacity-50 [&>span]:line-clamp-1\",\n      className\n    )}\n    {...props}\n  >\n    {children}\n    <SelectPrimitive.Icon asChild>\n      <ChevronDown className=\"h-4 w-4 opacity-50\" />\n    </SelectPrimitive.Icon>\n  </SelectPrimitive.Trigger>\n))\nSelectTrigger.displayName = SelectPrimitive.Trigger.displayName\n\nconst SelectScrollUpButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollUpButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollUpButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollUpButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronUp className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollUpButton>\n))\nSelectScrollUpButton.displayName = SelectPrimitive.ScrollUpButton.displayName\n\nconst SelectScrollDownButton = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.ScrollDownButton>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.ScrollDownButton>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.ScrollDownButton\n    ref={ref}\n    className={cn(\n      \"flex cursor-default items-center justify-center py-1\",\n      className\n    )}\n    {...props}\n  >\n    <ChevronDown className=\"h-4 w-4\" />\n  </SelectPrimitive.ScrollDownButton>\n))\nSelectScrollDownButton.displayName =\n  SelectPrimitive.ScrollDownButton.displayName\n\nconst SelectContent = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Content>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Content>\n>(({ className, children, position = \"popper\", ...props }, ref) => (\n  <SelectPrimitive.Portal>\n    <SelectPrimitive.Content\n      ref={ref}\n      className={cn(\n        \"relative z-50 max-h-[--radix-select-content-available-height] min-w-[8rem] overflow-y-auto overflow-x-hidden rounded-md border bg-popover text-popover-foreground shadow-md data-[state=open]:animate-in data-[state=closed]:animate-out data-[state=closed]:fade-out-0 data-[state=open]:fade-in-0 data-[state=closed]:zoom-out-95 data-[state=open]:zoom-in-95 data-[side=bottom]:slide-in-from-top-2 data-[side=left]:slide-in-from-right-2 data-[side=right]:slide-in-from-left-2 data-[side=top]:slide-in-from-bottom-2 origin-[--radix-select-content-transform-origin]\",\n        position === \"popper\" &&\n          \"data-[side=bottom]:translate-y-1 data-[side=left]:-translate-x-1 data-[side=right]:translate-x-1 data-[side=top]:-translate-y-1\",\n        className\n      )}\n      position={position}\n      {...props}\n    >\n      <SelectScrollUpButton />\n      <SelectPrimitive.Viewport\n        className={cn(\n          \"p-1\",\n          position === \"popper\" &&\n            \"h-[var(--radix-select-trigger-height)] w-full min-w-[var(--radix-select-trigger-width)]\"\n        )}\n      >\n        {children}\n      </SelectPrimitive.Viewport>\n      <SelectScrollDownButton />\n    </SelectPrimitive.Content>\n  </SelectPrimitive.Portal>\n))\nSelectContent.displayName = SelectPrimitive.Content.displayName\n\nconst SelectLabel = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Label>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Label>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Label\n    ref={ref}\n    className={cn(\"py-1.5 pl-8 pr-2 text-sm font-semibold\", className)}\n    {...props}\n  />\n))\nSelectLabel.displayName = SelectPrimitive.Label.displayName\n\nconst SelectItem = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Item>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Item>\n>(({ className, children, ...props }, ref) => (\n  <SelectPrimitive.Item\n    ref={ref}\n    className={cn(\n      \"relative flex w-full cursor-default select-none items-center rounded-sm py-1.5 pl-8 pr-2 text-sm outline-none focus:bg-accent focus:text-accent-foreground data-[disabled]:pointer-events-none data-[disabled]:opacity-50\",\n      className\n    )}\n    {...props}\n  >\n    <span className=\"absolute left-2 flex h-3.5 w-3.5 items-center justify-center\">\n      <SelectPrimitive.ItemIndicator>\n        <Check className=\"h-4 w-4\" />\n      </SelectPrimitive.ItemIndicator>\n    </span>\n\n    <SelectPrimitive.ItemText>{children}</SelectPrimitive.ItemText>\n  </SelectPrimitive.Item>\n))\nSelectItem.displayName = SelectPrimitive.Item.displayName\n\nconst SelectSeparator = React.forwardRef<\n  React.ElementRef<typeof SelectPrimitive.Separator>,\n  React.ComponentPropsWithoutRef<typeof SelectPrimitive.Separator>\n>(({ className, ...props }, ref) => (\n  <SelectPrimitive.Separator\n    ref={ref}\n    className={cn(\"-mx-1 my-1 h-px bg-muted\", className)}\n    {...props}\n  />\n))\nSelectSeparator.displayName = SelectPrimitive.Separator.displayName\n\nexport {\n  Select,\n  SelectGroup,\n  SelectValue,\n  SelectTrigger,\n  SelectContent,\n  SelectLabel,\n  SelectItem,\n  SelectSeparator,\n  SelectScrollUpButton,\n  SelectScrollDownButton,\n}\n","size_bytes":5741},"client/src/components/ui/breadcrumb.tsx":{"content":"import * as React from \"react\"\nimport { Slot } from \"@radix-ui/react-slot\"\nimport { ChevronRight, MoreHorizontal } from \"lucide-react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Breadcrumb = React.forwardRef<\n  HTMLElement,\n  React.ComponentPropsWithoutRef<\"nav\"> & {\n    separator?: React.ReactNode\n  }\n>(({ ...props }, ref) => <nav ref={ref} aria-label=\"breadcrumb\" {...props} />)\nBreadcrumb.displayName = \"Breadcrumb\"\n\nconst BreadcrumbList = React.forwardRef<\n  HTMLOListElement,\n  React.ComponentPropsWithoutRef<\"ol\">\n>(({ className, ...props }, ref) => (\n  <ol\n    ref={ref}\n    className={cn(\n      \"flex flex-wrap items-center gap-1.5 break-words text-sm text-muted-foreground sm:gap-2.5\",\n      className\n    )}\n    {...props}\n  />\n))\nBreadcrumbList.displayName = \"BreadcrumbList\"\n\nconst BreadcrumbItem = React.forwardRef<\n  HTMLLIElement,\n  React.ComponentPropsWithoutRef<\"li\">\n>(({ className, ...props }, ref) => (\n  <li\n    ref={ref}\n    className={cn(\"inline-flex items-center gap-1.5\", className)}\n    {...props}\n  />\n))\nBreadcrumbItem.displayName = \"BreadcrumbItem\"\n\nconst BreadcrumbLink = React.forwardRef<\n  HTMLAnchorElement,\n  React.ComponentPropsWithoutRef<\"a\"> & {\n    asChild?: boolean\n  }\n>(({ asChild, className, ...props }, ref) => {\n  const Comp = asChild ? Slot : \"a\"\n\n  return (\n    <Comp\n      ref={ref}\n      className={cn(\"transition-colors hover:text-foreground\", className)}\n      {...props}\n    />\n  )\n})\nBreadcrumbLink.displayName = \"BreadcrumbLink\"\n\nconst BreadcrumbPage = React.forwardRef<\n  HTMLSpanElement,\n  React.ComponentPropsWithoutRef<\"span\">\n>(({ className, ...props }, ref) => (\n  <span\n    ref={ref}\n    role=\"link\"\n    aria-disabled=\"true\"\n    aria-current=\"page\"\n    className={cn(\"font-normal text-foreground\", className)}\n    {...props}\n  />\n))\nBreadcrumbPage.displayName = \"BreadcrumbPage\"\n\nconst BreadcrumbSeparator = ({\n  children,\n  className,\n  ...props\n}: React.ComponentProps<\"li\">) => (\n  <li\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"[&>svg]:w-3.5 [&>svg]:h-3.5\", className)}\n    {...props}\n  >\n    {children ?? <ChevronRight />}\n  </li>\n)\nBreadcrumbSeparator.displayName = \"BreadcrumbSeparator\"\n\nconst BreadcrumbEllipsis = ({\n  className,\n  ...props\n}: React.ComponentProps<\"span\">) => (\n  <span\n    role=\"presentation\"\n    aria-hidden=\"true\"\n    className={cn(\"flex h-9 w-9 items-center justify-center\", className)}\n    {...props}\n  >\n    <MoreHorizontal className=\"h-4 w-4\" />\n    <span className=\"sr-only\">More</span>\n  </span>\n)\nBreadcrumbEllipsis.displayName = \"BreadcrumbElipssis\"\n\nexport {\n  Breadcrumb,\n  BreadcrumbList,\n  BreadcrumbItem,\n  BreadcrumbLink,\n  BreadcrumbPage,\n  BreadcrumbSeparator,\n  BreadcrumbEllipsis,\n}\n","size_bytes":2712},"client/src/components/ui/card.tsx":{"content":"import * as React from \"react\"\n\nimport { cn } from \"@/lib/utils\"\n\nconst Card = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"shadcn-card rounded-xl border bg-card border-card-border text-card-foreground shadow-sm\",\n      className\n    )}\n    {...props}\n  />\n));\nCard.displayName = \"Card\"\n\nconst CardHeader = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex flex-col space-y-1.5 p-6\", className)}\n    {...props}\n  />\n));\nCardHeader.displayName = \"CardHeader\"\n\nconst CardTitle = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\n      \"text-2xl font-semibold leading-none tracking-tight\",\n      className\n    )}\n    {...props}\n  />\n))\nCardTitle.displayName = \"CardTitle\"\n\nconst CardDescription = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"text-sm text-muted-foreground\", className)}\n    {...props}\n  />\n));\nCardDescription.displayName = \"CardDescription\"\n\nconst CardContent = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div ref={ref} className={cn(\"p-6 pt-0\", className)} {...props} />\n))\nCardContent.displayName = \"CardContent\"\n\nconst CardFooter = React.forwardRef<\n  HTMLDivElement,\n  React.HTMLAttributes<HTMLDivElement>\n>(({ className, ...props }, ref) => (\n  <div\n    ref={ref}\n    className={cn(\"flex items-center p-6 pt-0\", className)}\n    {...props}\n  />\n))\nCardFooter.displayName = \"CardFooter\"\nexport {\n  Card,\n  CardHeader,\n  CardFooter,\n  CardTitle,\n  CardDescription,\n  CardContent,\n}\n","size_bytes":1904},"server/mapbox.ts":{"content":"// Mapbox Directions API integration for eco-friendly routing\nconst MAPBOX_TOKEN = process.env.MAPBOX_ACCESS_TOKEN;\nconst MAPBOX_API_BASE = \"https://api.mapbox.com/directions/v5/mapbox\";\n\n// Carbon emission factors (kg CO2 per km)\nconst CARBON_FACTORS = {\n  driving: 0.192, // Average car emissions\n  cycling: 0,     // Zero emissions\n  walking: 0,     // Zero emissions\n};\n\nexport interface RouteOption {\n  mode: 'driving' | 'cycling' | 'walking';\n  distance: number; // in kilometers\n  duration: number; // in seconds\n  carbonEmissions: number; // kg CO2\n  carbonSaved: number; // kg CO2 saved vs driving\n  geometry?: any; // GeoJSON LineString\n}\n\nexport async function calculateEcoRoutes(\n  startLocation: string,\n  endLocation: string\n): Promise<RouteOption[]> {\n  if (!MAPBOX_TOKEN) {\n    console.warn(\"MAPBOX_ACCESS_TOKEN not set, using fallback routes\");\n    return getFallbackRoutes(startLocation, endLocation);\n  }\n\n  try {\n    // Geocode locations first\n    const [startCoords, endCoords] = await Promise.all([\n      geocodeLocation(startLocation),\n      geocodeLocation(endLocation),\n    ]);\n\n    if (!startCoords || !endCoords) {\n      return getFallbackRoutes(startLocation, endLocation);\n    }\n\n    // Get routes for different modes\n    const modes: Array<'driving' | 'cycling' | 'walking'> = ['driving', 'cycling', 'walking'];\n    const routePromises = modes.map(mode => getDirections(startCoords, endCoords, mode));\n    \n    const routes = await Promise.all(routePromises);\n    \n    // Calculate carbon emissions and savings\n    const drivingDistance = routes[0]?.distance || 0;\n    const drivingEmissions = drivingDistance * CARBON_FACTORS.driving;\n\n    return routes.map((route, index) => {\n      const mode = modes[index];\n      const emissions = route.distance * CARBON_FACTORS[mode];\n      const saved = Math.max(0, drivingEmissions - emissions);\n\n      return {\n        mode,\n        distance: route.distance,\n        duration: route.duration,\n        carbonEmissions: emissions,\n        carbonSaved: saved,\n        geometry: route.geometry,\n      };\n    });\n  } catch (error) {\n    console.error(\"Error calculating routes with Mapbox:\", error);\n    return getFallbackRoutes(startLocation, endLocation);\n  }\n}\n\nasync function geocodeLocation(location: string): Promise<[number, number] | null> {\n  try {\n    const encodedLocation = encodeURIComponent(location);\n    const url = `https://api.mapbox.com/geocoding/v5/mapbox.places/${encodedLocation}.json?access_token=${MAPBOX_TOKEN}&limit=1`;\n    \n    const response = await fetch(url);\n    if (!response.ok) {\n      console.error(`Mapbox geocoding failed: ${response.status}`);\n      return null;\n    }\n\n    const data = await response.json();\n    if (data.features && data.features.length > 0) {\n      const [lng, lat] = data.features[0].center;\n      return [lng, lat];\n    }\n    \n    return null;\n  } catch (error) {\n    console.error(\"Geocoding error:\", error);\n    return null;\n  }\n}\n\nasync function getDirections(\n  start: [number, number],\n  end: [number, number],\n  profile: 'driving' | 'cycling' | 'walking'\n): Promise<{ distance: number; duration: number; geometry?: any }> {\n  try {\n    const coordinates = `${start[0]},${start[1]};${end[0]},${end[1]}`;\n    const url = `${MAPBOX_API_BASE}/${profile}/${coordinates}?geometries=geojson&access_token=${MAPBOX_TOKEN}`;\n    \n    const response = await fetch(url);\n    if (!response.ok) {\n      console.error(`Mapbox directions failed: ${response.status}`);\n      return getFallbackRoute(profile);\n    }\n\n    const data = await response.json();\n    if (data.routes && data.routes.length > 0) {\n      const route = data.routes[0];\n      return {\n        distance: route.distance / 1000, // Convert meters to kilometers\n        duration: route.duration,\n        geometry: route.geometry,\n      };\n    }\n    \n    return getFallbackRoute(profile);\n  } catch (error) {\n    console.error(`Error getting ${profile} directions:`, error);\n    return getFallbackRoute(profile);\n  }\n}\n\nfunction getFallbackRoute(profile: 'driving' | 'cycling' | 'walking'): { distance: number; duration: number } {\n  // Fallback estimates based on typical speeds\n  const baseDistance = 15; // km\n  const speeds = {\n    driving: 50,  // km/h\n    cycling: 20,  // km/h\n    walking: 5,   // km/h\n  };\n  \n  const distance = baseDistance;\n  const duration = (distance / speeds[profile]) * 3600; // Convert to seconds\n  \n  return { distance, duration };\n}\n\nfunction getFallbackRoutes(startLocation: string, endLocation: string): RouteOption[] {\n  const baseDistance = 15; // km\n  const drivingEmissions = baseDistance * CARBON_FACTORS.driving;\n\n  return [\n    {\n      mode: 'driving',\n      distance: baseDistance,\n      duration: 1080, // 18 minutes\n      carbonEmissions: drivingEmissions,\n      carbonSaved: 0,\n    },\n    {\n      mode: 'cycling',\n      distance: baseDistance,\n      duration: 2700, // 45 minutes\n      carbonEmissions: 0,\n      carbonSaved: drivingEmissions,\n    },\n    {\n      mode: 'walking',\n      distance: baseDistance,\n      duration: 10800, // 3 hours\n      carbonEmissions: 0,\n      carbonSaved: drivingEmissions,\n    },\n  ];\n}\n","size_bytes":5150},"client/src/pages/Leaderboard.tsx":{"content":"import { useQuery } from \"@tanstack/react-query\";\nimport { Card, CardContent, CardHeader, CardTitle, CardDescription } from \"@/components/ui/card\";\nimport { Avatar, AvatarFallback, AvatarImage } from \"@/components/ui/avatar\";\nimport { Badge } from \"@/components/ui/badge\";\nimport { Skeleton } from \"@/components/ui/skeleton\";\nimport { Tabs, TabsContent, TabsList, TabsTrigger } from \"@/components/ui/tabs\";\nimport { Trophy, Leaf, Droplet, Route, Zap } from \"lucide-react\";\nimport type { User } from \"@shared/schema\";\n\nexport default function Leaderboard() {\n  const { data: leaderboardData, isLoading } = useQuery<{\n    byPoints: User[];\n    byCarbonSaved: User[];\n    byWaterSaved: User[];\n  }>({\n    queryKey: [\"/api/leaderboard\"],\n  });\n\n  return (\n    <div className=\"max-w-6xl mx-auto p-4 sm:p-6 lg:p-8 space-y-6\">\n      <div>\n        <h1 className=\"text-3xl font-display font-bold mb-2\">Leaderboard</h1>\n        <p className=\"text-muted-foreground\">See how you compare to other sustainability champions</p>\n      </div>\n\n      <Tabs defaultValue=\"points\" className=\"space-y-4\">\n        <TabsList className=\"grid w-full grid-cols-3\">\n          <TabsTrigger value=\"points\" data-testid=\"tab-points\">\n            <Zap className=\"w-4 h-4 mr-2\" />\n            Points\n          </TabsTrigger>\n          <TabsTrigger value=\"carbon\" data-testid=\"tab-carbon\">\n            <Leaf className=\"w-4 h-4 mr-2\" />\n            Carbon Saved\n          </TabsTrigger>\n          <TabsTrigger value=\"water\" data-testid=\"tab-water\">\n            <Droplet className=\"w-4 h-4 mr-2\" />\n            Water Saved\n          </TabsTrigger>\n        </TabsList>\n\n        <TabsContent value=\"points\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Top Points Earners</CardTitle>\n              <CardDescription>Users with the highest sustainability points</CardDescription>\n            </CardHeader>\n            <CardContent>\n              {isLoading ? (\n                <div className=\"space-y-3\">\n                  {[1, 2, 3].map((i) => <LeaderboardSkeleton key={i} />)}\n                </div>\n              ) : leaderboardData?.byPoints && leaderboardData.byPoints.length > 0 ? (\n                <div className=\"space-y-3\">\n                  {leaderboardData.byPoints.map((user, index) => (\n                    <LeaderboardItem\n                      key={user.id}\n                      rank={index + 1}\n                      user={user}\n                      value={user.points}\n                      label=\"points\"\n                    />\n                  ))}\n                </div>\n              ) : (\n                <p className=\"text-center py-8 text-muted-foreground\">No data available yet</p>\n              )}\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        <TabsContent value=\"carbon\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Top Carbon Savers</CardTitle>\n              <CardDescription>Users who have saved the most CO</CardDescription>\n            </CardHeader>\n            <CardContent>\n              {isLoading ? (\n                <div className=\"space-y-3\">\n                  {[1, 2, 3].map((i) => <LeaderboardSkeleton key={i} />)}\n                </div>\n              ) : leaderboardData?.byCarbonSaved && leaderboardData.byCarbonSaved.length > 0 ? (\n                <div className=\"space-y-3\">\n                  {leaderboardData.byCarbonSaved.map((user, index) => (\n                    <LeaderboardItem\n                      key={user.id}\n                      rank={index + 1}\n                      user={user}\n                      value={user.totalCarbonSaved.toFixed(1)}\n                      label=\"kg CO\"\n                    />\n                  ))}\n                </div>\n              ) : (\n                <p className=\"text-center py-8 text-muted-foreground\">No data available yet</p>\n              )}\n            </CardContent>\n          </Card>\n        </TabsContent>\n\n        <TabsContent value=\"water\">\n          <Card>\n            <CardHeader>\n              <CardTitle>Top Water Conservers</CardTitle>\n              <CardDescription>Users who have saved the most water</CardDescription>\n            </CardHeader>\n            <CardContent>\n              {isLoading ? (\n                <div className=\"space-y-3\">\n                  {[1, 2, 3].map((i) => <LeaderboardSkeleton key={i} />)}\n                </div>\n              ) : leaderboardData?.byWaterSaved && leaderboardData.byWaterSaved.length > 0 ? (\n                <div className=\"space-y-3\">\n                  {leaderboardData.byWaterSaved.map((user, index) => (\n                    <LeaderboardItem\n                      key={user.id}\n                      rank={index + 1}\n                      user={user}\n                      value={user.totalWaterSaved.toFixed(0)}\n                      label=\"liters\"\n                    />\n                  ))}\n                </div>\n              ) : (\n                <p className=\"text-center py-8 text-muted-foreground\">No data available yet</p>\n              )}\n            </CardContent>\n          </Card>\n        </TabsContent>\n      </Tabs>\n    </div>\n  );\n}\n\nfunction LeaderboardItem({\n  rank,\n  user,\n  value,\n  label,\n}: {\n  rank: number;\n  user: User;\n  value: string | number;\n  label: string;\n}) {\n  const getMedalColor = (rank: number) => {\n    if (rank === 1) return \"text-yellow-500\";\n    if (rank === 2) return \"text-gray-400\";\n    if (rank === 3) return \"text-amber-600\";\n    return \"text-muted-foreground\";\n  };\n\n  return (\n    <div className=\"flex items-center gap-4 p-4 rounded-lg hover-elevate\" data-testid={`leaderboard-item-${rank}`}>\n      <div className={`flex items-center justify-center w-10 h-10 ${getMedalColor(rank)}`}>\n        {rank <= 3 ? <Trophy className=\"w-6 h-6\" /> : <span className=\"font-bold\">{rank}</span>}\n      </div>\n      <Avatar className=\"w-12 h-12\">\n        <AvatarImage src={user.profileImageUrl || undefined} className=\"object-cover\" />\n        <AvatarFallback>{user.firstName?.[0] || user.email?.[0] || \"U\"}</AvatarFallback>\n      </Avatar>\n      <div className=\"flex-1 min-w-0\">\n        <p className=\"font-semibold truncate\">\n          {user.firstName && user.lastName ? `${user.firstName} ${user.lastName}` : user.email}\n        </p>\n        <p className=\"text-sm text-muted-foreground\">\n          {value} {label}\n        </p>\n      </div>\n      {rank <= 3 && (\n        <Badge variant={rank === 1 ? \"default\" : \"secondary\"}>\n          {rank === 1 ? \"Champion\" : rank === 2 ? \"Runner-up\" : \"3rd Place\"}\n        </Badge>\n      )}\n    </div>\n  );\n}\n\nfunction LeaderboardSkeleton() {\n  return (\n    <div className=\"flex items-center gap-4 p-4\">\n      <Skeleton className=\"w-10 h-10\" />\n      <Skeleton className=\"w-12 h-12 rounded-full\" />\n      <div className=\"flex-1 space-y-2\">\n        <Skeleton className=\"h-4 w-32\" />\n        <Skeleton className=\"h-3 w-24\" />\n      </div>\n    </div>\n  );\n}\n","size_bytes":6927}},"version":2}